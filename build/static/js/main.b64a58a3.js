/*! For license information please see main.b64a58a3.js.LICENSE.txt */
(()=>{var e={6503:(e,t,n)=>{"use strict";e=n.nmd(e);const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t=>"\x1b[".concat(38+e,";5;").concat(t,"m")},a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(t,n,r)=>"\x1b[".concat(38+e,";2;").concat(t,";").concat(n,";").concat(r,"m")};Object.defineProperty(e,"exports",{enumerable:!0,get:function(){const e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(const[n,r]of Object.entries(t)){for(const[n,a]of Object.entries(r))t[n]={open:"\x1b[".concat(a[0],"m"),close:"\x1b[".concat(a[1],"m")},r[n]=t[n],e.set(a[0],a[1]);Object.defineProperty(t,n,{value:r,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="\x1b[39m",t.bgColor.close="\x1b[49m",t.color.ansi256=r(),t.color.ansi16m=a(),t.bgColor.ansi256=r(10),t.bgColor.ansi16m=a(10),Object.defineProperties(t,{rgbToAnsi256:{value:(e,t,n)=>e===t&&t===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(n/255*5),enumerable:!1},hexToRgb:{value:e=>{const t=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(e.toString(16));if(!t)return[0,0,0];let{colorString:n}=t.groups;3===n.length&&(n=n.split("").map((e=>e+e)).join(""));const r=Number.parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},enumerable:!1},hexToAnsi256:{value:e=>t.rgbToAnsi256(...t.hexToRgb(e)),enumerable:!1}}),t}})},8693:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});const r={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let a;const i=new Uint8Array(16);function o(){if(!a&&(a="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!a))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(i)}const s=[];for(let u=0;u<256;++u)s.push((u+256).toString(16).slice(1));function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]}const c=function(e,t,n){if(r.randomUUID&&!t&&!e)return r.randomUUID();const a=(e=e||{}).random||(e.rng||o)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=a[e];return t}return l(a)}},4445:(e,t)=>{"use strict";t.byteLength=function(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,i=s(e),o=i[0],l=i[1],c=new a(function(e,t,n){return 3*(t+n)/4-n}(0,o,l)),u=0,d=l>0?o-4:o;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===l&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,c[u++]=255&t);1===l&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,a=r%3,i=[],o=16383,s=0,c=r-a;s<c;s+=o)i.push(l(e,s,s+o>c?c:s+o));1===a?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===a&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return i.join("")};for(var n=[],r=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)n[o]=i[o],r[i.charCodeAt(o)]=o;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,r){for(var a,i,o=[],s=t;s<r;s+=3)a=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(n[(i=a)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},9894:e=>{"use strict";const t=/[\p{Lu}]/u,n=/[\p{Ll}]/u,r=/^[\p{Lu}](?![\p{Lu}])/gu,a=/([\p{Alpha}\p{N}_]|$)/u,i=/[_.\- ]+/,o=new RegExp("^"+i.source),s=new RegExp(i.source+a.source,"gu"),l=new RegExp("\\d+"+a.source,"gu"),c=(e,a)=>{if("string"!==typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");if(a={pascalCase:!1,preserveConsecutiveUppercase:!1,...a},0===(e=Array.isArray(e)?e.map((e=>e.trim())).filter((e=>e.length)).join("-"):e.trim()).length)return"";const i=!1===a.locale?e=>e.toLowerCase():e=>e.toLocaleLowerCase(a.locale),c=!1===a.locale?e=>e.toUpperCase():e=>e.toLocaleUpperCase(a.locale);if(1===e.length)return a.pascalCase?c(e):i(e);return e!==i(e)&&(e=((e,r,a)=>{let i=!1,o=!1,s=!1;for(let l=0;l<e.length;l++){const c=e[l];i&&t.test(c)?(e=e.slice(0,l)+"-"+e.slice(l),i=!1,s=o,o=!0,l++):o&&s&&n.test(c)?(e=e.slice(0,l-1)+"-"+e.slice(l-1),s=o,o=!1,i=!0):(i=r(c)===c&&a(c)!==c,s=o,o=a(c)===c&&r(c)!==c)}return e})(e,i,c)),e=e.replace(o,""),e=a.preserveConsecutiveUppercase?((e,t)=>(r.lastIndex=0,e.replace(r,(e=>t(e)))))(e,i):i(e),a.pascalCase&&(e=c(e.charAt(0))+e.slice(1)),((e,t)=>(s.lastIndex=0,l.lastIndex=0,e.replace(s,((e,n)=>t(n))).replace(l,(e=>t(e)))))(e,c)};e.exports=c,e.exports.default=c},3047:e=>{"use strict";e.exports=function(e,t){if("string"!==typeof e)throw new TypeError("Expected a string");return t="undefined"===typeof t?"_":t,e.replace(/([a-z\d])([A-Z])/g,"$1"+t+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+t+"$2").toLowerCase()}},7283:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,o){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new a(r,i||e,o),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,a=[];if(0===this._eventsCount)return a;for(r in e=this._events)t.call(e,r)&&a.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,i=r.length,o=new Array(i);a<i;a++)o[a]=r[a].fn;return o},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,a,i,o){var s=n?n+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,a),!0;case 5:return u.fn.call(u.context,t,r,a,i),!0;case 6:return u.fn.call(u.context,t,r,a,i,o),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,a);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,a){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||a&&!s.once||r&&s.context!==r||o(this,i);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||a&&!s[l].once||r&&s[l].context!==r)&&c.push(s[l]);c.length?this._events[i]=1===c.length?c[0]:c:o(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},9498:e=>{"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then((e=>new Promise((e=>{e(t())})).then((()=>e))),(e=>new Promise((e=>{e(t())})).then((()=>{throw e})))))},5623:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7283),a=n(2270),i=n(7349),o=()=>{},s=new a.TimeoutError;t.default=class extends r{constructor(e){var t,n,r,a;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=o,this._resolveIdle=o,!("number"===typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:i.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError("Expected `intervalCap` to be a number from 1 and up, got `".concat(null!==(n=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==n?n:"","` (").concat(typeof e.intervalCap,")"));if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError("Expected `interval` to be a finite number >= 0, got `".concat(null!==(a=null===(r=e.interval)||void 0===r?void 0:r.toString())&&void 0!==a?a:"","` (").concat(typeof e.interval,")"));this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=o,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=o,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((()=>{this._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"===typeof e&&e>=1))throw new TypeError("Expected `concurrency` to be a number from 1 and up, got `".concat(e,"` (").concat(typeof e,")"));this._concurrency=e,this._processQueue()}async add(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((n,r)=>{this._queue.enqueue((async()=>{this._pendingCount++,this._intervalCount++;try{const i=void 0===this._timeout&&void 0===t.timeout?e():a.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,(()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&r(s)}));n(await i)}catch(i){r(i)}this._next()}),t),this._tryToStartAnother(),this.emit("add")}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise((e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}}))}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise((e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}}))}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}},115:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){let r=0,a=e.length;for(;a>0;){const i=a/2|0;let o=r+i;n(e[o],t)<=0?(r=++o,a-=i+1):a=i}return r}},7349:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(115);t.default=class{constructor(){this._queue=[]}enqueue(e,t){const n={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(n);const a=r.default(this._queue,n,((e,t)=>t.priority-e.priority));this._queue.splice(a,0,n)}dequeue(){const e=this._queue.shift();return null===e||void 0===e?void 0:e.run}filter(e){return this._queue.filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return this._queue.length}}},6659:(e,t,n)=>{"use strict";const r=n(302),a=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class i extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,({message:e}=e)):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const o=(e,t)=>new Promise(((n,o)=>{t={onFailedAttempt:()=>{},retries:10,...t};const s=r.operation(t);s.attempt((async r=>{try{n(await e(r))}catch(c){if(!(c instanceof Error))return void o(new TypeError('Non-error was thrown: "'.concat(c,'". You should only throw errors.')));if(c instanceof i)s.stop(),o(c.originalError);else if(c instanceof TypeError&&(l=c.message,!a.includes(l)))s.stop(),o(c);else{((e,t,n)=>{const r=n.retries-(t-1);e.attemptNumber=t,e.retriesLeft=r})(c,r,t);try{await t.onFailedAttempt(c)}catch(c){return void o(c)}s.retry(c)||o(s.mainError())}}var l}))}));e.exports=o,e.exports.default=o,e.exports.AbortError=i},2270:(e,t,n)=>{"use strict";const r=n(9498);class a extends Error{constructor(e){super(e),this.name="TimeoutError"}}const i=(e,t,n)=>new Promise(((i,o)=>{if("number"!==typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void i(e);const s=setTimeout((()=>{if("function"===typeof n){try{i(n())}catch(l){o(l)}return}const r="string"===typeof n?n:"Promise timed out after ".concat(t," milliseconds"),s=n instanceof Error?n:new a(r);"function"===typeof e.cancel&&e.cancel(),o(s)}),t);r(e.then(i,o),(()=>{clearTimeout(s)}))}));e.exports=i,e.exports.default=i,e.exports.TimeoutError=a},2730:(e,t,n)=>{"use strict";var r=n(5043),a=n(8853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=v.hasOwnProperty(t)?v[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),k=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),P=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var j=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var L,z=Object.assign;function D(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function U(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s]){var l="\n"+a[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?D(e):""}function B(e){switch(e.tag){case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function Z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case k:return"Portal";case O:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case P:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:Z(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return Z(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function G(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){G(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ie(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ge=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,xe=null,Se=null;function Oe(e){if(e=ba(e)){if("function"!==typeof ke)throw Error(i(280));var t=e.stateNode;t&&(t=_a(t),ke(e.stateNode,e.type,t))}}function Ee(e){xe?Se?Se.push(e):Se=[e]:xe=e}function Pe(){if(xe){var e=xe,t=Se;if(Se=xe=null,Oe(e),t)for(e=0;e<t.length;e++)Oe(t[e])}}function Te(e,t){return e(t)}function Ce(){}var Ae=!1;function Ie(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Te(e,t,n)}finally{Ae=!1,(null!==xe||null!==Se)&&(Ce(),Pe())}}function Ne(e,t){var n=e.stateNode;if(null===n)return null;var r=_a(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var je=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){je=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){je=!1}function Me(e,t,n,r,a,i,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,ze=null,De=!1,Fe=null,Ue={onError:function(e){Le=!0,ze=e}};function Be(e,t,n,r,a,i,o,s,l){Le=!1,ze=null,Me.apply(Ue,arguments)}function Ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ze(e)!==e)throw Error(i(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ze(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return He(a),e;if(o===r)return He(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,l=a.child;l;){if(l===n){s=!0,n=a,r=o;break}if(l===r){s=!0,r=a,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=a;break}if(l===r){s=!0,r=o,n=a;break}l=l.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var $e=a.unstable_scheduleCallback,Ke=a.unstable_cancelCallback,Je=a.unstable_shouldYield,Ye=a.unstable_requestPaint,Ge=a.unstable_now,Qe=a.unstable_getCurrentPriorityLevel,Xe=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~a;0!==s?r=dt(s):0!==(i&=o)&&(r=dt(i))}else 0!==(o=n&~a)?r=dt(o):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(i=t&-t)||16===a&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-ot(t)),r|=e[n],t&=~a;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,kt,xt,St,Ot,Et=!1,Pt=[],Tt=null,Ct=null,At=null,It=new Map,Nt=new Map,jt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(t.pointerId)}}function Lt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function zt(e){var t=ya(e.target);if(null!==t){var n=Ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Ot(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Dt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ft(e,t,n){Dt(e)&&n.delete(t)}function Ut(){Et=!1,null!==Tt&&Dt(Tt)&&(Tt=null),null!==Ct&&Dt(Ct)&&(Ct=null),null!==At&&Dt(At)&&(At=null),It.forEach(Ft),Nt.forEach(Ft)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Ut)))}function Zt(e){function t(t){return Bt(t,e)}if(0<Pt.length){Bt(Pt[0],e);for(var n=1;n<Pt.length;n++){var r=Pt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Bt(Tt,e),null!==Ct&&Bt(Ct,e),null!==At&&Bt(At,e),It.forEach(t),Nt.forEach(t),n=0;n<jt.length;n++)(r=jt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<jt.length&&null===(n=jt[0]).blockedOn;)zt(n),null===n.blockedOn&&jt.shift()}var Vt=w.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var a=bt,i=Vt.transition;Vt.transition=null;try{bt=1,$t(e,t,n,r)}finally{bt=a,Vt.transition=i}}function qt(e,t,n,r){var a=bt,i=Vt.transition;Vt.transition=null;try{bt=4,$t(e,t,n,r)}finally{bt=a,Vt.transition=i}}function $t(e,t,n,r){if(Ht){var a=Jt(e,t,n,r);if(null===a)Hr(e,t,r,Kt,n),Mt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,r,a),!0;case"dragenter":return Ct=Lt(Ct,e,t,n,r,a),!0;case"mouseover":return At=Lt(At,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return It.set(i,Lt(It.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Nt.set(i,Lt(Nt.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==a;){var i=ba(a);if(null!==i&&_t(i),null===(i=Jt(e,t,n,r))&&Hr(e,t,r,Kt,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Kt=null;function Jt(e,t,n,r){if(Kt=null,null!==(e=ya(e=_e(r))))if(null===(t=Ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Xe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Gt=null,Qt=null,Xt=null;function en(){if(Xt)return Xt;var e,t,n=Qt,r=n.length,a="value"in Gt?Gt.value:Gt.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return Xt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=z({},cn,{view:0,detail:0}),hn=an(dn),fn=z({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:On,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(fn),mn=an(z({},fn,{dataTransfer:0})),vn=an(z({},dn,{relatedTarget:0})),gn=an(z({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=z({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),wn=an(z({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function On(){return Sn}var En=z({},dn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:On,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Pn=an(En),Tn=an(z({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=an(z({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:On})),An=an(z({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=z({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=an(In),jn=[9,13,27,32],Rn=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Mn,zn=u&&(!Rn||Mn&&8<Mn&&11>=Mn),Dn=String.fromCharCode(32),Fn=!1;function Un(e,t){switch(e){case"keyup":return-1!==jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Zn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ee(r),0<(t=qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,$n=null;function Kn(e){Dr(e,0)}function Jn(e){if($(wa(e)))return e}function Yn(e,t){if("change"===e)return t}var Gn=!1;if(u){var Qn;if(u){var Xn="oninput"in document;if(!Xn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Xn="function"===typeof er.oninput}Qn=Xn}else Qn=!1;Gn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),$n=qn=null)}function nr(e){if("value"===e.propertyName&&Jn($n)){var t=[];Wn(t,$n,e,_e(e)),Ie(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),$n=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn($n)}function ir(e,t){if("click"===e)return Jn(t)}function or(e,t){if("input"===e||"change"===e)return Jn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!d.call(t,a)||!sr(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=ur(n,i);var o=ur(n,r);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,vr=null,gr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==vr||vr!==K(r)||("selectionStart"in(r=vr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=qr(gr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},xr={},Sr={};function Or(e){if(xr[e])return xr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return xr[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Er=Or("animationend"),Pr=Or("animationiteration"),Tr=Or("animationstart"),Cr=Or("transitionend"),Ar=new Map,Ir="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){Ar.set(e,t),l(t,[e])}for(var jr=0;jr<Ir.length;jr++){var Rr=Ir[jr];Nr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Nr(Er,"onAnimationEnd"),Nr(Pr,"onAnimationIteration"),Nr(Tr,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function zr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,s,l,c){if(Be.apply(this,arguments),Le){if(!Le)throw Error(i(198));var u=ze;Le=!1,ze=null,De||(De=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Dr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;zr(a,s,c),i=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,c=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;zr(a,s,c),i=l}}}if(De)throw e=Fe,De=!1,Fe=null,e}function Fr(e,t){var n=t[ma];void 0===n&&(n=t[ma]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Ur("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Yt(t)){case 1:var a=Wt;break;case 4:a=qt;break;default:a=$t}n=a.bind(null,t,n,e),a=void 0,!je||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=ya(s)))return;if(5===(l=o.tag)||6===l){r=i=o;continue e}s=s.parentNode}}r=r.return}Ie((function(){var r=i,a=_e(n),o=[];e:{var s=Ar.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Pn;break;case"focusin":c="focus",l=vn;break;case"focusout":c="blur",l=vn;break;case"beforeblur":case"afterblur":l=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Cn;break;case Er:case Pr:case Tr:l=gn;break;case Cr:l=An;break;case"scroll":l=hn;break;case"wheel":l=Nn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Ne(p,h))&&u.push(Wr(p,m,f)))),d)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,a),o.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!ya(c)&&!c[pa])&&(l||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ya(c):null)&&(c!==(d=Ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?s:wa(l),f=null==c?s:wa(c),(s=new u(m,p+"leave",l,n,a)).target=d,s.relatedTarget=f,m=null,ya(a)===r&&((u=new u(h,p+"enter",c,n,a)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=$r(f))p++;for(f=0,m=h;m;m=$r(m))f++;for(;0<p-f;)u=$r(u),p--;for(;0<f-p;)h=$r(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=$r(u),h=$r(h)}u=null}else u=null;null!==l&&Kr(o,s,l,u,!1),null!==c&&null!==d&&Kr(o,d,c,u,!0)}if("select"===(l=(s=r?wa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var v=Yn;else if(Hn(s))if(Gn)v=or;else{v=ar;var g=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=ir);switch(v&&(v=v(e,r))?Wn(o,v,n,a):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?wa(r):window,e){case"focusin":(Hn(g)||"true"===g.contentEditable)&&(vr=g,gr=r,yr=null);break;case"focusout":yr=gr=vr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(o,n,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(o,n,a)}var y;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Zn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(zn&&"ko"!==n.locale&&(Zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Zn&&(y=en()):(Qt="value"in(Gt=a)?Gt.value:Gt.textContent,Zn=!0)),0<(g=qr(r,b)).length&&(b=new wn(b,e,null,n,a),o.push({event:b,listeners:g}),y?b.data=y:null!==(y=Bn(n))&&(b.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Dn);case"textInput":return(e=t.data)===Dn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Zn)return"compositionend"===e||!Rn&&Un(e,t)?(e=en(),Xt=Qt=Gt=null,Zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(a=new wn("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=y))}Dr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Ne(e,n))&&r.unshift(Wr(e,i,a)),null!=(i=Ne(e,t))&&r.push(Wr(e,i,a))),e=e.return}return r}function $r(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,a?null!=(l=Ne(n,i))&&o.unshift(Wr(n,l,s)):a||null!=(l=Ne(n,i))&&o.push(Wr(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Jr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Gr(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace(Yr,"")}function Qr(e,t,n){if(t=Gr(t),Gr(e)!==t&&n)throw Error(i(425))}function Xr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,oa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(sa)}:ra;function sa(e){setTimeout((function(){throw e}))}function la(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Zt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ua(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),ha="__reactFiber$"+da,fa="__reactProps$"+da,pa="__reactContainer$"+da,ma="__reactEvents$"+da,va="__reactListeners$"+da,ga="__reactHandles$"+da;function ya(e){var t=e[ha];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[ha]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ua(e);null!==e;){if(n=e[ha])return n;e=ua(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[ha]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function _a(e){return e[fa]||null}var ka=[],xa=-1;function Sa(e){return{current:e}}function Oa(e){0>xa||(e.current=ka[xa],ka[xa]=null,xa--)}function Ea(e,t){xa++,ka[xa]=e.current,e.current=t}var Pa={},Ta=Sa(Pa),Ca=Sa(!1),Aa=Pa;function Ia(e,t){var n=e.type.contextTypes;if(!n)return Pa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Na(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ja(){Oa(Ca),Oa(Ta)}function Ra(e,t,n){if(Ta.current!==Pa)throw Error(i(168));Ea(Ta,t),Ea(Ca,n)}function Ma(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(i(108,V(e)||"Unknown",a));return z({},n,r)}function La(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pa,Aa=Ta.current,Ea(Ta,e),Ea(Ca,Ca.current),!0}function za(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Ma(e,t,Aa),r.__reactInternalMemoizedMergedChildContext=e,Oa(Ca),Oa(Ta),Ea(Ta,e)):Oa(Ca),Ea(Ca,n)}var Da=null,Fa=!1,Ua=!1;function Ba(e){null===Da?Da=[e]:Da.push(e)}function Za(){if(!Ua&&null!==Da){Ua=!0;var e=0,t=bt;try{var n=Da;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Da=null,Fa=!1}catch(a){throw null!==Da&&(Da=Da.slice(e+1)),$e(Xe,Za),a}finally{bt=t,Ua=!1}}return null}var Va=[],Ha=0,Wa=null,qa=0,$a=[],Ka=0,Ja=null,Ya=1,Ga="";function Qa(e,t){Va[Ha++]=qa,Va[Ha++]=Wa,Wa=e,qa=t}function Xa(e,t,n){$a[Ka++]=Ya,$a[Ka++]=Ga,$a[Ka++]=Ja,Ja=e;var r=Ya;e=Ga;var a=32-ot(r)-1;r&=~(1<<a),n+=1;var i=32-ot(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Ya=1<<32-ot(t)+a|n<<a|r,Ga=i+e}else Ya=1<<i|n<<a|r,Ga=e}function ei(e){null!==e.return&&(Qa(e,1),Xa(e,1,0))}function ti(e){for(;e===Wa;)Wa=Va[--Ha],Va[Ha]=null,qa=Va[--Ha],Va[Ha]=null;for(;e===Ja;)Ja=$a[--Ka],$a[Ka]=null,Ga=$a[--Ka],$a[Ka]=null,Ya=$a[--Ka],$a[Ka]=null}var ni=null,ri=null,ai=!1,ii=null;function oi(e,t){var n=Nc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function si(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ja?{id:Ya,overflow:Ga}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Nc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(ai){var t=ri;if(t){var n=t;if(!si(e,t)){if(li(e))throw Error(i(418));t=ca(n.nextSibling);var r=ni;t&&si(e,t)?oi(r,n):(e.flags=-4097&e.flags|2,ai=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,ai=!1,ni=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function di(e){if(e!==ni)return!1;if(!ai)return ui(e),ai=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw hi(),Error(i(418));for(;t;)oi(e,t),t=ca(t.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?ca(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ri;e;)e=ca(e.nextSibling)}function fi(){ri=ni=null,ai=!1}function pi(e){null===ii?ii=[e]:ii.push(e)}var mi=w.ReactCurrentBatchConfig;function vi(e,t){if(e&&e.defaultProps){for(var n in t=z({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var gi=Sa(null),yi=null,bi=null,wi=null;function _i(){wi=bi=yi=null}function ki(e){var t=gi.current;Oa(gi),e._currentValue=t}function xi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Si(e,t){yi=e,wi=bi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ws=!0),e.firstContext=null)}function Oi(e){var t=e._currentValue;if(wi!==e)if(e={context:e,memoizedValue:t,next:null},null===bi){if(null===yi)throw Error(i(308));bi=e,yi.dependencies={lanes:0,firstContext:e}}else bi=bi.next=e;return t}var Ei=null;function Pi(e){null===Ei?Ei=[e]:Ei.push(e)}function Ti(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Pi(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ci(e,r)}function Ci(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ai=!1;function Ii(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ni(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ji(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ri(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Ci(e,n)}return null===(a=r.interleaved)?(t.next=t,Pi(r)):(t.next=a.next,a.next=t),r.interleaved=t,Ci(e,n)}function Mi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Li(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zi(e,t,n,r){var a=e.updateQueue;Ai=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?i=c:o.next=c,o=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=a.baseState;for(o=0,u=c=l=null,s=i;;){var h=s.lane,f=s.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=z({},d,h);break e;case 2:Ai=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,o|=h;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(h=s).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);zl|=o,e.lanes=o,e.memoizedState=d}}function Di(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var Fi=(new r.Component).refs;function Ui(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:z({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bi={isMounted:function(e){return!!(e=e._reactInternals)&&Ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),a=nc(e),i=ji(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ri(e,i,a))&&(rc(t,e,a,r),Mi(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),a=nc(e),i=ji(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ri(e,i,a))&&(rc(t,e,a,r),Mi(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),a=ji(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Ri(e,a,r))&&(rc(t,e,r,n),Mi(t,e,r))}};function Zi(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(a,i))}function Vi(e,t,n){var r=!1,a=Pa,i=t.contextType;return"object"===typeof i&&null!==i?i=Oi(i):(a=Na(t)?Aa:Ta.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ia(e,a):Pa),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Hi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bi.enqueueReplaceState(t,t.state,null)}function Wi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=Fi,Ii(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=Oi(i):(i=Na(t)?Aa:Ta.current,a.context=Ia(e,i)),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(Ui(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&Bi.enqueueReplaceState(a,a.state,null),zi(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function qi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=a.refs;t===Fi&&(t=a.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function $i(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ki(e){return(0,e._init)(e._payload)}function Ji(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Dc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===x?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===N&&Ki(i)===t.type)?((r=a(t,n.props)).ref=qi(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=qi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Dc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=qi(e,null,t),n.return=e,n;case k:return(t=Fc(t,e.mode,n)).return=e,t;case N:return h(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Lc(t,e.mode,n,null)).return=e,t;$i(e,t)}return null}function f(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===a?c(e,t,n,r):null;case k:return n.key===a?u(e,t,n,r):null;case N:return f(e,t,(a=n._init)(n._payload),r)}if(te(n)||M(n))return null!==a?null:d(e,t,n,r,null);$i(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case N:return p(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||M(r))return d(t,e=e.get(n)||null,r,a,null);$i(t,r)}return null}function m(a,i,s,l){for(var c=null,u=null,d=i,m=i=0,v=null;null!==d&&m<s.length;m++){d.index>m?(v=d,d=null):v=d.sibling;var g=f(a,d,s[m],l);if(null===g){null===d&&(d=v);break}e&&d&&null===g.alternate&&t(a,d),i=o(g,i,m),null===u?c=g:u.sibling=g,u=g,d=v}if(m===s.length)return n(a,d),ai&&Qa(a,m),c;if(null===d){for(;m<s.length;m++)null!==(d=h(a,s[m],l))&&(i=o(d,i,m),null===u?c=d:u.sibling=d,u=d);return ai&&Qa(a,m),c}for(d=r(a,d);m<s.length;m++)null!==(v=p(d,a,m,s[m],l))&&(e&&null!==v.alternate&&d.delete(null===v.key?m:v.key),i=o(v,i,m),null===u?c=v:u.sibling=v,u=v);return e&&d.forEach((function(e){return t(a,e)})),ai&&Qa(a,m),c}function v(a,s,l,c){var u=M(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,m=s,v=s=0,g=null,y=l.next();null!==m&&!y.done;v++,y=l.next()){m.index>v?(g=m,m=null):g=m.sibling;var b=f(a,m,y.value,c);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(a,m),s=o(b,s,v),null===d?u=b:d.sibling=b,d=b,m=g}if(y.done)return n(a,m),ai&&Qa(a,v),u;if(null===m){for(;!y.done;v++,y=l.next())null!==(y=h(a,y.value,c))&&(s=o(y,s,v),null===d?u=y:d.sibling=y,d=y);return ai&&Qa(a,v),u}for(m=r(a,m);!y.done;v++,y=l.next())null!==(y=p(m,a,v,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),s=o(y,s,v),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(a,e)})),ai&&Qa(a,v),u}return function e(r,i,o,l){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,u=i;null!==u;){if(u.key===c){if((c=o.type)===x){if(7===u.tag){n(r,u.sibling),(i=a(u,o.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===N&&Ki(c)===u.type){n(r,u.sibling),(i=a(u,o.props)).ref=qi(r,u,o),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===x?((i=Lc(o.props.children,r.mode,l,o.key)).return=r,r=i):((l=Mc(o.type,o.key,o.props,null,r.mode,l)).ref=qi(r,i,o),l.return=r,r=l)}return s(r);case k:e:{for(u=o.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(r,i.sibling),(i=a(i,o.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Fc(o,r.mode,l)).return=r,r=i}return s(r);case N:return e(r,i,(u=o._init)(o._payload),l)}if(te(o))return m(r,i,o,l);if(M(o))return v(r,i,o,l);$i(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==i&&6===i.tag?(n(r,i.sibling),(i=a(i,o)).return=r,r=i):(n(r,i),(i=Dc(o,r.mode,l)).return=r,r=i),s(r)):n(r,i)}}var Yi=Ji(!0),Gi=Ji(!1),Qi={},Xi=Sa(Qi),eo=Sa(Qi),to=Sa(Qi);function no(e){if(e===Qi)throw Error(i(174));return e}function ro(e,t){switch(Ea(to,t),Ea(eo,e),Ea(Xi,Qi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Oa(Xi),Ea(Xi,t)}function ao(){Oa(Xi),Oa(eo),Oa(to)}function io(e){no(to.current);var t=no(Xi.current),n=le(t,e.type);t!==n&&(Ea(eo,e),Ea(Xi,n))}function oo(e){eo.current===e&&(Oa(Xi),Oa(eo))}var so=Sa(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=w.ReactCurrentDispatcher,fo=w.ReactCurrentBatchConfig,po=0,mo=null,vo=null,go=null,yo=!1,bo=!1,wo=0,_o=0;function ko(){throw Error(i(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function So(e,t,n,r,a,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:ls,e=n(r,a),bo){o=0;do{if(bo=!1,wo=0,25<=o)throw Error(i(301));o+=1,go=vo=null,t.updateQueue=null,ho.current=cs,e=n(r,a)}while(bo)}if(ho.current=os,t=null!==vo&&null!==vo.next,po=0,go=vo=mo=null,yo=!1,t)throw Error(i(300));return e}function Oo(){var e=0!==wo;return wo=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?mo.memoizedState=go=e:go=go.next=e,go}function Po(){if(null===vo){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=vo.next;var t=null===go?mo.memoizedState:go.next;if(null!==t)go=t,vo=e;else{if(null===e)throw Error(i(310));e={memoizedState:(vo=e).memoizedState,baseState:vo.baseState,baseQueue:vo.baseQueue,queue:vo.queue,next:null},null===go?mo.memoizedState=go=e:go=go.next=e}return go}function To(e,t){return"function"===typeof t?t(e):t}function Co(e){var t=Po(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=vo,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}r.baseQueue=a=o,n.pending=null}if(null!==a){o=a.next,r=r.baseState;var l=s=null,c=null,u=o;do{var d=u.lane;if((po&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,s=r):c=c.next=h,mo.lanes|=d,zl|=d}u=u.next}while(null!==u&&u!==o);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(ws=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{o=a.lane,mo.lanes|=o,zl|=o,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=Po(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);sr(o,t.memoizedState)||(ws=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Io(){}function No(e,t){var n=mo,r=Po(),a=t(),o=!sr(r.memoizedState,a);if(o&&(r.memoizedState=a,ws=!0),r=r.queue,Ho(Mo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,Fo(9,Ro.bind(null,n,r,a,t),void 0,null),null===Al)throw Error(i(349));0!==(30&po)||jo(n,t,a)}return a}function jo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ro(e,t,n,r){t.value=n,t.getSnapshot=r,Lo(t)&&zo(e)}function Mo(e,t,n){return n((function(){Lo(t)&&zo(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function zo(e){var t=Ci(e,1);null!==t&&rc(t,e,1,-1)}function Do(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,mo,e),[t.memoizedState,e]}function Fo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Uo(){return Po().memoizedState}function Bo(e,t,n,r){var a=Eo();mo.flags|=e,a.memoizedState=Fo(1|t,n,void 0,void 0===r?null:r)}function Zo(e,t,n,r){var a=Po();r=void 0===r?null:r;var i=void 0;if(null!==vo){var o=vo.memoizedState;if(i=o.destroy,null!==r&&xo(r,o.deps))return void(a.memoizedState=Fo(t,n,i,r))}mo.flags|=e,a.memoizedState=Fo(1|t,n,i,r)}function Vo(e,t){return Bo(8390656,8,e,t)}function Ho(e,t){return Zo(2048,8,e,t)}function Wo(e,t){return Zo(4,2,e,t)}function qo(e,t){return Zo(4,4,e,t)}function $o(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ko(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Zo(4,4,$o.bind(null,t,e),n)}function Jo(){}function Yo(e,t){var n=Po();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Go(e,t){var n=Po();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Qo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ws=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),mo.lanes|=n,zl|=n,e.baseState=!0),t)}function Xo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{bt=n,fo.transition=r}}function es(){return Po().memoizedState}function ts(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))as(t,n);else if(null!==(n=Ti(e,t,n,r))){rc(n,e,r,tc()),is(n,t,r)}}function ns(e,t,n){var r=nc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))as(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,sr(s,o)){var l=t.interleaved;return null===l?(a.next=a,Pi(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Ti(e,t,a,r))&&(rc(n,e,r,a=tc()),is(n,t,r))}}function rs(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function as(e,t){bo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function is(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var os={readContext:Oi,useCallback:ko,useContext:ko,useEffect:ko,useImperativeHandle:ko,useInsertionEffect:ko,useLayoutEffect:ko,useMemo:ko,useReducer:ko,useRef:ko,useState:ko,useDebugValue:ko,useDeferredValue:ko,useTransition:ko,useMutableSource:ko,useSyncExternalStore:ko,useId:ko,unstable_isNewReconciler:!1},ss={readContext:Oi,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Oi,useEffect:Vo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,$o.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:Do,useDebugValue:Jo,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=Do(!1),t=e[0];return e=Xo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,a=Eo();if(ai){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Al)throw Error(i(349));0!==(30&po)||jo(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Vo(Mo.bind(null,r,o,e),[e]),r.flags|=2048,Fo(9,Ro.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Al.identifierPrefix;if(ai){var n=Ga;t=":"+t+"R"+(n=(Ya&~(1<<32-ot(Ya)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:Oi,useCallback:Yo,useContext:Oi,useEffect:Ho,useImperativeHandle:Ko,useInsertionEffect:Wo,useLayoutEffect:qo,useMemo:Go,useReducer:Co,useRef:Uo,useState:function(){return Co(To)},useDebugValue:Jo,useDeferredValue:function(e){return Qo(Po(),vo.memoizedState,e)},useTransition:function(){return[Co(To)[0],Po().memoizedState]},useMutableSource:Io,useSyncExternalStore:No,useId:es,unstable_isNewReconciler:!1},cs={readContext:Oi,useCallback:Yo,useContext:Oi,useEffect:Ho,useImperativeHandle:Ko,useInsertionEffect:Wo,useLayoutEffect:qo,useMemo:Go,useReducer:Ao,useRef:Uo,useState:function(){return Ao(To)},useDebugValue:Jo,useDeferredValue:function(e){var t=Po();return null===vo?t.memoizedState=e:Qo(t,vo.memoizedState,e)},useTransition:function(){return[Ao(To)[0],Po().memoizedState]},useMutableSource:Io,useSyncExternalStore:No,useId:es,unstable_isNewReconciler:!1};function us(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=ji(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,ql=r),hs(0,t)},n}function ms(e,t,n){(n=ji(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){hs(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===$l?$l=new Set([this]):$l.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function vs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ji(-1,1)).tag=2,Ri(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var bs=w.ReactCurrentOwner,ws=!1;function _s(e,t,n,r){t.child=null===e?Gi(t,null,n,r):Yi(t,e.child,n,r)}function ks(e,t,n,r,a){n=n.render;var i=t.ref;return Si(t,a),r=So(e,t,n,r,i,a),n=Oo(),null===e||ws?(ai&&n&&ei(t),t.flags|=1,_s(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ws(e,t,a))}function xs(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||jc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ss(e,t,i,r,a))}if(i=e.child,0===(e.lanes&a)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ws(e,t,a)}return t.flags|=1,(e=Rc(i,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(ws=!1,t.pendingProps=r=i,0===(e.lanes&a))return t.lanes=e.lanes,Ws(e,t,a);0!==(131072&e.flags)&&(ws=!0)}}return Ps(e,t,n,r,a)}function Os(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ea(Rl,jl),jl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ea(Rl,jl),jl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ea(Rl,jl),jl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ea(Rl,jl),jl|=r;return _s(e,t,a,n),t.child}function Es(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ps(e,t,n,r,a){var i=Na(n)?Aa:Ta.current;return i=Ia(t,i),Si(t,a),n=So(e,t,n,r,i,a),r=Oo(),null===e||ws?(ai&&r&&ei(t),t.flags|=1,_s(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ws(e,t,a))}function Ts(e,t,n,r,a){if(Na(n)){var i=!0;La(t)}else i=!1;if(Si(t,a),null===t.stateNode)Hs(e,t),Vi(t,n,r),Wi(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Oi(c):c=Ia(t,c=Na(n)?Aa:Ta.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||l!==c)&&Hi(t,o,r,c),Ai=!1;var h=t.memoizedState;o.state=h,zi(t,r,o,a),l=t.memoizedState,s!==r||h!==l||Ca.current||Ai?("function"===typeof u&&(Ui(t,n,u,r),l=t.memoizedState),(s=Ai||Zi(t,n,s,r,h,l,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ni(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:vi(t.type,s),o.props=c,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Oi(l):l=Ia(t,l=Na(n)?Aa:Ta.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||h!==l)&&Hi(t,o,r,l),Ai=!1,h=t.memoizedState,o.state=h,zi(t,r,o,a);var p=t.memoizedState;s!==d||h!==p||Ca.current||Ai?("function"===typeof f&&(Ui(t,n,f,r),p=t.memoizedState),(c=Ai||Zi(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Cs(e,t,n,r,i,a)}function Cs(e,t,n,r,a,i){Es(e,t);var o=0!==(128&t.flags);if(!r&&!o)return a&&za(t,n,!1),Ws(e,t,i);r=t.stateNode,bs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Yi(t,e.child,null,i),t.child=Yi(t,null,s,i)):_s(e,t,s,i),t.memoizedState=r.state,a&&za(t,n,!0),t.child}function As(e){var t=e.stateNode;t.pendingContext?Ra(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ra(0,t.context,!1),ro(e,t.containerInfo)}function Is(e,t,n,r,a){return fi(),pi(a),t.flags|=256,_s(e,t,n,r),t.child}var Ns,js,Rs,Ms,Ls={dehydrated:null,treeContext:null,retryLane:0};function zs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ds(e,t,n){var r,a=t.pendingProps,o=so.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ea(so,1&o),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,s?(a=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=zc(l,a,0,null),e=Lc(e,a,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=zs(n),t.memoizedState=Ls,e):Fs(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,a,o,s){if(n)return 256&t.flags?(t.flags&=-257,Us(e,t,s,r=ds(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=zc({mode:"visible",children:r.children},a,0,null),(o=Lc(o,a,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Yi(t,e.child,null,s),t.child.memoizedState=zs(s),t.memoizedState=Ls,o);if(0===(1&t.mode))return Us(e,t,s,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,Us(e,t,s,r=ds(o=Error(i(419)),r,void 0))}if(l=0!==(s&e.childLanes),ws||l){if(null!==(r=Al)){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|s))?0:a)&&a!==o.retryLane&&(o.retryLane=a,Ci(e,a),rc(r,e,a,-1))}return vc(),Us(e,t,s,r=ds(Error(i(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,ri=ca(a.nextSibling),ni=t,ai=!0,ii=null,null!==e&&($a[Ka++]=Ya,$a[Ka++]=Ga,$a[Ka++]=Ja,Ya=e.id,Ga=e.overflow,Ja=t),t=Fs(t,r.children),t.flags|=4096,t)}(e,t,l,a,r,o,n);if(s){s=a.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==o?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Rc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Rc(r,s):(s=Lc(s,l,n,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,l=null===(l=e.child.memoizedState)?zs(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,a}return e=(s=e.child).sibling,a=Rc(s,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Fs(e,t){return(t=zc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){return null!==r&&pi(r),Yi(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xi(e.return,t,n)}function Zs(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Vs(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(_s(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,n,t);else if(19===e.tag)Bs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ea(so,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Zs(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===lo(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Zs(t,!0,n,null,i);break;case"together":Zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),zl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qs(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $s(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ks(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $s(t),null;case 1:case 17:return Na(t.type)&&ja(),$s(t),null;case 3:return r=t.stateNode,ao(),Oa(Ca),Oa(Ta),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(sc(ii),ii=null))),js(e,t),$s(t),null;case 5:oo(t);var a=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Rs(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return $s(t),null}if(e=no(Xi.current),di(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ha]=t,r[fa]=o,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(a=0;a<Mr.length;a++)Fr(Mr[a],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":Y(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":ae(r,o),Fr("invalid",r)}for(var l in ye(n,o),a=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Qr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Qr(r.textContent,c,e),a=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":q(r),X(r,o,!0);break;case"textarea":q(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Xr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ha]=t,e[fa]=r,Ns(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),a=r;break;case"iframe":case"object":case"embed":Fr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Mr.length;a++)Fr(Mr[a],e);a=r;break;case"source":Fr("error",e),a=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),a=r;break;case"details":Fr("toggle",e),a=r;break;case"input":Y(e,r),a=J(e,r),Fr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=z({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Fr("invalid",e)}for(o in ye(n,a),c=a)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ve(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Fr("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":q(e),X(e,r,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Xr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return $s(t),null;case 6:if(e&&null!=t.stateNode)Ms(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=no(to.current),no(Xi.current),di(t)){if(r=t.stateNode,n=t.memoizedProps,r[ha]=t,(o=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ha]=t,t.stateNode=r}return $s(t),null;case 13:if(Oa(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ai&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))hi(),fi(),t.flags|=98560,o=!1;else if(o=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(i(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(i(317));o[ha]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;$s(t),o=!1}else null!==ii&&(sc(ii),ii=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Ml&&(Ml=3):vc())),null!==t.updateQueue&&(t.flags|=4),$s(t),null);case 4:return ao(),js(e,t),null===e&&Zr(t.stateNode.containerInfo),$s(t),null;case 10:return ki(t.type._context),$s(t),null;case 19:if(Oa(so),null===(o=t.memoizedState))return $s(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)qs(o,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,qs(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ea(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Ge()>Vl&&(t.flags|=128,r=!0,qs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ai)return $s(t),null}else 2*Ge()-o.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,qs(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ge(),t.sibling=null,n=so.current,Ea(so,r?1&n|2:1&n),t):($s(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&jl)&&($s(t),6&t.subtreeFlags&&(t.flags|=8192)):$s(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Js(e,t){switch(ti(t),t.tag){case 1:return Na(t.type)&&ja(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ao(),Oa(Ca),Oa(Ta),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Oa(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Oa(so),null;case 4:return ao(),null;case 10:return ki(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ns=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},js=function(){},Rs=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,no(Xi.current);var i,o=null;switch(n){case"input":a=J(e,a),r=J(e,r),o=[];break;case"select":a=z({},a,{value:void 0}),r=z({},r,{value:void 0}),o=[];break;case"textarea":a=re(e,a),r=re(e,r),o=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Xr)}for(u in ye(n,r),n=null,a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var l=a[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=a?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ms=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ys=!1,Gs=!1,Qs="function"===typeof WeakSet?WeakSet:Set,Xs=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Oc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Oc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&tl(t,n,i)}a=a.next}while(a!==r)}}function al(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[fa],delete t[ma],delete t[va],delete t[ga])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var dl=null,hl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,n)}catch(s){}switch(n.tag){case 5:Gs||el(n,t);case 6:var r=dl,a=hl;dl=null,fl(e,t,n),hl=a,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?la(e.parentNode,n):1===e.nodeType&&la(e,n),Zt(e)):la(dl,n.stateNode));break;case 4:r=dl,a=hl,dl=n.stateNode.containerInfo,hl=!0,fl(e,t,n),dl=r,hl=a;break;case 0:case 11:case 14:case 15:if(!Gs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&tl(n,t,o),a=a.next}while(a!==r)}fl(e,t,n);break;case 1:if(!Gs&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Oc(n,t,s)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Gs=(r=Gs)||null!==n.memoizedState,fl(e,t,n),Gs=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qs),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(i(160));pl(o,s,a),dl=null,hl=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(u){Oc(a,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vl(t,e),yl(e),4&r){try{rl(3,e,e.return),al(3,e)}catch(v){Oc(e,e.return,v)}try{rl(5,e,e.return)}catch(v){Oc(e,e.return,v)}}break;case 1:vl(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(vl(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(v){Oc(e,e.return,v)}}if(4&r&&null!=(a=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&G(a,o),be(l,s);var u=be(l,o);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];"style"===d?ve(a,h):"dangerouslySetInnerHTML"===d?de(a,h):"children"===d?he(a,h):b(a,d,h,u)}switch(l){case"input":Q(a,o);break;case"textarea":ie(a,o);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(a,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(a,!!o.multiple,o.defaultValue,!0):ne(a,!!o.multiple,o.multiple?[]:"",!1))}a[fa]=o}catch(v){Oc(e,e.return,v)}}break;case 6:if(vl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(i(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(v){Oc(e,e.return,v)}}break;case 3:if(vl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Zt(t.containerInfo)}catch(v){Oc(e,e.return,v)}break;case 4:default:vl(t,e),yl(e);break;case 13:vl(t,e),yl(e),8192&(a=e.child).flags&&(o=null!==a.memoizedState,a.stateNode.isHidden=o,!o||null!==a.alternate&&null!==a.alternate.memoizedState||(Zl=Ge())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Gs=(u=Gs)||d,vl(t,e),Gs=u):vl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xs=e,d=e.child;null!==d;){for(h=Xs=d;null!==Xs;){switch(p=(f=Xs).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){Oc(r,n,v)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){kl(h);continue}}null!==p?(p.return=f,Xs=p):kl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{a=h.stateNode,u?"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(v){Oc(e,e.return,v)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){Oc(e,e.return,v)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vl(t,e),yl(e),4&r&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(he(a,""),r.flags&=-33),ul(e,ll(e),a);break;case 3:case 4:var o=r.stateNode.containerInfo;cl(e,ll(e),o);break;default:throw Error(i(161))}}catch(s){Oc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Xs=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Xs;){var a=Xs,i=a.child;if(22===a.tag&&r){var o=null!==a.memoizedState||Ys;if(!o){var s=a.alternate,l=null!==s&&null!==s.memoizedState||Gs;s=Ys;var c=Gs;if(Ys=o,(Gs=l)&&!c)for(Xs=a;null!==Xs;)l=(o=Xs).child,22===o.tag&&null!==o.memoizedState?xl(a):null!==l?(l.return=o,Xs=l):xl(a);for(;null!==i;)Xs=i,wl(i,t,n),i=i.sibling;Xs=a,Ys=s,Gs=c}_l(e)}else 0!==(8772&a.subtreeFlags)&&null!==i?(i.return=a,Xs=i):_l(e)}}function _l(e){for(;null!==Xs;){var t=Xs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Gs||al(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Gs)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:vi(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Di(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Di(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Zt(h)}}}break;default:throw Error(i(163))}Gs||512&t.flags&&il(t)}catch(f){Oc(t,t.return,f)}}if(t===e){Xs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xs=n;break}Xs=t.return}}function kl(e){for(;null!==Xs;){var t=Xs;if(t===e){Xs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xs=n;break}Xs=t.return}}function xl(e){for(;null!==Xs;){var t=Xs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{al(4,t)}catch(l){Oc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(l){Oc(t,a,l)}}var i=t.return;try{il(t)}catch(l){Oc(t,i,l)}break;case 5:var o=t.return;try{il(t)}catch(l){Oc(t,o,l)}}}catch(l){Oc(t,t.return,l)}if(t===e){Xs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Xs=s;break}Xs=t.return}}var Sl,Ol=Math.ceil,El=w.ReactCurrentDispatcher,Pl=w.ReactCurrentOwner,Tl=w.ReactCurrentBatchConfig,Cl=0,Al=null,Il=null,Nl=0,jl=0,Rl=Sa(0),Ml=0,Ll=null,zl=0,Dl=0,Fl=0,Ul=null,Bl=null,Zl=0,Vl=1/0,Hl=null,Wl=!1,ql=null,$l=null,Kl=!1,Jl=null,Yl=0,Gl=0,Ql=null,Xl=-1,ec=0;function tc(){return 0!==(6&Cl)?Ge():-1!==Xl?Xl:Xl=Ge()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Nl?Nl&-Nl:null!==mi.transition?(0===ec&&(ec=mt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Gl)throw Gl=0,Ql=null,Error(i(185));gt(e,n,r),0!==(2&Cl)&&e===Al||(e===Al&&(0===(2&Cl)&&(Dl|=n),4===Ml&&lc(e,Nl)),ac(e,r),1===n&&0===Cl&&0===(1&t.mode)&&(Vl=Ge()+500,Fa&&Za()))}function ac(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),s=1<<o,l=a[o];-1===l?0!==(s&n)&&0===(s&r)||(a[o]=ft(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=ht(e,e===Al?Nl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Fa=!0,Ba(e)}(cc.bind(null,e)):Ba(cc.bind(null,e)),oa((function(){0===(6&Cl)&&Za()})),n=null;else{switch(wt(r)){case 1:n=Xe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xl=-1,ec=0,0!==(6&Cl))throw Error(i(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Al?Nl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var a=Cl;Cl|=2;var o=mc();for(Al===e&&Nl===t||(Hl=null,Vl=Ge()+500,fc(e,t));;)try{bc();break}catch(l){pc(e,l)}_i(),El.current=o,Cl=a,null!==Il?t=0:(Al=null,Nl=0,t=Ml)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(r=a,t=oc(e,a))),1===t)throw n=Ll,fc(e,0),lc(e,r),ac(e,Ge()),n;if(6===t)lc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!sr(i(),a))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ll,fc(e,0),lc(e,r),ac(e,Ge()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:kc(e,Bl,Hl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Zl+500-Ge())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(kc.bind(null,e,Bl,Hl),t);break}kc(e,Bl,Hl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>a&&(a=s),r&=~o}if(r=a,10<(r=(120>(r=Ge()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ol(r/1960))-r)){e.timeoutHandle=ra(kc.bind(null,e,Bl,Hl),r);break}kc(e,Bl,Hl);break;default:throw Error(i(329))}}}return ac(e,Ge()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bl,Bl=n,null!==t&&sc(t)),e}function sc(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function lc(e,t){for(t&=~Fl,t&=~Dl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Cl))throw Error(i(327));xc();var t=ht(e,0);if(0===(1&t))return ac(e,Ge()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ll,fc(e,0),lc(e,t),ac(e,Ge()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kc(e,Bl,Hl),ac(e,Ge()),null}function uc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(Vl=Ge()+500,Fa&&Za())}}function dc(e){null!==Jl&&0===Jl.tag&&0===(6&Cl)&&xc();var t=Cl;Cl|=1;var n=Tl.transition,r=bt;try{if(Tl.transition=null,bt=1,e)return e()}finally{bt=r,Tl.transition=n,0===(6&(Cl=t))&&Za()}}function hc(){jl=Rl.current,Oa(Rl)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&ja();break;case 3:ao(),Oa(Ca),Oa(Ta),uo();break;case 5:oo(r);break;case 4:ao();break;case 13:case 19:Oa(so);break;case 10:ki(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Al=e,Il=e=Rc(e.current,null),Nl=jl=t,Ml=0,Ll=null,Fl=Dl=zl=0,Bl=Ul=null,null!==Ei){for(t=0;t<Ei.length;t++)if(null!==(r=(n=Ei[t]).interleaved)){n.interleaved=null;var a=r.next,i=n.pending;if(null!==i){var o=i.next;i.next=a,r.next=o}n.pending=r}Ei=null}return e}function pc(e,t){for(;;){var n=Il;try{if(_i(),ho.current=os,yo){for(var r=mo.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}yo=!1}if(po=0,go=vo=mo=null,bo=!1,wo=0,Pl.current=null,null===n||null===n.return){Ml=1,Ll=t,Il=null;break}e:{var o=e,s=n.return,l=n,c=t;if(t=Nl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ys(p,s,l,0,t),1&p.mode&&vs(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var v=new Set;v.add(c),t.updateQueue=v}else m.add(c);break e}if(0===(1&t)){vs(o,u,t),vc();break e}c=Error(i(426))}else if(ai&&1&l.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ys(g,s,l,0,t),pi(us(c,l));break e}}o=c=us(c,l),4!==Ml&&(Ml=2),null===Ul?Ul=[o]:Ul.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Li(o,ps(0,c,t));break e;case 1:l=c;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===$l||!$l.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Li(o,ms(o,l,t));break e}}o=o.return}while(null!==o)}_c(n)}catch(w){t=w,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function mc(){var e=El.current;return El.current=os,null===e?os:e}function vc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Al||0===(268435455&zl)&&0===(268435455&Dl)||lc(Al,Nl)}function gc(e,t){var n=Cl;Cl|=2;var r=mc();for(Al===e&&Nl===t||(Hl=null,fc(e,t));;)try{yc();break}catch(a){pc(e,a)}if(_i(),Cl=n,El.current=r,null!==Il)throw Error(i(261));return Al=null,Nl=0,Ml}function yc(){for(;null!==Il;)wc(Il)}function bc(){for(;null!==Il&&!Je();)wc(Il)}function wc(e){var t=Sl(e.alternate,e,jl);e.memoizedProps=e.pendingProps,null===t?_c(e):Il=t,Pl.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ks(n,t,jl)))return void(Il=n)}else{if(null!==(n=Js(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Ml=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Ml&&(Ml=5)}function kc(e,t,n){var r=bt,a=Tl.transition;try{Tl.transition=null,bt=1,function(e,t,n,r){do{xc()}while(null!==Jl);if(0!==(6&Cl))throw Error(i(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ot(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}(e,o),e===Al&&(Il=Al=null,Nl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Ac(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Tl.transition,Tl.transition=null;var s=bt;bt=1;var l=Cl;Cl|=4,Pl.current=null,function(e,t){if(ea=Ht,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==a&&3!==h.nodeType||(l=s+a),h!==o||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===a&&(l=s),f===o&&++d===r&&(c=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Ht=!1,Xs=t;null!==Xs;)if(e=(t=Xs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xs=e;else for(;null!==Xs;){t=Xs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var v=m.memoizedProps,g=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:vi(t.type,v),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(i(163))}}catch(_){Oc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Xs=e;break}Xs=t.return}m=nl,nl=!1}(e,n),gl(n,e),pr(ta),Ht=!!ea,ta=ea=null,e.current=n,bl(n,e,a),Ye(),Cl=l,bt=s,Tl.transition=o}else e.current=n;if(Kl&&(Kl=!1,Jl=e,Yl=a),o=e.pendingLanes,0===o&&($l=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ac(e,Ge()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Wl)throw Wl=!1,e=ql,ql=null,e;0!==(1&Yl)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Ql?Gl++:(Gl=0,Ql=e):Gl=0,Za()}(e,t,n,r)}finally{Tl.transition=a,bt=r}return null}function xc(){if(null!==Jl){var e=wt(Yl),t=Tl.transition,n=bt;try{if(Tl.transition=null,bt=16>e?16:e,null===Jl)var r=!1;else{if(e=Jl,Jl=null,Yl=0,0!==(6&Cl))throw Error(i(331));var a=Cl;for(Cl|=4,Xs=e.current;null!==Xs;){var o=Xs,s=o.child;if(0!==(16&Xs.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xs=u;null!==Xs;){var d=Xs;switch(d.tag){case 0:case 11:case 15:rl(8,d,o)}var h=d.child;if(null!==h)h.return=d,Xs=h;else for(;null!==Xs;){var f=(d=Xs).sibling,p=d.return;if(ol(d),d===u){Xs=null;break}if(null!==f){f.return=p,Xs=f;break}Xs=p}}}var m=o.alternate;if(null!==m){var v=m.child;if(null!==v){m.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(null!==v)}}Xs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Xs=s;else e:for(;null!==Xs;){if(0!==(2048&(o=Xs).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Xs=y;break e}Xs=o.return}}var b=e.current;for(Xs=b;null!==Xs;){var w=(s=Xs).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,Xs=w;else e:for(s=b;null!==Xs;){if(0!==(2048&(l=Xs).flags))try{switch(l.tag){case 0:case 11:case 15:al(9,l)}}catch(k){Oc(l,l.return,k)}if(l===s){Xs=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Xs=_;break e}Xs=l.return}}if(Cl=a,Za(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(k){}r=!0}return r}finally{bt=n,Tl.transition=t}}return!1}function Sc(e,t,n){e=Ri(e,t=ps(0,t=us(n,t),1),1),t=tc(),null!==e&&(gt(e,1,t),ac(e,t))}function Oc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===$l||!$l.has(r))){t=Ri(t,e=ms(t,e=us(n,e),1),1),e=tc(),null!==t&&(gt(t,1,e),ac(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Nl&n)===n&&(4===Ml||3===Ml&&(130023424&Nl)===Nl&&500>Ge()-Zl?fc(e,0):Fl|=n),ac(e,t)}function Pc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Ci(e,t))&&(gt(e,t,n),ac(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Pc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Pc(e,n)}function Ac(e,t){return $e(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nc(e,t,n,r){return new Ic(e,t,n,r)}function jc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Nc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,a,o){var s=2;if(r=e,"function"===typeof e)jc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Lc(n.children,a,o,t);case S:s=8,a|=8;break;case O:return(e=Nc(12,n,t,2|a)).elementType=O,e.lanes=o,e;case C:return(e=Nc(13,n,t,a)).elementType=C,e.lanes=o,e;case A:return(e=Nc(19,n,t,a)).elementType=A,e.lanes=o,e;case j:return zc(n,a,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:s=10;break e;case P:s=9;break e;case T:s=11;break e;case I:s=14;break e;case N:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Nc(s,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Nc(7,e,r,t)).lanes=n,e}function zc(e,t,n,r){return(e=Nc(22,e,r,t)).elementType=j,e.lanes=n,e.stateNode={isHidden:!1},e}function Dc(e,t,n){return(e=Nc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Nc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,a,i,o,s,l){return e=new Uc(e,t,n,s,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Nc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ii(i),e}function Zc(e){if(!e)return Pa;e:{if(Ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Na(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Na(n))return Ma(e,n,t)}return t}function Vc(e,t,n,r,a,i,o,s,l){return(e=Bc(n,r,!0,e,0,i,0,s,l)).context=Zc(null),n=e.current,(i=ji(r=tc(),a=nc(n))).callback=void 0!==t&&null!==t?t:null,Ri(n,i,a),e.current.lanes=a,gt(e,a,r),ac(e,r),e}function Hc(e,t,n,r){var a=t.current,i=tc(),o=nc(a);return n=Zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ji(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ri(a,t,o))&&(rc(e,a,o,i),Mi(e,a,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function $c(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ca.current)ws=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ws=!1,function(e,t,n){switch(t.tag){case 3:As(t),fi();break;case 5:io(t);break;case 1:Na(t.type)&&La(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ea(gi,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ea(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ds(e,t,n):(Ea(so,1&so.current),null!==(e=Ws(e,t,n))?e.sibling:null);Ea(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vs(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ea(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Os(e,t,n)}return Ws(e,t,n)}(e,t,n);ws=0!==(131072&e.flags)}else ws=!1,ai&&0!==(1048576&t.flags)&&Xa(t,qa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hs(e,t),e=t.pendingProps;var a=Ia(t,Ta.current);Si(t,n),a=So(null,t,r,e,a,n);var o=Oo();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Na(r)?(o=!0,La(t)):o=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ii(t),a.updater=Bi,t.stateNode=a,a._reactInternals=t,Wi(t,r,e,n),t=Cs(null,t,r,!0,o,n)):(t.tag=0,ai&&o&&ei(t),_s(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return jc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===I)return 14}return 2}(r),e=vi(r,e),a){case 0:t=Ps(null,t,r,e,n);break e;case 1:t=Ts(null,t,r,e,n);break e;case 11:t=ks(null,t,r,e,n);break e;case 14:t=xs(null,t,r,vi(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Ps(e,t,r,a=t.elementType===r?a:vi(r,a),n);case 1:return r=t.type,a=t.pendingProps,Ts(e,t,r,a=t.elementType===r?a:vi(r,a),n);case 3:e:{if(As(t),null===e)throw Error(i(387));r=t.pendingProps,a=(o=t.memoizedState).element,Ni(e,t),zi(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Is(e,t,r,n,a=us(Error(i(423)),t));break e}if(r!==a){t=Is(e,t,r,n,a=us(Error(i(424)),t));break e}for(ri=ca(t.stateNode.containerInfo.firstChild),ni=t,ai=!0,ii=null,n=Gi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===a){t=Ws(e,t,n);break e}_s(e,t,r,n)}t=t.child}return t;case 5:return io(t),null===e&&ci(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,na(r,a)?s=null:null!==o&&na(r,o)&&(t.flags|=32),Es(e,t),_s(e,t,s,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Ds(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Yi(t,null,r,n):_s(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,ks(e,t,r,a=t.elementType===r?a:vi(r,a),n);case 7:return _s(e,t,t.pendingProps,n),t.child;case 8:case 12:return _s(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,s=a.value,Ea(gi,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===a.children&&!Ca.current){t=Ws(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ji(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xi(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(i(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),xi(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}_s(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Si(t,n),r=r(a=Oi(a)),t.flags|=1,_s(e,t,r,n),t.child;case 14:return a=vi(r=t.type,t.pendingProps),xs(e,t,r,a=vi(r.type,a),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:vi(r,a),Hs(e,t),t.tag=1,Na(r)?(e=!0,La(t)):e=!1,Si(t,n),Vi(t,r,a),Wi(t,r,a,n),Cs(null,t,r,!0,e,n);case 19:return Vs(e,t,n);case 22:return Os(e,t,n)}throw Error(i(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Gc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function eu(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if("function"===typeof a){var s=a;a=function(){var e=Wc(o);s.call(e)}}Hc(t,o,e,a)}else o=function(e,t,n,r,a){if(a){if("function"===typeof r){var i=r;r=function(){var e=Wc(o);i.call(e)}}var o=Vc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=o,e[pa]=o.current,Zr(8===e.nodeType?e.parentNode:e),dc(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var s=r;r=function(){var e=Wc(l);s.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[pa]=l.current,Zr(8===e.nodeType?e.parentNode:e),dc((function(){Hc(t,l,n,r)})),l}(n,t,e,a,r);return Wc(o)}Yc.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Hc(e,t,null,null)},Yc.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Hc(null,e,null,null)})),t[pa]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<jt.length&&0!==t&&t<jt[n].priority;n++);jt.splice(n,0,e),0===n&&zt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),ac(t,Ge()),0===(6&Cl)&&(Vl=Ge()+500,Za()))}break;case 13:dc((function(){var t=Ci(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),$c(e,1)}},kt=function(e){if(13===e.tag){var t=Ci(e,134217728);if(null!==t)rc(t,e,134217728,tc());$c(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Ci(e,t);if(null!==n)rc(n,e,t,tc());$c(e,t)}},St=function(){return bt},Ot=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=_a(r);if(!a)throw Error(i(90));$(r),Q(r,a)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=uc,Ce=dc;var tu={usingClientEntryPoint:!1,Events:[ba,wa,_a,Ee,Pe,uc]},nu={findFiberByHostInstance:ya,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!au.isDisabled&&au.supportsFiber)try{at=au.inject(ru),it=au}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Gc(e))throw Error(i(299));var n=!1,r="",a=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,a),e[pa]=t.current,Zr(8===e.nodeType?e.parentNode:e),new Jc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(i(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Gc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,a=!1,o="",s=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,a,0,o,s),e[pa]=t.current,Zr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Yc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(i(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(i(40));return!!e._reactRootContainer&&(dc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pa]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},1153:(e,t,n)=>{"use strict";var r=n(5043),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:u,props:i,_owner:s.current}}t.jsx=c,t.jsxs=c},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var w=b.prototype=new y;w.constructor=b,m(w,g.prototype),w.isPureReactComponent=!0;var _=Array.isArray,k=Object.prototype.hasOwnProperty,x={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function O(e,t,r){var a,i={},o=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,a)&&!S.hasOwnProperty(a)&&(i[a]=t[a]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===i[a]&&(i[a]=l[a]);return{$$typeof:n,type:e,key:o,ref:s,props:i,_owner:x.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var P=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,a,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===i?"."+T(l,0):i,_(o)?(a="",null!=e&&(a=e.replace(P,"$&/")+"/"),C(o,t,a,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(P,"$&/")+"/")+e)),t.push(o)),1;if(l=0,i=""===i?".":i+":",_(e))for(var c=0;c<e.length;c++){var u=i+T(s=e[c],c);l+=C(s,t,a,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=C(s=s.value,t,a,u=i+T(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],a=0;return C(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},j={transition:null},R={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:j,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=x.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!S.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:n,type:e.type,key:i,ref:o,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=O,t.createFactory=function(e){var t=O.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=j.transition;j.transition={};try{e()}finally{j.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,n){return N.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,n){return N.current.useReducer(e,t,n)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.current.useTransition()},t.version="18.2.0"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},302:(e,t,n)=>{e.exports=n(3944)},3944:(e,t,n)=>{var r=n(5790);t.operation=function(e){var n=t.timeouts(e);return new r(n,{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var n in e)t[n]=e[n];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var r=[],a=0;a<t.retries;a++)r.push(this.createTimeout(a,t));return e&&e.forever&&!r.length&&r.push(this.createTimeout(a,t)),r.sort((function(e,t){return e-t})),r},t.createTimeout=function(e,t){var n=t.randomize?Math.random()+1:1,r=Math.round(n*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return r=Math.min(r,t.maxTimeout)},t.wrap=function(e,n,r){if(n instanceof Array&&(r=n,n=null),!r)for(var a in r=[],e)"function"===typeof e[a]&&r.push(a);for(var i=0;i<r.length;i++){var o=r[i],s=e[o];e[o]=function(r){var a=t.operation(n),i=Array.prototype.slice.call(arguments,1),o=i.pop();i.push((function(e){a.retry(e)||(e&&(arguments[0]=a.mainError()),o.apply(this,arguments))})),a.attempt((function(){r.apply(e,i)}))}.bind(e,s),e[o].options=n}}},5790:e=>{function t(e,t){"boolean"===typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var n=this._timeouts.shift();if(void 0===n){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1)}var r=this;return this._timer=setTimeout((function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout((function(){r._operationTimeoutCb(r._attempts)}),r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)}),n),this._options.unref&&this._timer.unref(),!0},t.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){n._operationTimeoutCb()}),n._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,n=0,r=0;r<this._errors.length;r++){var a=this._errors[r],i=a.message,o=(e[i]||0)+1;e[i]=o,o>=n&&(t=a,n=o)}return t}},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>i(l,n))c<a&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<a&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,v=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(v=!1,w(e),!m)if(null!==r(c))m=!0,j(k);else{var t=r(u);null!==t&&R(_,t.startTime-e)}}function k(e,n){m=!1,v&&(v=!1,y(E),E=-1),p=!0;var i=f;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!C());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&a(c),w(n)}else a(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&R(_,d.startTime-n),l=!1}return l}finally{h=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,S=!1,O=null,E=-1,P=5,T=-1;function C(){return!(t.unstable_now()-T<P)}function A(){if(null!==O){var e=t.unstable_now();T=e;var n=!0;try{n=O(!0,e)}finally{n?x():(S=!1,O=null)}}else S=!1}if("function"===typeof b)x=function(){b(A)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,N=I.port2;I.port1.onmessage=A,x=function(){N.postMessage(null)}}else x=function(){g(A,0)};function j(e){O=e,S||(S=!0,x())}function R(e,n){E=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,j(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(v?(y(E),E=-1):v=!0,R(_,i-o))):(e.sortIndex=s,n(c,e),m||p||(m=!0,j(k))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},9915:(e,t,n)=>{"use strict";n.d(t,{N:()=>s});var r=n(8693),a=n(7623),i=n(4070);class o{}class s extends o{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,(0,a.Z)(this.constructor)]}constructor(e){var t,n,r,a,o;(super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:"true"!==(0,i.Az)("LANGCHAIN_CALLBACKS_BACKGROUND")}),this.lc_kwargs=e||{},e)&&(this.ignoreLLM=null!==(t=e.ignoreLLM)&&void 0!==t?t:this.ignoreLLM,this.ignoreChain=null!==(n=e.ignoreChain)&&void 0!==n?n:this.ignoreChain,this.ignoreAgent=null!==(r=e.ignoreAgent)&&void 0!==r?r:this.ignoreAgent,this.ignoreRetriever=null!==(a=e.ignoreRetriever)&&void 0!==a?a:this.ignoreRetriever,this.awaitHandlers=null!==(o=e._awaitHandler)&&void 0!==o?o:this.awaitHandlers)}copy(){return new this.constructor(this)}toJSON(){return a.y.prototype.toJSON.call(this)}toJSONNotImplemented(){return a.y.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){return new class extends s{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:r.A()}),Object.assign(this,e)}}}}},9341:(e,t,n)=>{"use strict";n.d(t,{Td:()=>ne,tW:()=>re,H_:()=>J});var r=n(8693),a=n(9915),i=n(6503),o=n(3653);function s(e,t){return"".concat(e.open).concat(t).concat(e.close)}function l(e,t){try{return JSON.stringify(e,null,2)}catch(n){return t}}function c(e){if(!e.end_time)return"";const t=e.end_time-e.start_time;return t<1e3?"".concat(t,"ms"):"".concat((t/1e3).toFixed(2),"s")}const{color:u}=i;class d extends o.J{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const t=[];let n=e;for(;n.parent_run_id;){const e=this.runMap.get(n.parent_run_id);if(!e)break;t.push(e),n=e}return t}getBreadcrumbs(e){const t=[...this.getParents(e).reverse(),e].map(((e,t,n)=>{const r="".concat(e.execution_order,":").concat(e.run_type,":").concat(e.name);return t===n.length-1?s(i.bold,r):r})).join(" > ");return s(u.grey,t)}onChainStart(e){const t=this.getBreadcrumbs(e);console.log("".concat(s(u.green,"[chain/start]")," [").concat(t,"] Entering Chain run with input: ").concat(l(e.inputs,"[inputs]")))}onChainEnd(e){const t=this.getBreadcrumbs(e);console.log("".concat(s(u.cyan,"[chain/end]")," [").concat(t,"] [").concat(c(e),"] Exiting Chain run with output: ").concat(l(e.outputs,"[outputs]")))}onChainError(e){const t=this.getBreadcrumbs(e);console.log("".concat(s(u.red,"[chain/error]")," [").concat(t,"] [").concat(c(e),"] Chain run errored with error: ").concat(l(e.error,"[error]")))}onLLMStart(e){const t=this.getBreadcrumbs(e),n="prompts"in e.inputs?{prompts:e.inputs.prompts.map((e=>e.trim()))}:e.inputs;console.log("".concat(s(u.green,"[llm/start]")," [").concat(t,"] Entering LLM run with input: ").concat(l(n,"[inputs]")))}onLLMEnd(e){const t=this.getBreadcrumbs(e);console.log("".concat(s(u.cyan,"[llm/end]")," [").concat(t,"] [").concat(c(e),"] Exiting LLM run with output: ").concat(l(e.outputs,"[response]")))}onLLMError(e){const t=this.getBreadcrumbs(e);console.log("".concat(s(u.red,"[llm/error]")," [").concat(t,"] [").concat(c(e),"] LLM run errored with error: ").concat(l(e.error,"[error]")))}onToolStart(e){var t;const n=this.getBreadcrumbs(e);console.log("".concat(s(u.green,"[tool/start]")," [").concat(n,'] Entering Tool run with input: "').concat(null===(t=e.inputs.input)||void 0===t?void 0:t.trim(),'"'))}onToolEnd(e){var t;const n=this.getBreadcrumbs(e);console.log("".concat(s(u.cyan,"[tool/end]")," [").concat(n,"] [").concat(c(e),'] Exiting Tool run with output: "').concat(null===(t=e.outputs)||void 0===t||null===(t=t.output)||void 0===t?void 0:t.trim(),'"'))}onToolError(e){const t=this.getBreadcrumbs(e);console.log("".concat(s(u.red,"[tool/error]")," [").concat(t,"] [").concat(c(e),"] Tool run errored with error: ").concat(l(e.error,"[error]")))}onRetrieverStart(e){const t=this.getBreadcrumbs(e);console.log("".concat(s(u.green,"[retriever/start]")," [").concat(t,"] Entering Retriever run with input: ").concat(l(e.inputs,"[inputs]")))}onRetrieverEnd(e){const t=this.getBreadcrumbs(e);console.log("".concat(s(u.cyan,"[retriever/end]")," [").concat(t,"] [").concat(c(e),"] Exiting Retriever run with output: ").concat(l(e.outputs,"[outputs]")))}onRetrieverError(e){const t=this.getBreadcrumbs(e);console.log("".concat(s(u.red,"[retriever/error]")," [").concat(t,"] [").concat(c(e),"] Retriever run errored with error: ").concat(l(e.error,"[error]")))}onAgentAction(e){const t=e,n=this.getBreadcrumbs(e);console.log("".concat(s(u.blue,"[agent/action]")," [").concat(n,"] Agent selected action: ").concat(l(t.actions[t.actions.length-1],"[action]")))}}const h=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const f=function(e){return"string"===typeof e&&h.test(e)},p={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let m;const v=new Uint8Array(16);function g(){if(!m&&(m="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!m))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return m(v)}const y=[];for(let ae=0;ae<256;++ae)y.push((ae+256).toString(16).slice(1));function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return y[e[t+0]]+y[e[t+1]]+y[e[t+2]]+y[e[t+3]]+"-"+y[e[t+4]]+y[e[t+5]]+"-"+y[e[t+6]]+y[e[t+7]]+"-"+y[e[t+8]]+y[e[t+9]]+"-"+y[e[t+10]]+y[e[t+11]]+y[e[t+12]]+y[e[t+13]]+y[e[t+14]]+y[e[t+15]]}const w=function(e,t,n){if(p.randomUUID&&!t&&!e)return p.randomUUID();const r=(e=e||{}).random||(e.rng||g)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return b(r)};var _=n(6659),k=n(5623);const x=[400,401,403,404,405,406,407,408],S=[409];class O{constructor(e){var t,n;Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=null!==(t=e.maxConcurrency)&&void 0!==t?t:1/0,this.maxRetries=null!==(n=e.maxRetries)&&void 0!==n?n:6;const r=k.default;this.queue=new r({concurrency:this.maxConcurrency}),this.onFailedResponseHook=null===e||void 0===e?void 0:e.onFailedResponseHook}call(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const a=this.onFailedResponseHook;return this.queue.add((()=>_((()=>e(...n).catch((e=>{throw e instanceof Error?e:new Error(e)}))),{async onFailedAttempt(e){if(e.message.startsWith("Cancel")||e.message.startsWith("TimeoutError")||e.message.startsWith("AbortError"))throw e;if("ECONNABORTED"===(null===e||void 0===e?void 0:e.code))throw e;const t=null===e||void 0===e?void 0:e.response,n=null===t||void 0===t?void 0:t.status;if(n){if(x.includes(+n))throw e;if(S.includes(+n))return;a&&await a(t)}},retries:this.maxRetries,randomize:!0})),{throwOnTimeout:!0})}callWithOptions(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return e.signal?Promise.race([this.call(t,...r),new Promise(((t,n)=>{var r;null===(r=e.signal)||void 0===r||r.addEventListener("abort",(()=>{n(new Error("AbortError"))}))}))]):this.call(t,...r)}fetch(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.call((()=>fetch(...t).then((e=>e.ok?e:Promise.reject(e)))))}}function E(e){return"function"===typeof(null===e||void 0===e?void 0:e._getType)}function P(e){const t={type:e._getType(),data:{content:e.content}};return null!==e&&void 0!==e&&e.additional_kwargs&&Object.keys(e.additional_kwargs).length>0&&(t.data.additional_kwargs={...e.additional_kwargs}),t}let T;const C=()=>"undefined"!==typeof Deno,A=()=>T||(T="undefined"!==typeof window&&"undefined"!==typeof window.document?"browser":"undefined"===typeof process||"undefined"===typeof process.versions||"undefined"===typeof process.versions.node||C()?"object"===typeof globalThis&&globalThis.constructor&&"DedicatedWorkerGlobalScope"===globalThis.constructor.name?"webworker":"undefined"!==typeof window&&"nodejs"===window.name||"undefined"!==typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"))?"jsdom":C()?"deno":"other":"node",T);let I,N;async function j(){if(void 0===I){const e=A(),t=function(){if(void 0!==N)return N;const e=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],t={};for(const n of e){const e=M(n);void 0!==e&&(t[n]=e)}return N=t,t}();I={library:"langsmith",runtime:e,sdk:"langsmith-js",sdk_version:V,...t}}return I}function R(){try{return"undefined"!==typeof process?Object.entries({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).reduce(((e,t)=>{let[n,r]=t;return e[n]=String(r),e}),{}):void 0}catch(e){return}}function M(e){try{var t;return"undefined"!==typeof process?null===(t={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===t?void 0:t[e]:void 0}catch(n){return}}async function L(e){const t=await j(),n=function(){const e=R()||{},t={},n=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION"];for(const[r,a]of Object.entries(e))!r.startsWith("LANGCHAIN_")||"string"!==typeof a||n.includes(r)||r.toLowerCase().includes("key")||r.toLowerCase().includes("secret")||r.toLowerCase().includes("token")||("LANGCHAIN_REVISION_ID"===r?t.revision_id=a:t[r]=a);return t}();return e.map((e=>{var r,a;const i=null!==(r=e.extra)&&void 0!==r?r:{},o=i.metadata;return e.extra={...i,runtime:{...t,...null===i||void 0===i?void 0:i.runtime},metadata:{...n,...n.revision_id||e.revision_id?{revision_id:null!==(a=e.revision_id)&&void 0!==a?a:n.revision_id}:{},...o}},e}))}const z=async(e,t)=>{const n=await e.text();if(!e.ok)throw new Error("Failed to ".concat(t,": ").concat(e.status," ").concat(e.statusText," ").concat(n))};function D(e){if(void 0!==e)return e.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}function F(e){if(!f(e))throw new Error("Invalid UUID: ".concat(e))}const U=async e=>{if(429===(null===e||void 0===e?void 0:e.status)){var t;const n=1e3*parseInt(null!==(t=e.headers.get("retry-after"))&&void 0!==t?t:"30",10);if(n>0)return await new Promise((e=>setTimeout(e,n))),!0}return!1};class B{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]})}get size(){return this.items.length}push(e){return new Promise((t=>{this.items.push([e,t])}))}pop(e){if(e<1)throw new Error("Number of items to pop off may not be less than 1.");const t=[];for(;t.length<e&&this.items.length;){const e=this.items.shift();if(!e)break;t.push(e)}return[t.map((e=>e[0])),()=>t.forEach((e=>e[1]()))]}}class Z{constructor(){var e,t,n,r,a,i,o,s,l,c,u;let d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sampledPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"batchEndpointSupported",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new B}),Object.defineProperty(this,"pendingAutoBatchedRunLimit",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchInitialDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:50}),Object.defineProperty(this,"serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const h=Z.getDefaultClientConfig();this.tracingSampleRate=(()=>{const e=M("LANGCHAIN_TRACING_SAMPLING_RATE");if(void 0===e)return;const t=parseFloat(e);if(t<0||t>1)throw new Error("LANGCHAIN_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ".concat(t));return t})(),this.apiUrl=null!==(e=D(null!==(t=d.apiUrl)&&void 0!==t?t:h.apiUrl))&&void 0!==e?e:"",this.apiKey=D(null!==(n=d.apiKey)&&void 0!==n?n:h.apiKey),this.webUrl=D(null!==(r=d.webUrl)&&void 0!==r?r:h.webUrl),this.timeout_ms=null!==(a=d.timeout_ms)&&void 0!==a?a:12e3,this.caller=new O(null!==(i=d.callerOptions)&&void 0!==i?i:{}),this.batchIngestCaller=new O({...null!==(o=d.callerOptions)&&void 0!==o?o:{},onFailedResponseHook:U}),this.hideInputs=null!==(s=d.hideInputs)&&void 0!==s?s:h.hideInputs,this.hideOutputs=null!==(l=d.hideOutputs)&&void 0!==l?l:h.hideOutputs,this.autoBatchTracing=null!==(c=d.autoBatchTracing)&&void 0!==c?c:this.autoBatchTracing,this.pendingAutoBatchedRunLimit=null!==(u=d.pendingAutoBatchedRunLimit)&&void 0!==u?u:this.pendingAutoBatchedRunLimit,this.fetchOptions=d.fetchOptions||{}}static getDefaultClientConfig(){var e;const t=M("LANGCHAIN_API_KEY");return{apiUrl:null!==(e=M("LANGCHAIN_ENDPOINT"))&&void 0!==e?e:"https://api.smith.langchain.com",apiKey:t,webUrl:void 0,hideInputs:"true"===M("LANGCHAIN_HIDE_INPUTS"),hideOutputs:"true"===M("LANGCHAIN_HIDE_OUTPUTS")}}getHostUrl(){return this.webUrl?this.webUrl:(e=>{const t=e.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return"localhost"===t||"127.0.0.1"===t||"::1"===t})(this.apiUrl)?(this.webUrl="http://localhost","http://localhost"):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com","https://dev.smith.langchain.com"):(this.webUrl="https://smith.langchain.com","https://smith.langchain.com")}get headers(){const e={"User-Agent":"langsmith-js/".concat(V)};return this.apiKey&&(e["x-api-key"]="".concat(this.apiKey)),e}processInputs(e){return!1===this.hideInputs?e:!0===this.hideInputs?{}:"function"===typeof this.hideInputs?this.hideInputs(e):e}processOutputs(e){return!1===this.hideOutputs?e:!0===this.hideOutputs?{}:"function"===typeof this.hideOutputs?this.hideOutputs(e):e}prepareRunCreateOrUpdateInputs(e){const t={...e};return void 0!==t.inputs&&(t.inputs=this.processInputs(t.inputs)),void 0!==t.outputs&&(t.outputs=this.processOutputs(t.outputs)),t}async _getResponse(e,t){var n;const r=null!==(n=null===t||void 0===t?void 0:t.toString())&&void 0!==n?n:"",a="".concat(this.apiUrl).concat(e,"?").concat(r),i=await this.caller.call(fetch,a,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(!i.ok)throw new Error("Failed to fetch ".concat(e,": ").concat(i.status," ").concat(i.statusText));return i}async _get(e,t){return(await this._getResponse(e,t)).json()}_getPaginated(e){try{var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new URLSearchParams;return async function*(){let r=Number(n.get("offset"))||0;const a=Number(n.get("limit"))||100;for(;;){n.set("offset",String(r)),n.set("limit",String(a));const i="".concat(t.apiUrl).concat(e,"?").concat(n),o=await t.caller.call(fetch,i,{method:"GET",headers:t.headers,signal:AbortSignal.timeout(t.timeout_ms),...t.fetchOptions});if(!o.ok)throw new Error("Failed to fetch ".concat(e,": ").concat(o.status," ").concat(o.statusText));const s=await o.json();if(0===s.length)break;if(yield s,s.length<a)break;r+=s.length}}()}catch(n){return Promise.reject(n)}}_getCursorPaginatedList(e){try{var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"runs";return async function*(){const i=n?{...n}:{};for(;;){const n=await t.caller.call(fetch,"".concat(t.apiUrl).concat(e),{method:r,headers:{...t.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(t.timeout_ms),...t.fetchOptions,body:JSON.stringify(i)}),o=await n.json();if(!o)break;if(!o[a])break;yield o[a];const s=o.cursors;if(!s)break;if(!s.next)break;i.cursor=s.next}}()}catch(n){return Promise.reject(n)}}_filterForSampling(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0===this.tracingSampleRate)return e;if(t){const t=[];for(const n of e)this.sampledPostUuids.has(n.id)&&(t.push(n),this.sampledPostUuids.delete(n.id));return t}{const t=[];for(const n of e)Math.random()<this.tracingSampleRate&&(t.push(n),this.sampledPostUuids.add(n.id));return t}}async drainAutoBatchQueue(){for(;this.autoBatchQueue.size>=0;){const[e,t]=this.autoBatchQueue.pop(this.pendingAutoBatchedRunLimit);if(!e.length)return void t();try{await this.batchIngestRuns({runCreates:e.filter((e=>"create"===e.action)).map((e=>e.item)),runUpdates:e.filter((e=>"update"===e.action)).map((e=>e.item))})}finally{t()}}}async processRunOperation(e,t){const n=this.autoBatchTimeout;clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0;const r=this.autoBatchQueue.push(e);return(t||this.autoBatchQueue.size>this.pendingAutoBatchedRunLimit)&&await this.drainAutoBatchQueue(),this.autoBatchQueue.size>0&&(this.autoBatchTimeout=setTimeout((()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue().catch(console.error)}),n?this.autoBatchAggregationDelayMs:this.autoBatchInitialDelayMs)),r}async _getServerInfo(){const e=await fetch("".concat(this.apiUrl,"/info"),{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(!e.ok)throw await e.text(),new Error("Failed to retrieve server info.");return e.json()}async batchEndpointIsSupported(){try{this.serverInfo=await this._getServerInfo()}catch(e){return!1}return!0}async createRun(e){var t;if(!this._filterForSampling([e]).length)return;const n={...this.headers,"Content-Type":"application/json"},r=e.project_name;delete e.project_name;const a=this.prepareRunCreateOrUpdateInputs({session_name:r,...e,start_time:null!==(t=e.start_time)&&void 0!==t?t:Date.now()});if(this.autoBatchTracing&&void 0!==a.trace_id&&void 0!==a.dotted_order)return void this.processRunOperation({action:"create",item:a}).catch(console.error);const i=await L([a]),o=await this.caller.call(fetch,"".concat(this.apiUrl,"/runs"),{method:"POST",headers:n,body:JSON.stringify(i[0]),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await z(o,"create run")}async batchIngestRuns(e){var t,n,r,a;let{runCreates:i,runUpdates:o}=e;if(void 0===i&&void 0===o)return;let s=null!==(t=null===i||void 0===i?void 0:i.map((e=>this.prepareRunCreateOrUpdateInputs(e))))&&void 0!==t?t:[],l=null!==(n=null===o||void 0===o?void 0:o.map((e=>this.prepareRunCreateOrUpdateInputs(e))))&&void 0!==n?n:[];if(s.length>0&&l.length>0){const e=s.reduce(((e,t)=>t.id?(e[t.id]=t,e):e),{}),t=[];for(const n of l)void 0!==n.id&&e[n.id]?e[n.id]={...e[n.id],...n}:t.push(n);s=Object.values(e),l=t}const c={post:this._filterForSampling(s),patch:this._filterForSampling(l,!0)};if(!c.post.length&&!c.patch.length)return;if(s=await L(s),void 0===this.batchEndpointSupported&&(this.batchEndpointSupported=await this.batchEndpointIsSupported()),!this.batchEndpointSupported){this.autoBatchTracing=!1;for(const e of c.post)await this.createRun(e);for(const e of c.patch)void 0!==e.id&&await this.updateRun(e.id,e);return}const u=null!==(r=null===(a=this.serverInfo)||void 0===a||null===(a=a.batch_ingest_config)||void 0===a?void 0:a.size_limit_bytes)&&void 0!==r?r:20971520,d={post:[],patch:[]};let h=0;for(const f of["post","patch"]){const e=f,t=c[e].reverse();let n=t.pop();for(;void 0!==n;){const r=JSON.stringify(n);h>0&&h+r.length>u&&(await this._postBatchIngestRuns(JSON.stringify(d)),h=0,d.post=[],d.patch=[]),h+=r.length,d[e].push(n),n=t.pop()}}(d.post.length>0||d.patch.length>0)&&await this._postBatchIngestRuns(JSON.stringify(d))}async _postBatchIngestRuns(e){const t={...this.headers,"Content-Type":"application/json",Accept:"application/json"},n=await this.batchIngestCaller.call(fetch,"".concat(this.apiUrl,"/runs/batch"),{method:"POST",headers:t,body:e,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await z(n,"batch create run")}async updateRun(e,t){F(e),t.inputs&&(t.inputs=this.processInputs(t.inputs)),t.outputs&&(t.outputs=this.processOutputs(t.outputs));const n={...t,id:e};if(!this._filterForSampling([n],!0).length)return;if(this.autoBatchTracing&&void 0!==n.trace_id&&void 0!==n.dotted_order)return void 0!==t.end_time&&void 0===n.parent_run_id?void await this.processRunOperation({action:"update",item:n},!0):void this.processRunOperation({action:"update",item:n}).catch(console.error);const r={...this.headers,"Content-Type":"application/json"},a=await this.caller.call(fetch,"".concat(this.apiUrl,"/runs/").concat(e),{method:"PATCH",headers:r,body:JSON.stringify(t),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await z(a,"update run")}async readRun(e){let{loadChildRuns:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{loadChildRuns:!1};F(e);let n=await this._get("/runs/".concat(e));return t&&n.child_run_ids&&(n=await this._loadChildRuns(n)),n}async getRunUrl(e){let{runId:t,run:n,projectOpts:r}=e;if(void 0!==n){let e;if(n.session_id)e=n.session_id;else if(null!==r&&void 0!==r&&r.projectName)e=(await this.readProject({projectName:null===r||void 0===r?void 0:r.projectName})).id;else if(null!==r&&void 0!==r&&r.projectId)e=null===r||void 0===r?void 0:r.projectId;else{e=(await this.readProject({projectName:M("LANGCHAIN_PROJECT")||"default"})).id}const t=await this._getTenantId();return"".concat(this.getHostUrl(),"/o/").concat(t,"/projects/p/").concat(e,"/r/").concat(n.id,"?poll=true")}if(void 0!==t){const e=await this.readRun(t);if(!e.app_path)throw new Error("Run ".concat(t," has no app_path"));const n=this.getHostUrl();return"".concat(n).concat(e.app_path)}throw new Error("Must provide either runId or run")}async _loadChildRuns(e){const t=await async function(e){const t=[];for await(const n of e)t.push(n);return t}(this.listRuns({id:e.child_run_ids})),n={},r={};t.sort(((e,t)=>{var n,r;return(null!==(n=null===e||void 0===e?void 0:e.dotted_order)&&void 0!==n?n:"").localeCompare(null!==(r=null===t||void 0===t?void 0:t.dotted_order)&&void 0!==r?r:"")}));for(const a of t){if(null===a.parent_run_id||void 0===a.parent_run_id)throw new Error("Child run ".concat(a.id," has no parent"));a.parent_run_id in n||(n[a.parent_run_id]=[]),n[a.parent_run_id].push(a),r[a.id]=a}e.child_runs=n[e.id]||[];for(const a in n)a!==e.id&&(r[a].child_runs=n[a]);return e}async*listRuns(e){const{projectId:t,projectName:n,parentRunId:r,traceId:a,referenceExampleId:i,startTime:o,executionOrder:s,isRoot:l,runType:c,error:u,id:d,query:h,filter:f,traceFilter:p,treeFilter:m,limit:v,select:g}=e;let y=[];if(t&&(y=Array.isArray(t)?t:[t]),n){const e=Array.isArray(n)?n:[n],t=await Promise.all(e.map((e=>this.readProject({projectName:e}).then((e=>e.id)))));y.push(...t)}const b={session:y.length?y:null,run_type:c,reference_example:i,query:h,filter:f,trace_filter:p,tree_filter:m,execution_order:s,parent_run:r,start_time:o?o.toISOString():null,error:u,id:d,limit:v,trace:a,select:g||["app_path","child_run_ids","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],is_root:l};for await(const w of this._getCursorPaginatedList("/runs/query",b))yield*w}async shareRun(e){let{shareId:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={run_id:e,share_token:t||w()};F(e);const r=await this.caller.call(fetch,"".concat(this.apiUrl,"/runs/").concat(e,"/share"),{method:"PUT",headers:this.headers,body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),a=await r.json();if(null===a||!("share_token"in a))throw new Error("Invalid response from server");return"".concat(this.getHostUrl(),"/public/").concat(a.share_token,"/r")}async unshareRun(e){F(e);const t=await this.caller.call(fetch,"".concat(this.apiUrl,"/runs/").concat(e,"/share"),{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await z(t,"unshare run")}async readRunSharedLink(e){F(e);const t=await this.caller.call(fetch,"".concat(this.apiUrl,"/runs/").concat(e,"/share"),{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),n=await t.json();if(null!==n&&"share_token"in n)return"".concat(this.getHostUrl(),"/public/").concat(n.share_token,"/r")}async listSharedRuns(e){let{runIds:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new URLSearchParams({share_token:e});if(void 0!==t)for(const a of t)n.append("id",a);F(e);const r=await this.caller.call(fetch,"".concat(this.apiUrl,"/public/").concat(e,"/runs").concat(n),{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await r.json()}async readDatasetSharedSchema(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");if(!e){e=(await this.readDataset({datasetName:t})).id}F(e);const n=await this.caller.call(fetch,"".concat(this.apiUrl,"/datasets/").concat(e,"/share"),{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),r=await n.json();return r.url="".concat(this.getHostUrl(),"/public/").concat(r.share_token,"/d"),r}async shareDataset(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");if(!e){e=(await this.readDataset({datasetName:t})).id}const n={dataset_id:e};F(e);const r=await this.caller.call(fetch,"".concat(this.apiUrl,"/datasets/").concat(e,"/share"),{method:"PUT",headers:this.headers,body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),a=await r.json();return a.url="".concat(this.getHostUrl(),"/public/").concat(a.share_token,"/d"),a}async unshareDataset(e){F(e);const t=await this.caller.call(fetch,"".concat(this.apiUrl,"/datasets/").concat(e,"/share"),{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await z(t,"unshare dataset")}async readSharedDataset(e){F(e);const t=await this.caller.call(fetch,"".concat(this.apiUrl,"/public/").concat(e,"/datasets"),{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await t.json()}async createProject(e){let{projectName:t,description:n=null,metadata:r=null,upsert:a=!1,projectExtra:i=null,referenceDatasetId:o=null}=e;const s=a?"?upsert=true":"",l="".concat(this.apiUrl,"/sessions").concat(s),c=i||{};r&&(c.metadata=r);const u={name:t,extra:c,description:n};null!==o&&(u.reference_dataset_id=o);const d=await this.caller.call(fetch,l,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),h=await d.json();if(!d.ok)throw new Error("Failed to create session ".concat(t,": ").concat(d.status," ").concat(d.statusText));return h}async updateProject(e,t){let{name:n=null,description:r=null,metadata:a=null,projectExtra:i=null,endTime:o=null}=t;const s="".concat(this.apiUrl,"/sessions/").concat(e);let l=i;a&&(l={...l||{},metadata:a});const c={name:n,extra:l,description:r,end_time:o?new Date(o).toISOString():null},u=await this.caller.call(fetch,s,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),d=await u.json();if(!u.ok)throw new Error("Failed to update project ".concat(e,": ").concat(u.status," ").concat(u.statusText));return d}async hasProject(e){let{projectId:t,projectName:n}=e,r="/sessions";const a=new URLSearchParams;if(void 0!==t&&void 0!==n)throw new Error("Must provide either projectName or projectId, not both");if(void 0!==t)F(t),r+="/".concat(t);else{if(void 0===n)throw new Error("Must provide projectName or projectId");a.append("name",n)}const i=await this.caller.call(fetch,"".concat(this.apiUrl).concat(r,"?").concat(a),{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{const e=await i.json();return!!i.ok&&(!Array.isArray(e)||e.length>0)}catch(o){return!1}}async readProject(e){let{projectId:t,projectName:n,includeStats:r}=e,a="/sessions";const i=new URLSearchParams;if(void 0!==t&&void 0!==n)throw new Error("Must provide either projectName or projectId, not both");if(void 0!==t)F(t),a+="/".concat(t);else{if(void 0===n)throw new Error("Must provide projectName or projectId");i.append("name",n)}void 0!==r&&i.append("include_stats",r.toString());const o=await this._get(a,i);let s;if(Array.isArray(o)){if(0===o.length)throw new Error("Project[id=".concat(t,", name=").concat(n,"] not found"));s=o[0]}else s=o;return s}async _getTenantId(){if(null!==this._tenantId)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const t of this._getPaginated("/sessions",e))return this._tenantId=t[0].tenant_id,t[0].tenant_id;throw new Error("No projects found to resolve tenant.")}listProjects(){try{var e=this;let{projectIds:t,name:n,nameContains:r,referenceDatasetId:a,referenceDatasetName:i,referenceFree:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const s=new URLSearchParams;if(void 0!==t)for(const e of t)s.append("id",e);if(void 0!==n&&s.append("name",n),void 0!==r&&s.append("name_contains",r),void 0!==a)s.append("reference_dataset",a);else if(void 0!==i){const t=await e.readDataset({datasetName:i});s.append("reference_dataset",t.id)}void 0!==o&&s.append("reference_free",o.toString());for await(const t of e._getPaginated("/sessions",s))yield*t}()}catch(t){return Promise.reject(t)}}async deleteProject(e){let t,{projectId:n,projectName:r}=e;if(void 0===n&&void 0===r)throw new Error("Must provide projectName or projectId");if(void 0!==n&&void 0!==r)throw new Error("Must provide either projectName or projectId, not both");t=void 0===n?(await this.readProject({projectName:r})).id:n,F(t);const a=await this.caller.call(fetch,"".concat(this.apiUrl,"/sessions/").concat(t),{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await z(a,"delete session ".concat(t," (").concat(r,")"))}async uploadCsv(e){let{csvFile:t,fileName:n,inputKeys:r,outputKeys:a,description:i,dataType:o,name:s}=e;const l="".concat(this.apiUrl,"/datasets/upload"),c=new FormData;c.append("file",t,n),r.forEach((e=>{c.append("input_keys",e)})),a.forEach((e=>{c.append("output_keys",e)})),i&&c.append("description",i),o&&c.append("data_type",o),s&&c.append("name",s);const u=await this.caller.call(fetch,l,{method:"POST",headers:this.headers,body:c,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(!u.ok){const e=await u.json();if(e.detail&&e.detail.includes("already exists"))throw new Error("Dataset ".concat(n," already exists"));throw new Error("Failed to upload CSV: ".concat(u.status," ").concat(u.statusText))}return await u.json()}async createDataset(e){let{description:t,dataType:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={name:e,description:t};n&&(r.data_type=n);const a=await this.caller.call(fetch,"".concat(this.apiUrl,"/datasets"),{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(!a.ok){const t=await a.json();if(t.detail&&t.detail.includes("already exists"))throw new Error("Dataset ".concat(e," already exists"));throw new Error("Failed to create dataset ".concat(a.status," ").concat(a.statusText))}return await a.json()}async readDataset(e){let{datasetId:t,datasetName:n}=e,r="/datasets";const a=new URLSearchParams({limit:"1"});if(void 0!==t&&void 0!==n)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==t)F(t),r+="/".concat(t);else{if(void 0===n)throw new Error("Must provide datasetName or datasetId");a.append("name",n)}const i=await this._get(r,a);let o;if(Array.isArray(i)){if(0===i.length)throw new Error("Dataset[id=".concat(t,", name=").concat(n,"] not found"));o=i[0]}else o=i;return o}async diffDatasetVersions(e){let{datasetId:t,datasetName:n,fromVersion:r,toVersion:a}=e,i=t;if(void 0===i&&void 0===n)throw new Error("Must provide either datasetName or datasetId");if(void 0!==i&&void 0!==n)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===i){i=(await this.readDataset({datasetName:n})).id}const o=new URLSearchParams({from_version:"string"===typeof r?r:r.toISOString(),to_version:"string"===typeof a?a:a.toISOString()});return await this._get("/datasets/".concat(i,"/versions/diff"),o)}async readDatasetOpenaiFinetuning(e){let{datasetId:t,datasetName:n}=e;if(void 0!==t);else{if(void 0===n)throw new Error("Must provide datasetName or datasetId");t=(await this.readDataset({datasetName:n})).id}const r=await this._getResponse("".concat("/datasets","/").concat(t,"/openai_ft"));return(await r.text()).trim().split("\n").map((e=>JSON.parse(e)))}listDatasets(){try{var e=this;let{limit:t=100,offset:n=0,datasetIds:r,datasetName:a,datasetNameContains:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const o=new URLSearchParams({limit:t.toString(),offset:n.toString()});if(void 0!==r)for(const e of r)o.append("id",e);void 0!==a&&o.append("name",a),void 0!==i&&o.append("name_contains",i);for await(const t of e._getPaginated("/datasets",o))yield*t}()}catch(t){return Promise.reject(t)}}async deleteDataset(e){let{datasetId:t,datasetName:n}=e,r="/datasets",a=t;if(void 0!==t&&void 0!==n)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==n){a=(await this.readDataset({datasetName:n})).id}if(void 0===a)throw new Error("Must provide datasetName or datasetId");F(a),r+="/".concat(a);const i=await this.caller.call(fetch,this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(!i.ok)throw new Error("Failed to delete ".concat(r,": ").concat(i.status," ").concat(i.statusText));await i.json()}async createExample(e,t,n){let{datasetId:r,datasetName:a,createdAt:i,exampleId:o,metadata:s}=n,l=r;if(void 0===l&&void 0===a)throw new Error("Must provide either datasetName or datasetId");if(void 0!==l&&void 0!==a)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===l){l=(await this.readDataset({datasetName:a})).id}const c=i||new Date,u={dataset_id:l,inputs:e,outputs:t,created_at:null===c||void 0===c?void 0:c.toISOString(),id:o,metadata:s},d=await this.caller.call(fetch,"".concat(this.apiUrl,"/examples"),{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(!d.ok)throw new Error("Failed to create example: ".concat(d.status," ").concat(d.statusText));return await d.json()}async createExamples(e){const{inputs:t,outputs:n,metadata:r,sourceRunIds:a,exampleIds:i,datasetId:o,datasetName:s}=e;let l=o;if(void 0===l&&void 0===s)throw new Error("Must provide either datasetName or datasetId");if(void 0!==l&&void 0!==s)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===l){const e=await this.readDataset({datasetName:s});l=e.id}const c=t.map(((e,t)=>({dataset_id:l,inputs:e,outputs:n?n[t]:void 0,metadata:r?r[t]:void 0,id:i?i[t]:void 0,source_run_id:a?a[t]:void 0}))),u=await this.caller.call(fetch,"".concat(this.apiUrl,"/examples/bulk"),{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(!u.ok)throw new Error("Failed to create examples: ".concat(u.status," ").concat(u.statusText));return await u.json()}async createLLMExample(e,t,n){return this.createExample({input:e},{output:t},n)}async createChatExample(e,t,n){const r=e.map((e=>E(e)?P(e):e)),a=E(t)?P(t):t;return this.createExample({input:r},{output:a},n)}async readExample(e){F(e);const t="/examples/".concat(e);return await this._get(t)}listExamples(){try{var e=this;let{datasetId:t,datasetName:n,exampleIds:r,asOf:a,inlineS3Urls:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){let o;if(void 0!==t&&void 0!==n)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==t)o=t;else{if(void 0===n)throw new Error("Must provide a datasetName or datasetId");o=(await e.readDataset({datasetName:n})).id}const s=new URLSearchParams({dataset:o}),l=a?"string"===typeof a?a:null===a||void 0===a?void 0:a.toISOString():void 0;l&&s.append("as_of",l);const c=null===i||void 0===i||i;if(s.append("inline_s3_urls",c.toString()),void 0!==r)for(const e of r)s.append("id",e);for await(const t of e._getPaginated("/examples",s))yield*t}()}catch(t){return Promise.reject(t)}}async deleteExample(e){F(e);const t="/examples/".concat(e),n=await this.caller.call(fetch,this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(!n.ok)throw new Error("Failed to delete ".concat(t,": ").concat(n.status," ").concat(n.statusText));await n.json()}async updateExample(e,t){F(e);const n=await this.caller.call(fetch,"".concat(this.apiUrl,"/examples/").concat(e),{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(!n.ok)throw new Error("Failed to update example ".concat(e,": ").concat(n.status," ").concat(n.statusText));return await n.json()}async evaluateRun(e,t){var n;let r,{sourceInfo:a,loadChildRuns:i,referenceExample:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{loadChildRuns:!1};if("string"===typeof e)r=await this.readRun(e,{loadChildRuns:i});else{if("object"!==typeof e||!("id"in e))throw new Error("Invalid run type: ".concat(typeof e));r=e}null!==r.reference_example_id&&void 0!==r.reference_example_id&&(o=await this.readExample(r.reference_example_id));const s=await t.evaluateRun(r,o);let l=null!==a&&void 0!==a?a:{};s.evaluatorInfo&&(l={...l,...s.evaluatorInfo});const c=null!==(n=s.targetRunId)&&void 0!==n?n:r.id;return await this.createFeedback(c,s.key,{score:null===s||void 0===s?void 0:s.score,value:null===s||void 0===s?void 0:s.value,comment:null===s||void 0===s?void 0:s.comment,correction:null===s||void 0===s?void 0:s.correction,sourceInfo:l,feedbackSourceType:"model",sourceRunId:null===s||void 0===s?void 0:s.sourceRunId})}async createFeedback(e,t,n){var r;let{score:a,value:i,correction:o,comment:s,sourceInfo:l,feedbackSourceType:c="api",sourceRunId:u,feedbackId:d,feedbackConfig:h}=n;const f={type:null!==c&&void 0!==c?c:"api",metadata:null!==l&&void 0!==l?l:{}};void 0===u||void 0===(null===f||void 0===f?void 0:f.metadata)||f.metadata.__run||(f.metadata.__run={run_id:u}),void 0!==(null===f||void 0===f?void 0:f.metadata)&&void 0!==(null===(r=f.metadata.__run)||void 0===r?void 0:r.run_id)&&F(f.metadata.__run.run_id);const p={id:null!==d&&void 0!==d?d:w(),run_id:e,key:t,score:a,value:i,correction:o,comment:s,feedback_source:f,feedbackConfig:h},m="".concat(this.apiUrl,"/feedback"),v=await this.caller.call(fetch,m,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(p),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await z(v,"create feedback"),p}async updateFeedback(e,t){let{score:n,value:r,correction:a,comment:i}=t;const o={};void 0!==n&&null!==n&&(o.score=n),void 0!==r&&null!==r&&(o.value=r),void 0!==a&&null!==a&&(o.correction=a),void 0!==i&&null!==i&&(o.comment=i),F(e);const s=await this.caller.call(fetch,"".concat(this.apiUrl,"/feedback/").concat(e),{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await z(s,"update feedback")}async readFeedback(e){F(e);const t="/feedback/".concat(e);return await this._get(t)}async deleteFeedback(e){F(e);const t="/feedback/".concat(e),n=await this.caller.call(fetch,this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(!n.ok)throw new Error("Failed to delete ".concat(t,": ").concat(n.status," ").concat(n.statusText));await n.json()}listFeedback(){try{var e=this;let{runIds:t,feedbackKeys:n,feedbackSourceTypes:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const a=new URLSearchParams;if(t&&a.append("run",t.join(",")),n)for(const e of n)a.append("key",e);if(r)for(const e of r)a.append("source",e);for await(const t of e._getPaginated("/feedback",a))yield*t}()}catch(t){return Promise.reject(t)}}async createPresignedFeedbackToken(e,t){let{expiration:n,feedbackConfig:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a={run_id:e,feedback_key:t,feedback_config:r};n?"string"===typeof n?a.expires_at=n:(null!==n&&void 0!==n&&n.hours||null!==n&&void 0!==n&&n.minutes||null!==n&&void 0!==n&&n.days)&&(a.expires_in=n):a.expires_in={hours:3};const i=await this.caller.call(fetch,"".concat(this.apiUrl,"/feedback/tokens"),{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await i.json()}async*listPresignedFeedbackTokens(e){F(e);const t=new URLSearchParams({run_id:e});for await(const n of this._getPaginated("/feedback/tokens",t))yield*n}}const V="0.1.20";var H=n(4070);class W extends o.J{constructor(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:n,projectName:r,client:a}=t;this.projectName=null!==(e=null!==r&&void 0!==r?r:(0,H.Az)("LANGCHAIN_PROJECT"))&&void 0!==e?e:(0,H.Az)("LANGCHAIN_SESSION"),this.exampleId=n,this.client=null!==a&&void 0!==a?a:new Z({})}async _convertToCreate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return{...e,extra:{...e.extra,runtime:await(0,H.Ec)()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:t}}async persistRun(e){}async onRunCreate(e){const t=await this._convertToCreate(e,this.exampleId);await this.client.createRun(t)}async onRunUpdate(e){const t={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs,trace_id:e.trace_id,dotted_order:e.dotted_order,parent_run_id:e.parent_run_id};await this.client.updateRun(e.id,t)}getRun(e){return this.runMap.get(e)}}var q=n(8768);o.J;let $;async function K(e,t){!0===t?await e():("undefined"===typeof $&&($=new(0,k.default)({autoStart:!0,concurrency:1})),$.add(e))}function J(e){return e?Array.isArray(e)||"name"in e?{callbacks:e}:e:{}}"true"===(0,H.Az)("LANGCHAIN_TRACING_V2")&&"true"!==(0,H.Az)("LANGCHAIN_CALLBACKS_BACKGROUND")&&["[WARN]: You have enabled LangSmith tracing without backgrounding callbacks.","[WARN]: If you are not using a serverless environment where you must wait for tracing calls to finish,",'[WARN]: we suggest setting "process.env.LANGCHAIN_CALLBACKS_BACKGROUND=true" to avoid additional latency.'].join("\n");class Y{setHandler(e){return this.setHandlers([e])}}class G{constructor(e,t,n,r,a,i,o,s){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:s})}async handleText(e){await Promise.all(this.handlers.map((t=>K((async()=>{try{var n;await(null===(n=t.handleText)||void 0===n?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(r){console.error("Error in handler ".concat(t.constructor.name,", handleText: ").concat(r))}}),t.awaitHandlers))))}}class Q extends G{getChild(e){const t=new ne(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleRetrieverEnd(e){await Promise.all(this.handlers.map((t=>K((async()=>{if(!t.ignoreRetriever)try{var n;await(null===(n=t.handleRetrieverEnd)||void 0===n?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(r){console.error("Error in handler ".concat(t.constructor.name,", handleRetriever"))}}),t.awaitHandlers))))}async handleRetrieverError(e){await Promise.all(this.handlers.map((t=>K((async()=>{if(!t.ignoreRetriever)try{var n;await(null===(n=t.handleRetrieverError)||void 0===n?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(r){console.error("Error in handler ".concat(t.constructor.name,", handleRetrieverError: ").concat(r))}}),t.awaitHandlers))))}}class X extends G{async handleLLMNewToken(e,t,n,r,a,i){await Promise.all(this.handlers.map((n=>K((async()=>{if(!n.ignoreLLM)try{var r;await(null===(r=n.handleLLMNewToken)||void 0===r?void 0:r.call(n,e,null!==t&&void 0!==t?t:{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,i))}catch(a){console.error("Error in handler ".concat(n.constructor.name,", handleLLMNewToken: ").concat(a))}}),n.awaitHandlers))))}async handleLLMError(e){await Promise.all(this.handlers.map((t=>K((async()=>{if(!t.ignoreLLM)try{var n;await(null===(n=t.handleLLMError)||void 0===n?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(e){console.error("Error in handler ".concat(t.constructor.name,", handleLLMError: ").concat(e))}}),t.awaitHandlers))))}async handleLLMEnd(e){await Promise.all(this.handlers.map((t=>K((async()=>{if(!t.ignoreLLM)try{var n;await(null===(n=t.handleLLMEnd)||void 0===n?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(r){console.error("Error in handler ".concat(t.constructor.name,", handleLLMEnd: ").concat(r))}}),t.awaitHandlers))))}}class ee extends G{getChild(e){const t=new ne(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleChainError(e,t,n,r,a){await Promise.all(this.handlers.map((t=>K((async()=>{if(!t.ignoreChain)try{var n;await(null===(n=t.handleChainError)||void 0===n?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags,a))}catch(e){console.error("Error in handler ".concat(t.constructor.name,", handleChainError: ").concat(e))}}),t.awaitHandlers))))}async handleChainEnd(e,t,n,r,a){await Promise.all(this.handlers.map((t=>K((async()=>{if(!t.ignoreChain)try{var n;await(null===(n=t.handleChainEnd)||void 0===n?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags,a))}catch(r){console.error("Error in handler ".concat(t.constructor.name,", handleChainEnd: ").concat(r))}}),t.awaitHandlers))))}async handleAgentAction(e){await Promise.all(this.handlers.map((t=>K((async()=>{if(!t.ignoreAgent)try{var n;await(null===(n=t.handleAgentAction)||void 0===n?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(r){console.error("Error in handler ".concat(t.constructor.name,", handleAgentAction: ").concat(r))}}),t.awaitHandlers))))}async handleAgentEnd(e){await Promise.all(this.handlers.map((t=>K((async()=>{if(!t.ignoreAgent)try{var n;await(null===(n=t.handleAgentEnd)||void 0===n?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(r){console.error("Error in handler ".concat(t.constructor.name,", handleAgentEnd: ").concat(r))}}),t.awaitHandlers))))}}class te extends G{getChild(e){const t=new ne(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleToolError(e){await Promise.all(this.handlers.map((t=>K((async()=>{if(!t.ignoreAgent)try{var n;await(null===(n=t.handleToolError)||void 0===n?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(e){console.error("Error in handler ".concat(t.constructor.name,", handleToolError: ").concat(e))}}),t.awaitHandlers))))}async handleToolEnd(e){await Promise.all(this.handlers.map((t=>K((async()=>{if(!t.ignoreAgent)try{var n;await(null===(n=t.handleToolEnd)||void 0===n?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(r){console.error("Error in handler ".concat(t.constructor.name,", handleToolEnd: ").concat(r))}}),t.awaitHandlers))))}}class ne extends Y{constructor(e,t){var n,r,a,i,o,s;super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=null!==(n=null===t||void 0===t?void 0:t.handlers)&&void 0!==n?n:this.handlers,this.inheritableHandlers=null!==(r=null===t||void 0===t?void 0:t.inheritableHandlers)&&void 0!==r?r:this.inheritableHandlers,this.tags=null!==(a=null===t||void 0===t?void 0:t.tags)&&void 0!==a?a:this.tags,this.inheritableTags=null!==(i=null===t||void 0===t?void 0:t.inheritableTags)&&void 0!==i?i:this.inheritableTags,this.metadata=null!==(o=null===t||void 0===t?void 0:t.metadata)&&void 0!==o?o:this.metadata,this.inheritableMetadata=null!==(s=null===t||void 0===t?void 0:t.inheritableMetadata)&&void 0!==s?s:this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;return Promise.all(t.map((async(t,o)=>{const s=0===o&&n?n:(0,r.A)();return await Promise.all(this.handlers.map((n=>K((async()=>{if(!n.ignoreLLM)try{var r;await(null===(r=n.handleLLMStart)||void 0===r?void 0:r.call(n,e,[t],s,this._parentRunId,a,this.tags,this.metadata,i))}catch(o){console.error("Error in handler ".concat(n.constructor.name,", handleLLMStart: ").concat(o))}}),n.awaitHandlers)))),new X(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})))}async handleChatModelStart(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;return Promise.all(t.map((async(t,o)=>{const s=0===o&&n?n:(0,r.A)();return await Promise.all(this.handlers.map((n=>K((async()=>{if(!n.ignoreLLM)try{var r;if(n.handleChatModelStart)await(null===(r=n.handleChatModelStart)||void 0===r?void 0:r.call(n,e,[t],s,this._parentRunId,a,this.tags,this.metadata,i));else if(n.handleLLMStart){var o;const r=(0,q.Sw)(t);await(null===(o=n.handleLLMStart)||void 0===o?void 0:o.call(n,e,[r],s,this._parentRunId,a,this.tags,this.metadata,i))}}catch(l){console.error("Error in handler ".concat(n.constructor.name,", handleLLMStart: ").concat(l))}}),n.awaitHandlers)))),new X(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})))}async handleChainStart(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,r.A)(),a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;return await Promise.all(this.handlers.map((r=>K((async()=>{if(!r.ignoreChain)try{var o;await(null===(o=r.handleChainStart)||void 0===o?void 0:o.call(r,e,t,n,this._parentRunId,this.tags,this.metadata,a,i))}catch(s){console.error("Error in handler ".concat(r.constructor.name,", handleChainStart: ").concat(s))}}),r.awaitHandlers)))),new ee(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,r.A)(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;return await Promise.all(this.handlers.map((r=>K((async()=>{if(!r.ignoreAgent)try{var i;await(null===(i=r.handleToolStart)||void 0===i?void 0:i.call(r,e,t,n,this._parentRunId,this.tags,this.metadata,a))}catch(o){console.error("Error in handler ".concat(r.constructor.name,", handleToolStart: ").concat(o))}}),r.awaitHandlers)))),new te(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,r.A)(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;return await Promise.all(this.handlers.map((r=>K((async()=>{if(!r.ignoreRetriever)try{var i;await(null===(i=r.handleRetrieverStart)||void 0===i?void 0:i.call(r,e,t,n,this._parentRunId,this.tags,this.metadata,a))}catch(o){console.error("Error in handler ".concat(r.constructor.name,", handleRetrieverStart: ").concat(o))}}),r.awaitHandlers)))),new Q(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}addHandler(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.handlers.push(e),t&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter((t=>t!==e)),this.inheritableHandlers=this.inheritableHandlers.filter((t=>t!==e))}setHandlers(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.handlers=[],this.inheritableHandlers=[];for(const n of e)this.addHandler(n,t)}addTags(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.removeTags(e),this.tags.push(...e),t&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter((t=>!e.includes(t))),this.inheritableTags=this.inheritableTags.filter((t=>!e.includes(t)))}addMetadata(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.metadata={...this.metadata,...e},t&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const t of Object.keys(e))delete this.metadata[t],delete this.inheritableMetadata[t]}copy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=new ne(this._parentRunId);for(const r of this.handlers){const e=this.inheritableHandlers.includes(r);n.addHandler(r,e)}for(const r of this.tags){const e=this.inheritableTags.includes(r);n.addTags([r],e)}for(const r of Object.keys(this.metadata)){const e=Object.keys(this.inheritableMetadata).includes(r);n.addMetadata({[r]:this.metadata[r]},e)}for(const r of e)n.handlers.filter((e=>"console_callback_handler"===e.name)).some((e=>e.name===r.name))||n.addHandler(r,t);return n}static fromHandlers(e){class t extends a.N{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:(0,r.A)()}),Object.assign(this,e)}}const n=new this;return n.addHandler(new t),n}static async configure(e,t,n,r,a,i,o){var s;let l;if(e||t){var c;if(Array.isArray(e)||!e)l=new ne,l.setHandlers(null!==(c=null===e||void 0===e?void 0:e.map(re))&&void 0!==c?c:[],!0);else l=e;l=l.copy(Array.isArray(t)?t.map(re):null===t||void 0===t?void 0:t.handlers,!1)}const u="true"===(0,H.Az)("LANGCHAIN_VERBOSE")||(null===o||void 0===o?void 0:o.verbose),h="true"===(0,H.Az)("LANGCHAIN_TRACING_V2"),f=h||null!==(s=(0,H.Az)("LANGCHAIN_TRACING"))&&void 0!==s&&s;if(u||f){if(l||(l=new ne),u&&!l.handlers.some((e=>e.name===d.prototype.name))){const e=new d;l.addHandler(e,!0)}f&&!l.handlers.some((e=>"langchain_tracer"===e.name))&&h&&l.addHandler(await async function(){return new W}(),!0)}return(n||r)&&l&&(l.addTags(null!==n&&void 0!==n?n:[]),l.addTags(null!==r&&void 0!==r?r:[],!1)),(a||i)&&l&&(l.addMetadata(null!==a&&void 0!==a?a:{}),l.addMetadata(null!==i&&void 0!==i?i:{},!1)),l}}function re(e){return"name"in e?e:a.N.fromMethods(e)}},7623:(e,t,n)=>{"use strict";n.d(t,{y:()=>c,Z:()=>l});var r=n(3047);n(9894);function a(e,t){return(null===t||void 0===t?void 0:t[e])||r(e)}function i(e,t,n){const r={};for(const a in e)Object.hasOwn(e,a)&&(r[t(a,n)]=e[a]);return r}function o(e){return Array.isArray(e)?[...e]:{...e}}function s(e,t){const n=o(e);for(const[r,a]of Object.entries(t)){const[e,...t]=r.split(".").reverse();let i=n;for(const n of t.reverse()){if(void 0===i[n])break;i[n]=o(i[n]),i=i[n]}void 0!==i[e]&&(i[e]={lc:1,type:"secret",id:[a]})}return n}function l(e){const t=Object.getPrototypeOf(e);return"function"===typeof e.lc_name&&("function"!==typeof t.lc_name||e.lc_name()!==t.lc_name())?e.lc_name():e.name}class c{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,l(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_kwargs=e||{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof c||"object"!==typeof this.lc_kwargs||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},t={},n=Object.keys(this.lc_kwargs).reduce(((e,t)=>(e[t]=t in this?this[t]:this.lc_kwargs[t],e)),{});for(let r=Object.getPrototypeOf(this);r;r=Object.getPrototypeOf(r))Object.assign(e,Reflect.get(r,"lc_aliases",this)),Object.assign(t,Reflect.get(r,"lc_secrets",this)),Object.assign(n,Reflect.get(r,"lc_attributes",this));return Object.keys(t).forEach((e=>{let t=this,r=n;const[a,...i]=e.split(".").reverse();for(const n of i.reverse()){if(!(n in t)||void 0===t[n])return;n in r&&void 0!==r[n]||("object"===typeof t[n]&&null!=t[n]?r[n]={}:Array.isArray(t[n])&&(r[n]=[])),t=t[n],r=r[n]}a in t&&void 0!==t[a]&&(r[a]=r[a]||t[a])})),{lc:1,type:"constructor",id:this.lc_id,kwargs:i(Object.keys(t).length?s(n,t):n,a,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}},1388:(e,t,n)=>{"use strict";n.d(t,{H:()=>l,KX:()=>s,Od:()=>o});var r=n(9523),a=n(543),i=n(6628);class o extends a.XQ{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,t){let n;if("string"===typeof e)n={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:null!==t&&void 0!==t?t:{}};else{var r;n=e;const t=null===(r=n.additional_kwargs)||void 0===r?void 0:r.tool_calls,s=n.tool_calls;null!=t&&t.length>0&&(void 0===s||0===s.length)&&console.warn(["New LangChain packages are available that more efficiently handle","tool calling.\n\nPlease upgrade your packages to versions that set","message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(null!=t&&void 0===s){const[e,r]=(0,i.p1)(t);n.tool_calls=null!==e&&void 0!==e?e:[],n.invalid_tool_calls=null!==r&&void 0!==r?r:[]}else{var a,o;n.tool_calls=null!==(a=n.tool_calls)&&void 0!==a?a:[],n.invalid_tool_calls=null!==(o=n.invalid_tool_calls)&&void 0!==o?o:[]}}catch(c){n.tool_calls=[],n.invalid_tool_calls=[]}}var s,l;(super(n),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),"string"!==typeof n)&&(this.tool_calls=null!==(s=n.tool_calls)&&void 0!==s?s:this.tool_calls,this.invalid_tool_calls=null!==(l=n.invalid_tool_calls)&&void 0!==l?l:this.invalid_tool_calls)}static lc_name(){return"AIMessage"}_getType(){return"ai"}}function s(e){return"ai"===e._getType()}class l extends a.gj{constructor(e){var t,n,a,i,o,s;let l;if("string"===typeof e)l={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(void 0===e.tool_call_chunks)l={...e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else{const t=[],n=[];for(const a of e.tool_call_chunks){let e={};try{var c,u,d;if(e=null!==(c=(0,r.d)(null!==(u=a.args)&&void 0!==u?u:"{}"))&&void 0!==c?c:{},"object"!==typeof e||Array.isArray(e))throw new Error("Malformed tool call chunk args.");t.push({name:null!==(d=a.name)&&void 0!==d?d:"",args:e,id:a.id})}catch(h){n.push({name:a.name,args:a.args,id:a.id,error:"Malformed args."})}}l={...e,tool_calls:t,invalid_tool_calls:n}}super(l),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.tool_call_chunks=null!==(t=null===(n=l)||void 0===n?void 0:n.tool_call_chunks)&&void 0!==t?t:this.tool_call_chunks,this.tool_calls=null!==(a=null===(i=l)||void 0===i?void 0:i.tool_calls)&&void 0!==a?a:this.tool_calls,this.invalid_tool_calls=null!==(o=null===(s=l)||void 0===s?void 0:s.invalid_tool_calls)&&void 0!==o?o:this.invalid_tool_calls}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}concat(e){const t={content:(0,a._I)(this.content,e.content),additional_kwargs:(0,a.ns)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,a.ns)(this.response_metadata,e.response_metadata),tool_call_chunks:[]};if(void 0!==this.tool_call_chunks||void 0!==e.tool_call_chunks){const n=(0,a.Vt)(this.tool_call_chunks,e.tool_call_chunks);void 0!==n&&n.length>0&&(t.tool_call_chunks=n)}return new l(t)}}},543:(e,t,n)=>{"use strict";n.d(t,{AJ:()=>u,Vt:()=>s,XQ:()=>i,_I:()=>a,gj:()=>l,ns:()=>o,ny:()=>c});var r=n(7623);function a(e,t){return"string"===typeof e?"string"===typeof t?e+t:[{type:"text",text:e},...t]:Array.isArray(t)?[...e,...t]:[...e,{type:"text",text:t}]}class i extends r.y{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return"string"===typeof this.content?this.content:""}constructor(e,t){"string"===typeof e&&(e={content:e,additional_kwargs:t,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}}function o(e,t){const n={...e};for(const[r,a]of Object.entries(t))if(null==n[r])n[r]=a;else{if(null==a)continue;if(typeof n[r]!==typeof a||Array.isArray(n[r])!==Array.isArray(a))throw new Error("field[".concat(r,"] already exists in the message chunk, but with a different type."));if("string"===typeof n[r])n[r]=n[r]+a;else if(Array.isArray(n[r])||"object"!==typeof n[r])if(Array.isArray(n[r]))n[r]=s(n[r],a);else{if(n[r]===a)continue;console.warn("field[".concat(r,"] already exists in this message chunk and value has unsupported type."))}else n[r]=o(n[r],a)}return n}function s(e,t){if(void 0!==e||void 0!==t){if(void 0===e||void 0===t)return e||t;{const n=[...e];for(const e of t)if("object"===typeof e&&"index"in e&&"number"===typeof e.index){const t=n.findIndex((t=>t.index===e.index));-1!==t?n[t]=o(n[t],e):n.push(e)}else n.push(e);return n}}}class l extends i{}function c(e){return"function"===typeof(null===e||void 0===e?void 0:e._getType)}function u(e){return c(e)&&"function"===typeof e.concat}},8024:(e,t,n)=>{"use strict";n.d(t,{X:()=>i,c:()=>a});var r=n(543);class a extends r.XQ{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return a}constructor(e,t){"string"===typeof e&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return"generic"===e._getType()}}class i extends r.gj{static lc_name(){return"ChatMessageChunk"}constructor(e,t){"string"===typeof e&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new i({content:(0,r._I)(this.content,e.content),additional_kwargs:(0,r.ns)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,r.ns)(this.response_metadata,e.response_metadata),role:this.role})}}},7522:(e,t,n)=>{"use strict";n.d(t,{F:()=>a});var r=n(543);r.XQ;class a extends r.gj{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){var t;return new a({content:(0,r._I)(this.content,e.content),additional_kwargs:(0,r.ns)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,r.ns)(this.response_metadata,e.response_metadata),name:null!==(t=this.name)&&void 0!==t?t:""})}}},141:(e,t,n)=>{"use strict";n.d(t,{a:()=>i,x:()=>a});var r=n(543);class a extends r.XQ{static lc_name(){return"HumanMessage"}_getType(){return"human"}}class i extends r.gj{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}concat(e){return new i({content:(0,r._I)(this.content,e.content),additional_kwargs:(0,r.ns)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,r.ns)(this.response_metadata,e.response_metadata)})}}},8768:(e,t,n)=>{"use strict";n.d(t,{FK:()=>o.F,H:()=>r.H,K0:()=>c.K0,KX:()=>r.KX,Od:()=>r.Od,Sw:()=>c.Sw,XQ:()=>a.XQ,XU:()=>i.X,a7:()=>s.a,cM:()=>i.c,dr:()=>u.dr,ny:()=>a.ny,tn:()=>l.t,uU:()=>l.u,xc:()=>s.x});var r=n(1388),a=n(543),i=n(8024),o=n(7522),s=n(141),l=n(8027),c=n(3753),u=n(6628)},8027:(e,t,n)=>{"use strict";n.d(t,{t:()=>a,u:()=>i});var r=n(543);class a extends r.XQ{static lc_name(){return"SystemMessage"}_getType(){return"system"}}class i extends r.gj{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}concat(e){return new i({content:(0,r._I)(this.content,e.content),additional_kwargs:(0,r.ns)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,r.ns)(this.response_metadata,e.response_metadata)})}}},6628:(e,t,n)=>{"use strict";n.d(t,{dr:()=>a,p1:()=>i});var r=n(543);r.XQ;class a extends r.gj{constructor(e){super(e),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id}static lc_name(){return"ToolMessageChunk"}_getType(){return"tool"}concat(e){return new a({content:(0,r._I)(this.content,e.content),additional_kwargs:(0,r.ns)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,r.ns)(this.response_metadata,e.response_metadata),tool_call_id:this.tool_call_id})}}function i(e){const t=[],n=[];for(const a of e)if(a.function){const e=a.function.name;try{const n={name:e||"",args:JSON.parse(a.function.arguments)||{},id:a.id};t.push(n)}catch(r){n.push({name:e,args:a.function.arguments,id:a.id,error:"Malformed args."})}}return[t,n]}},3753:(e,t,n)=>{"use strict";n.d(t,{K0:()=>c,Sw:()=>u,ih:()=>d});var r=n(543),a=n(141),i=n(1388),o=n(8027),s=n(8024),l=n(7522);n(6628);function c(e){if("string"===typeof e)return new a.x(e);if((0,r.ny)(e))return e;const[t,n]=e;if("human"===t||"user"===t)return new a.x({content:n});if("ai"===t||"assistant"===t)return new i.Od({content:n});if("system"===t)return new o.t({content:n});throw new Error("Unable to coerce message from array: only human, AI, or system message coercion is currently supported.")}function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Human",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"AI";const r=[];for(const a of e){let e;if("human"===a._getType())e=t;else if("ai"===a._getType())e=n;else if("system"===a._getType())e="System";else if("function"===a._getType())e="Function";else if("tool"===a._getType())e="Tool";else{if("generic"!==a._getType())throw new Error("Got unsupported message type: ".concat(a._getType()));e=a.role}const i=a.name?"".concat(a.name,", "):"";r.push("".concat(e,": ").concat(i).concat(a.content))}return r.join("\n")}function d(e){const t=e._getType();if("human"===t)return new a.a({...e});if("ai"===t)return new i.H({...e});if("system"===t)return new o.u({...e});if("function"===t)return new l.F({...e});if(s.c.isInstance(e))return new s.X({...e});throw new Error("Unknown message type.")}},1774:(e,t,n)=>{"use strict";n.d(t,{HY:()=>o,aB:()=>s,vX:()=>l});var r=n(7623),a=n(8768);class i extends r.y{}class o extends i{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new a.xc(this.value)]}}class s extends i{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return(0,a.Sw)(this.messages)}toChatMessages(){return this.messages}}class l extends i{static lc_name(){return"ImagePromptValue"}constructor(e){"imageUrl"in e||(e={imageUrl:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"imageUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.imageUrl=e.imageUrl}toString(){return this.imageUrl.url}toChatMessages(){return[new a.xc({content:[{type:"image_url",image_url:{detail:this.imageUrl.detail,url:this.imageUrl.url}}]})]}}},4778:(e,t,n)=>{"use strict";n.d(t,{m:()=>a});var r=n(5170);class a extends r.YN{get lc_attributes(){return{partialVariables:void 0}}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{inputVariables:t}=e;if(t.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}async mergePartialAndUserVariables(e){var t;const n=null!==(t=this.partialVariables)&&void 0!==t?t:{},r={};for(const[a,i]of Object.entries(n))r[a]="string"===typeof i?i:await i();return{...r,...e}}async invoke(e,t){return this._callWithConfig((e=>this.formatPromptValue(e)),e,{...t,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(e){switch(e._type){case"prompt":{const{PromptTemplate:t}=await Promise.resolve().then(n.bind(n,6933));return t.deserialize(e)}case void 0:{const{PromptTemplate:t}=await Promise.resolve().then(n.bind(n,6933));return t.deserialize({...e,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:t}=await Promise.resolve().then(n.bind(n,3492));return t.deserialize(e)}default:throw new Error("Invalid prompt type in config: ".concat(e._type))}}}},7717:(e,t,n)=>{"use strict";n.d(t,{RZ:()=>_,qF:()=>p});var r=n(8768),a=n(1774),i=n(5170),o=n(454),s=n(4778),l=n(6933),c=n(3330),u=n(3849);class d extends i.YN{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}async invoke(e,t){return this._callWithConfig((e=>this.formatMessages(e)),e,{...t,runType:"prompt"})}}class h extends d{static lc_name(){return"MessagesPlaceholder"}constructor(e){var t;"string"===typeof e&&(e={variableName:e}),super(e),Object.defineProperty(this,"variableName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"optional",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.variableName=e.variableName,this.optional=null!==(t=e.optional)&&void 0!==t&&t}get inputVariables(){return[this.variableName]}validateInputOrThrow(e,t){if(this.optional&&!e)return!1;if(!e){const e=new Error('Error: Field "'.concat(t,'" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages as an input value. Received: undefined'));throw e.name="InputFormatError",e}let n=!1;if(n=Array.isArray(e)?e.every((e=>(0,r.ny)(e))):(0,r.ny)(e),!n){const n="string"===typeof e?e:JSON.stringify(e,null,2),r=new Error('Error: Field "'.concat(t,'" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages as an input value. Received: ').concat(n));throw r.name="InputFormatError",r}return!0}async formatMessages(e){var t;return this.validateInputOrThrow(e[this.variableName],this.variableName),null!==(t=e[this.variableName])&&void 0!==t?t:[]}}class f extends d{constructor(e){"prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt}get inputVariables(){return this.prompt.inputVariables}async formatMessages(e){return[await this.format(e)]}}class p extends s.m{constructor(e){super(e)}async format(e){return(await this.formatPromptValue(e)).toString()}async formatPromptValue(e){const t=await this.formatMessages(e);return new a.aB(t)}}class m extends f{static lc_name(){return"ChatMessagePromptTemplate"}constructor(e,t){"prompt"in e||(e={prompt:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}async format(e){return new r.cM(await this.prompt.format(e),this.role)}static fromTemplate(e,t,n){return new this(l.PromptTemplate.fromTemplate(e,{templateFormat:null===n||void 0===n?void 0:n.templateFormat}),t)}}class v extends d{static _messageClass(){throw new Error("Can not invoke _messageClass from inside _StringImageMessagePromptTemplate")}constructor(e,t){if("prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"additionalOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"messageClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"chatMessageClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt,Array.isArray(this.prompt)){let e=[];this.prompt.forEach((t=>{"inputVariables"in t&&(e=e.concat(t.inputVariables))})),this.inputVariables=e}else this.inputVariables=this.prompt.inputVariables;this.additionalOptions=null!==t&&void 0!==t?t:this.additionalOptions}createMessage(e){const t=this.constructor;if(t._messageClass()){return new(t._messageClass())({content:e})}if(t.chatMessageClass){const n=t.chatMessageClass();return new n({content:e,role:this.getRoleFromMessageClass(n.lc_name())})}throw new Error("No message class defined")}getRoleFromMessageClass(e){switch(e){case"HumanMessage":return"human";case"AIMessage":return"ai";case"SystemMessage":return"system";case"ChatMessage":return"chat";default:throw new Error("Invalid message class name")}}static fromTemplate(e,t){if("string"===typeof e)return new this(l.PromptTemplate.fromTemplate(e,t));const n=[];for(const o of e)if("string"===typeof o||"object"===typeof o&&"text"in o){let e="";if("string"===typeof o)e=o;else if("string"===typeof o.text){var r;e=null!==(r=o.text)&&void 0!==r?r:""}n.push(l.PromptTemplate.fromTemplate(e))}else if("object"===typeof o&&"image_url"in o){var a;let e,t=null!==(a=o.image_url)&&void 0!==a?a:"",r=[];if("string"===typeof t){var i;const n=(0,u.D4)(t).flatMap((e=>"variable"===e.type?[e.name]:[]));if((null!==(i=null===n||void 0===n?void 0:n.length)&&void 0!==i?i:0)>0){if(n.length>1)throw new Error("Only one format variable allowed per image template.\nGot: ".concat(n,"\nFrom: ").concat(t));r=[n[0]]}else r=[];t={url:t},e=new c.C({template:t,inputVariables:r})}else{if("object"!==typeof t)throw new Error("Invalid image template");if("url"in t){r=(0,u.D4)(t.url).flatMap((e=>"variable"===e.type?[e.name]:[]))}else r=[];e=new c.C({template:t,inputVariables:r})}n.push(e)}return new this({prompt:n,additionalOptions:t})}async format(e){if(this.prompt instanceof o.L){const t=await this.prompt.format(e);return this.createMessage(t)}{const t=[];for(const n of this.prompt){let r={};if(!("inputVariables"in n))throw new Error("Prompt ".concat(n," does not have inputVariables defined."));for(const t of n.inputVariables)r||(r={[t]:e[t]}),r={...r,[t]:e[t]};if(n instanceof o.L){const e=await n.format(r);t.push({type:"text",text:e})}else if(n instanceof c.C){const e=await n.format(r);t.push({type:"image_url",image_url:e})}}return this.createMessage(t)}}async formatMessages(e){return[await this.format(e)]}}class g extends v{static _messageClass(){return r.xc}static lc_name(){return"HumanMessagePromptTemplate"}}class y extends v{static _messageClass(){return r.Od}static lc_name(){return"AIMessagePromptTemplate"}}class b extends v{static _messageClass(){return r.tn}static lc_name(){return"SystemMessagePromptTemplate"}}function w(e,t){if("function"===typeof e.formatMessages||(0,r.ny)(e))return e;if(Array.isArray(e)&&"placeholder"===e[0]){const t=e[1];if("string"!==typeof t||"{"!==t[0]||"}"!==t[t.length-1])throw new Error('Invalid placeholder template: "'.concat(e[1],'". Expected a variable name surrounded by curly braces.'));const n=t.slice(1,-1);return new h({variableName:n,optional:!0})}const n=(0,r.K0)(e);let a;if(a="string"===typeof n.content?n.content:n.content.map((e=>"text"in e?{text:e.text}:"image_url"in e?{image_url:e.image_url}:e)),"human"===n._getType())return g.fromTemplate(a,t);if("ai"===n._getType())return y.fromTemplate(a,t);if("system"===n._getType())return b.fromTemplate(a,t);if(r.cM.isInstance(n))return m.fromTemplate(n.content,n.role,t);throw new Error('Could not coerce message prompt template from input. Received message type: "'.concat(n._getType(),'".'))}class _ extends p{static lc_name(){return"ChatPromptTemplate"}get lc_aliases(){return{promptMessages:"messages"}}constructor(e){if(super(e),Object.defineProperty(this,"promptMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),"mustache"===e.templateFormat&&void 0===e.validateTemplate&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){const e=new Set;for(const o of this.promptMessages)if(!(o instanceof r.XQ))for(const t of o.inputVariables)e.add(t);const t=this.inputVariables,n=new Set(this.partialVariables?t.concat(Object.keys(this.partialVariables)):t),a=new Set([...n].filter((t=>!e.has(t))));if(a.size>0)throw new Error("Input variables `".concat([...a],"` are not used in any of the prompt messages."));const i=new Set([...e].filter((e=>!n.has(e))));if(i.size>0)throw new Error("Input variables `".concat([...i],"` are used in prompt messages but not in the prompt template."))}}_getPromptType(){return"chat"}async _parseImagePrompts(e,t){if("string"===typeof e.content)return e;const n=await Promise.all(e.content.map((async e=>{if("image_url"!==e.type)return e;let n="";n="string"===typeof e.image_url?e.image_url:e.image_url.url;const r=l.PromptTemplate.fromTemplate(n),a=await r.format(t);return"string"!==typeof e.image_url&&"url"in e.image_url?e.image_url.url=a:e.image_url=a,e})));return e.content=n,e}async formatMessages(e){const t=await this.mergePartialAndUserVariables(e);let n=[];for(const a of this.promptMessages)if(a instanceof r.XQ)n.push(await this._parseImagePrompts(a,t));else{const e=a.inputVariables.reduce(((e,n)=>{if(!(n in t)&&("MessagesPlaceholder"!==a.constructor.lc_name()||!a.optional))throw new Error("Missing value for input variable `".concat(n.toString(),"`"));return e[n]=t[n],e}),{}),r=await a.formatMessages(e);n=n.concat(r)}return n}async partial(e){var t;const n=this.inputVariables.filter((t=>!(t in e))),r={...null!==(t=this.partialVariables)&&void 0!==t?t:{},...e},a={...this,inputVariables:n,partialVariables:r};return new _(a)}static fromTemplate(e,t){const n=l.PromptTemplate.fromTemplate(e,t),r=new g({prompt:n});return this.fromMessages([r])}static fromMessages(e,t){const n=e.reduce(((e,n)=>e.concat(n instanceof _?n.promptMessages:[w(n,t)])),[]),a=e.reduce(((e,t)=>t instanceof _?Object.assign(e,t.partialVariables):e),Object.create(null)),i=new Set;for(const o of n)if(!(o instanceof r.XQ))for(const e of o.inputVariables)e in a||i.add(e);return new this({...t,inputVariables:[...i],promptMessages:n,partialVariables:a,templateFormat:null===t||void 0===t?void 0:t.templateFormat})}static fromPromptMessages(e){return this.fromMessages(e)}}},3492:(e,t,n)=>{"use strict";n.d(t,{FewShotPromptTemplate:()=>s});var r=n(454),a=n(3849),i=n(6933),o=n(7717);class s extends r.L{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"examples",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"examplePrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"suffix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"exampleSeparator",{enumerable:!0,configurable:!0,writable:!0,value:"\n\n"}),Object.defineProperty(this,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),void 0!==this.examples&&void 0!==this.exampleSelector)throw new Error("Only one of 'examples' and 'example_selector' should be provided");if(void 0===this.examples&&void 0===this.exampleSelector)throw new Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let e=this.inputVariables;this.partialVariables&&(e=e.concat(Object.keys(this.partialVariables))),(0,a.Ns)(this.prefix+this.suffix,this.templateFormat,e)}}_getPromptType(){return"few_shot"}static lc_name(){return"FewShotPromptTemplate"}async getExamples(e){if(void 0!==this.examples)return this.examples;if(void 0!==this.exampleSelector)return this.exampleSelector.selectExamples(e);throw new Error("One of 'examples' and 'example_selector' should be provided")}async partial(e){var t;const n=this.inputVariables.filter((t=>!(t in e))),r={...null!==(t=this.partialVariables)&&void 0!==t?t:{},...e},a={...this,inputVariables:n,partialVariables:r};return new s(a)}async format(e){const t=await this.mergePartialAndUserVariables(e),n=await this.getExamples(t),r=await Promise.all(n.map((e=>this.examplePrompt.format(e)))),i=[this.prefix,...r,this.suffix].join(this.exampleSeparator);return(0,a.Xm)(i,this.templateFormat,t)}serialize(){if(this.exampleSelector||!this.examples)throw new Error("Serializing an example selector is not currently supported");if(void 0!==this.outputParser)throw new Error("Serializing an output parser is not currently supported");return{_type:this._getPromptType(),input_variables:this.inputVariables,example_prompt:this.examplePrompt.serialize(),example_separator:this.exampleSeparator,suffix:this.suffix,prefix:this.prefix,template_format:this.templateFormat,examples:this.examples}}static async deserialize(e){const{example_prompt:t}=e;if(!t)throw new Error("Missing example prompt");const n=await i.PromptTemplate.deserialize(t);let r;if(!Array.isArray(e.examples))throw new Error("Invalid examples format. Only list or string are supported.");return r=e.examples,new s({inputVariables:e.input_variables,examplePrompt:n,examples:r,exampleSeparator:e.example_separator,prefix:e.prefix,suffix:e.suffix,templateFormat:e.template_format})}}o.qF},3330:(e,t,n)=>{"use strict";n.d(t,{C:()=>o});var r=n(1774),a=n(4778),i=n(3849);class o extends a.m{static lc_name(){return"ImagePromptTemplate"}constructor(e){var t,n;if(super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","image"]}),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.template=e.template,this.templateFormat=null!==(t=e.templateFormat)&&void 0!==t?t:this.templateFormat,this.validateTemplate=null!==(n=e.validateTemplate)&&void 0!==n?n:this.validateTemplate,this.validateTemplate){let e=this.inputVariables;this.partialVariables&&(e=e.concat(Object.keys(this.partialVariables))),(0,i.Ns)([{type:"image_url",image_url:this.template}],this.templateFormat,e)}}_getPromptType(){return"prompt"}async partial(e){var t;const n=this.inputVariables.filter((t=>!(t in e))),r={...null!==(t=this.partialVariables)&&void 0!==t?t:{},...e},a={...this,inputVariables:n,partialVariables:r};return new o(a)}async format(e){const t={};for(const[i,o]of Object.entries(this.template))t[i]="string"===typeof o?o.replace(/{([^{}]*)}/g,((t,n)=>{const r=e[n];return"string"===typeof r||"number"===typeof r?String(r):t})):o;const n=e.url||t.url,r=e.detail||t.detail;if(!n)throw new Error("Must provide either an image URL.");if("string"!==typeof n)throw new Error("url must be a string.");const a={url:n};return r&&(a.detail=r),a}async formatPromptValue(e){const t=await this.format(e);return new r.vX(t)}}},6933:(e,t,n)=>{"use strict";n.d(t,{PromptTemplate:()=>i});var r=n(454),a=n(3849);class i extends r.L{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),"mustache"===e.templateFormat&&void 0===e.validateTemplate&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){if("mustache"===this.templateFormat)throw new Error("Mustache templates cannot be validated.");let e=this.inputVariables;this.partialVariables&&(e=e.concat(Object.keys(this.partialVariables))),(0,a.Ns)(this.template,this.templateFormat,e)}}_getPromptType(){return"prompt"}async format(e){const t=await this.mergePartialAndUserVariables(e);return(0,a.Xm)(this.template,this.templateFormat,t)}static fromExamples(e,t,n){const r=[arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",...e,t].join(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"\n\n");return new i({inputVariables:n,template:r})}static fromTemplate(e,t){const{templateFormat:n="f-string",...r}=null!==t&&void 0!==t?t:{},o=new Set;return(0,a.QC)(e,n).forEach((e=>{"variable"===e.type&&o.add(e.name)})),new i({inputVariables:[...o],templateFormat:n,template:e,...r})}async partial(e){var t;const n=this.inputVariables.filter((t=>!(t in e))),r={...null!==(t=this.partialVariables)&&void 0!==t?t:{},...e},a={...this,inputVariables:n,partialVariables:r};return new i(a)}serialize(){if(void 0!==this.outputParser)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new i({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}}},454:(e,t,n)=>{"use strict";n.d(t,{L:()=>i});var r=n(1774),a=n(4778);class i extends a.m{async formatPromptValue(e){const t=await this.format(e);return new r.HY(t)}}},3849:(e,t,n)=>{"use strict";n.d(t,{Ns:()=>T,D4:()=>x,QC:()=>P,Xm:()=>E});var r=Object.prototype.toString,a=Array.isArray||function(e){return"[object Array]"===r.call(e)};function i(e){return"function"===typeof e}function o(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function s(e,t){return null!=e&&"object"===typeof e&&t in e}var l=RegExp.prototype.test;var c=/\S/;function u(e){return!function(e,t){return l.call(e,t)}(c,e)}var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var h=/\s*/,f=/\s+/,p=/\s*=/,m=/\s*\}/,v=/#|\^|\/|>|\{|&|=|!/;function g(e){this.string=e,this.tail=e,this.pos=0}function y(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function b(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}g.prototype.eos=function(){return""===this.tail},g.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},g.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},y.prototype.push=function(e){return new y(e,this)},y.prototype.lookup=function(e){var t,n,r,a=this.cache;if(a.hasOwnProperty(e))t=a[e];else{for(var o,l,c,u=this,d=!1;u;){if(e.indexOf(".")>0)for(o=u.view,l=e.split("."),c=0;null!=o&&c<l.length;)c===l.length-1&&(d=s(o,l[c])||(n=o,r=l[c],null!=n&&"object"!==typeof n&&n.hasOwnProperty&&n.hasOwnProperty(r))),o=o[l[c++]];else o=u.view[e],d=s(u.view,e);if(d){t=o;break}u=u.parent}a[e]=t}return i(t)&&(t=t.call(this.view)),t},b.prototype.clearCache=function(){"undefined"!==typeof this.templateCache&&this.templateCache.clear()},b.prototype.parse=function(e,t){var n=this.templateCache,r=e+":"+(t||w.tags).join(":"),i="undefined"!==typeof n,s=i?n.get(r):void 0;return void 0==s&&(s=function(e,t){if(!e)return[];var n,r,i,s=!1,l=[],c=[],d=[],y=!1,b=!1,_="",k=0;function x(){if(y&&!b)for(;d.length;)delete c[d.pop()];else d=[];y=!1,b=!1}function S(e){if("string"===typeof e&&(e=e.split(f,2)),!a(e)||2!==e.length)throw new Error("Invalid tags: "+e);n=new RegExp(o(e[0])+"\\s*"),r=new RegExp("\\s*"+o(e[1])),i=new RegExp("\\s*"+o("}"+e[1]))}S(t||w.tags);for(var O,E,P,T,C,A,I=new g(e);!I.eos();){if(O=I.pos,P=I.scanUntil(n))for(var N=0,j=P.length;N<j;++N)u(T=P.charAt(N))?(d.push(c.length),_+=T):(b=!0,s=!0,_+=" "),c.push(["text",T,O,O+1]),O+=1,"\n"===T&&(x(),_="",k=0,s=!1);if(!I.scan(n))break;if(y=!0,E=I.scan(v)||"name",I.scan(h),"="===E?(P=I.scanUntil(p),I.scan(p),I.scanUntil(r)):"{"===E?(P=I.scanUntil(i),I.scan(m),I.scanUntil(r),E="&"):P=I.scanUntil(r),!I.scan(r))throw new Error("Unclosed tag at "+I.pos);if(C=">"==E?[E,P,O,I.pos,_,k,s]:[E,P,O,I.pos],k++,c.push(C),"#"===E||"^"===E)l.push(C);else if("/"===E){if(!(A=l.pop()))throw new Error('Unopened section "'+P+'" at '+O);if(A[1]!==P)throw new Error('Unclosed section "'+A[1]+'" at '+O)}else"name"===E||"{"===E||"&"===E?b=!0:"="===E&&S(P)}if(x(),A=l.pop())throw new Error('Unclosed section "'+A[1]+'" at '+I.pos);return function(e){for(var t,n=[],r=n,a=[],i=0,o=e.length;i<o;++i)switch((t=e[i])[0]){case"#":case"^":r.push(t),a.push(t),r=t[4]=[];break;case"/":a.pop()[5]=t[2],r=a.length>0?a[a.length-1][4]:n;break;default:r.push(t)}return n}(function(e){for(var t,n,r=[],a=0,i=e.length;a<i;++a)(t=e[a])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}(c))}(e,t),i&&n.set(r,s)),s},b.prototype.render=function(e,t,n,r){var a=this.getConfigTags(r),i=this.parse(e,a),o=t instanceof y?t:new y(t,void 0);return this.renderTokens(i,o,n,e,r)},b.prototype.renderTokens=function(e,t,n,r,a){for(var i,o,s,l="",c=0,u=e.length;c<u;++c)s=void 0,"#"===(o=(i=e[c])[0])?s=this.renderSection(i,t,n,r,a):"^"===o?s=this.renderInverted(i,t,n,r,a):">"===o?s=this.renderPartial(i,t,n,a):"&"===o?s=this.unescapedValue(i,t):"name"===o?s=this.escapedValue(i,t,a):"text"===o&&(s=this.rawValue(i)),void 0!==s&&(l+=s);return l},b.prototype.renderSection=function(e,t,n,r,o){var s=this,l="",c=t.lookup(e[1]);if(c){if(a(c))for(var u=0,d=c.length;u<d;++u)l+=this.renderTokens(e[4],t.push(c[u]),n,r,o);else if("object"===typeof c||"string"===typeof c||"number"===typeof c)l+=this.renderTokens(e[4],t.push(c),n,r,o);else if(i(c)){if("string"!==typeof r)throw new Error("Cannot use higher-order sections without the original template");null!=(c=c.call(t.view,r.slice(e[3],e[5]),(function(e){return s.render(e,t,n,o)})))&&(l+=c)}else l+=this.renderTokens(e[4],t,n,r,o);return l}},b.prototype.renderInverted=function(e,t,n,r,i){var o=t.lookup(e[1]);if(!o||a(o)&&0===o.length)return this.renderTokens(e[4],t,n,r,i)},b.prototype.indentPartial=function(e,t,n){for(var r=t.replace(/[^ \t]/g,""),a=e.split("\n"),i=0;i<a.length;i++)a[i].length&&(i>0||!n)&&(a[i]=r+a[i]);return a.join("\n")},b.prototype.renderPartial=function(e,t,n,r){if(n){var a=this.getConfigTags(r),o=i(n)?n(e[1]):n[e[1]];if(null!=o){var s=e[6],l=e[5],c=e[4],u=o;0==l&&c&&(u=this.indentPartial(o,c,s));var d=this.parse(u,a);return this.renderTokens(d,t,n,u,r)}}},b.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},b.prototype.escapedValue=function(e,t,n){var r=this.getConfigEscape(n)||w.escape,a=t.lookup(e[1]);if(null!=a)return"number"===typeof a&&r===w.escape?String(a):r(a)},b.prototype.rawValue=function(e){return e[1]},b.prototype.getConfigTags=function(e){return a(e)?e:e&&"object"===typeof e?e.tags:void 0},b.prototype.getConfigEscape=function(e){return e&&"object"===typeof e&&!a(e)?e.escape:void 0};var w={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){_.templateCache=e},get templateCache(){return _.templateCache}},_=new b;w.clearCache=function(){return _.clearCache()},w.parse=function(e,t){return _.parse(e,t)},w.render=function(e,t,n,r){if("string"!==typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+((a(i=e)?"array":typeof i)+'" was given as the first argument for mustache#render(template, view, partials)'));var i;return _.render(e,t,n,r)},w.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return d[e]}))},w.Scanner=g,w.Context=y,w.Writer=b;const k=w,x=e=>{const t=e.split(""),n=[],r=(e,n)=>{for(let r=n;r<t.length;r+=1)if(e.includes(t[r]))return r;return-1};let a=0;for(;a<t.length;)if("{"===t[a]&&a+1<t.length&&"{"===t[a+1])n.push({type:"literal",text:"{"}),a+=2;else if("}"===t[a]&&a+1<t.length&&"}"===t[a+1])n.push({type:"literal",text:"}"}),a+=2;else if("{"===t[a]){const e=r("}",a);if(e<0)throw new Error("Unclosed '{' in template.");n.push({type:"variable",name:t.slice(a+1,e).join("")}),a=e+1}else{if("}"===t[a])throw new Error("Single '}' in template.");{const e=r("{}",a),i=(e<0?t.slice(a):t.slice(a,e)).join("");n.push({type:"literal",text:i}),a=e<0?t.length:e}}return n},S={"f-string":(e,t)=>x(e).reduce(((e,n)=>{if("variable"===n.type){if(n.name in t)return e+t[n.name];throw new Error("(f-string) Missing value for input ".concat(n.name))}return e+n.text}),""),mustache:(e,t)=>k.render(e,t)},O={"f-string":x,mustache:e=>(e=>e.map((e=>"name"===e[0]?{type:"variable",name:e[1].includes(".")?e[1].split(".")[0]:e[1]}:"#"===e[0]?{type:"variable",name:e[1]}:{type:"literal",text:e[1]})))(k.parse(e))},E=(e,t,n)=>S[t](e,n),P=(e,t)=>O[t](e),T=(e,t,n)=>{if(!(t in S)){const e=Object.keys(S);throw new Error("Invalid template format. Got `".concat(t,"`;\n                         should be one of ").concat(e))}try{const r=n.reduce(((e,t)=>(e[t]="foo",e)),{});Array.isArray(e)?e.forEach((e=>{if("text"===e.type)E(e.text,t,r);else{if("image_url"!==e.type)throw new Error("Invalid message template received. ".concat(JSON.stringify(e,null,2)));if("string"===typeof e.image_url)E(e.image_url,t,r);else{const n=e.image_url.url;E(n,t,r)}}})):E(e,t,r)}catch(r){throw new Error("Invalid prompt schema: ".concat(r.message))}}},5170:(e,t,n)=>{"use strict";n.d(t,{YN:()=>C,B2:()=>D,fJ:()=>A,jY:()=>M,ck:()=>R,zZ:()=>j,GH:()=>T,Bp:()=>z});var r=n(7665),a=n(6659),i=n(9341),o=n(6922),s=n(3653),l=n(261),c=n(8768);class u{constructor(e){var t;Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=null!==(t=e.ops)&&void 0!==t?t:[]}concat(e){const t=this.ops.concat(e.ops),n=(0,o.X6)({},t);return new d({ops:t,state:n[n.length-1].newDocument})}}class d extends u{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const t=this.ops.concat(e.ops),n=(0,o.X6)(this.state,e.ops);return new d({ops:t,state:n[n.length-1].newDocument})}static fromRunLogPatch(e){const t=(0,o.X6)({},e.ops);return new d({ops:e.ops,state:t[t.length-1].newDocument})}}async function h(e,t){if("original"===t)throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:n}=e;return["retriever","llm","prompt"].includes(e.run_type)?n:1!==Object.keys(n).length||""!==(null===n||void 0===n?void 0:n.input)?n.input:void 0}async function f(e,t){const{outputs:n}=e;return"original"===t||["retriever","llm","prompt"].includes(e.run_type)?n:void 0!==n&&1===Object.keys(n).length&&void 0!==(null===n||void 0===n?void 0:n.output)?n.output:n}class p extends s.J{constructor(e){var t,n;super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),this.autoClose=null===(t=null===e||void 0===e?void 0:e.autoClose)||void 0===t||t,this.includeNames=null===e||void 0===e?void 0:e.includeNames,this.includeTypes=null===e||void 0===e?void 0:e.includeTypes,this.includeTags=null===e||void 0===e?void 0:e.includeTags,this.excludeNames=null===e||void 0===e?void 0:e.excludeNames,this.excludeTypes=null===e||void 0===e?void 0:e.excludeTypes,this.excludeTags=null===e||void 0===e?void 0:e.excludeTags,this._schemaFormat=null!==(n=null===e||void 0===e?void 0:e._schemaFormat)&&void 0!==n?n:this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=l.bO.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){var t;if(e.id===this.rootId)return!1;const n=null!==(t=e.tags)&&void 0!==t?t:[];let r=void 0===this.includeNames&&void 0===this.includeTags&&void 0===this.includeTypes;return void 0!==this.includeNames&&(r=r||this.includeNames.includes(e.name)),void 0!==this.includeTypes&&(r=r||this.includeTypes.includes(e.run_type)),void 0!==this.includeTags&&(r=r||void 0!==n.find((e=>{var t;return null===(t=this.includeTags)||void 0===t?void 0:t.includes(e)}))),void 0!==this.excludeNames&&(r=r&&!this.excludeNames.includes(e.name)),void 0!==this.excludeTypes&&(r=r&&!this.excludeTypes.includes(e.run_type)),void 0!==this.excludeTags&&(r=r&&n.every((e=>{var t;return!(null!==(t=this.excludeTags)&&void 0!==t&&t.includes(e))}))),r}async*tapOutputIterable(e,t){for await(const n of t){if(e!==this.rootId){const t=this.keyMapByRunId[e];t&&await this.writer.write(new u({ops:[{op:"add",path:"/logs/".concat(t,"/streamed_output/-"),value:n}]}))}yield n}}async onRunCreate(e){var t,n,r;if(void 0===this.rootId&&(this.rootId=e.id,await this.writer.write(new u({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;void 0===this.counterMapByRunName[e.name]&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const a=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=1===a?e.name:"".concat(e.name,":").concat(a);const i={id:e.id,name:e.name,type:e.run_type,tags:null!==(t=e.tags)&&void 0!==t?t:[],metadata:null!==(n=null===(r=e.extra)||void 0===r?void 0:r.metadata)&&void 0!==n?n:{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};"streaming_events"===this._schemaFormat&&(i.inputs=await h(e,this._schemaFormat)),await this.writer.write(new u({ops:[{op:"add",path:"/logs/".concat(this.keyMapByRunId[e.id]),value:i}]}))}async onRunUpdate(e){try{const t=this.keyMapByRunId[e.id];if(void 0===t)return;const n=[];"streaming_events"===this._schemaFormat&&n.push({op:"replace",path:"/logs/".concat(t,"/inputs"),value:await h(e,this._schemaFormat)}),n.push({op:"add",path:"/logs/".concat(t,"/final_output"),value:await f(e,this._schemaFormat)}),void 0!==e.end_time&&n.push({op:"add",path:"/logs/".concat(t,"/end_time"),value:new Date(e.end_time).toISOString()});const r=new u({ops:n});await this.writer.write(r)}finally{if(e.id===this.rootId){const t=new u({ops:[{op:"replace",path:"/final_output",value:await f(e,this._schemaFormat)}]});await this.writer.write(t),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,t,n){const r=this.keyMapByRunId[e.id];if(void 0===r)return;let a;var i;a=void 0!==e.inputs.messages?void 0!==(i=null===n||void 0===n?void 0:n.chunk)&&void 0!==i.message?null===n||void 0===n?void 0:n.chunk:new c.H(t):t;const o=new u({ops:[{op:"add",path:"/logs/".concat(r,"/streamed_output_str/-"),value:t},{op:"add",path:"/logs/".concat(r,"/streamed_output/-"),value:a}]});await this.writer.write(o)}}var m=n(7623),v=n(1430),g=n(9263);class y extends s.J{constructor(e){let{config:t,onStart:n,onEnd:r,onError:a}=e;super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=t,this.argOnStart=n,this.argOnEnd=r,this.argOnError=a}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&(1===this.argOnStart.length?await this.argOnStart(e):2===this.argOnStart.length&&await this.argOnStart(e,this.config)))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&(1===this.argOnError.length?await this.argOnError(e):2===this.argOnError.length&&await this.argOnError(e,this.config)):this.argOnEnd&&(1===this.argOnEnd.length?await this.argOnEnd(e):2===this.argOnEnd.length&&await this.argOnEnd(e,this.config)))}}function b(e){return!!e&&e.lc_runnable}class w{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,t){var n;let r=void 0===this.includeNames&&void 0===this.includeTypes&&void 0===this.includeTags;const a=null!==(n=e.tags)&&void 0!==n?n:[];return void 0!==this.includeNames&&(r=r||this.includeNames.includes(e.name)),void 0!==this.includeTypes&&(r=r||this.includeTypes.includes(t)),void 0!==this.includeTags&&(r=r||a.some((e=>{var t;return null===(t=this.includeTags)||void 0===t?void 0:t.includes(e)}))),void 0!==this.excludeNames&&(r=r&&!this.excludeNames.includes(e.name)),void 0!==this.excludeTypes&&(r=r&&!this.excludeTypes.includes(t)),void 0!==this.excludeTags&&(r=r&&a.every((e=>{var t;return!(null!==(t=this.excludeTags)&&void 0!==t&&t.includes(e))}))),r}}var _=n(9582),k=n(6139);const x=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const S=function(e){return"string"===typeof e&&x.test(e)};var O=n(8693);function E(e){return b(e.data)?{type:"runnable",data:{id:e.data.lc_id,name:e.data.getName()}}:{type:"schema",data:{...(0,k.Ik)(e.data.schema),title:e.data.name}}}class P{constructor(){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]})}toJSON(){const e={};return Object.values(this.nodes).forEach(((t,n)=>{e[t.id]=S(t.id)?n:t.id})),{nodes:Object.values(this.nodes).map((t=>({id:e[t.id],...E(t)}))),edges:this.edges.map((t=>t.data?{source:e[t.source],target:e[t.target],data:t.data}:{source:e[t.source],target:e[t.target]}))}}addNode(e,t){if(void 0!==t&&void 0!==this.nodes[t])throw new Error("Node with id ".concat(t," already exists"));const n=t||(0,O.A)(),r={id:n,data:e};return this.nodes[n]=r,r}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter((t=>t.source!==e.id&&t.target!==e.id))}addEdge(e,t,n){if(void 0===this.nodes[e.id])throw new Error("Source node ".concat(e.id," not in graph"));if(void 0===this.nodes[t.id])throw new Error("Target node ".concat(t.id," not in graph"));const r={source:e.id,target:t.id,data:n};return this.edges.push(r),r}firstNode(){const e=new Set(this.edges.map((e=>e.target))),t=[];return Object.values(this.nodes).forEach((n=>{e.has(n.id)||t.push(n)})),t[0]}lastNode(){const e=new Set(this.edges.map((e=>e.source))),t=[];return Object.values(this.nodes).forEach((n=>{e.has(n.id)||t.push(n)})),t[0]}extend(e){Object.entries(e.nodes).forEach((e=>{let[t,n]=e;this.nodes[t]=n})),this.edges=[...this.edges,...e.edges]}trimFirstNode(){const e=this.firstNode();if(e){const t=this.edges.filter((t=>t.source===e.id));1!==Object.keys(this.nodes).length&&1!==t.length||this.removeNode(e)}}trimLastNode(){const e=this.lastNode();if(e){const t=this.edges.filter((t=>t.target===e.id));1!==Object.keys(this.nodes).length&&1!==t.length||this.removeNode(e)}}}function T(e,t){return!e||Array.isArray(e)||e instanceof Date||"object"!==typeof e?{[t]:e}:e}class C extends m.y{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){var t,n;const r=null!==(t=null!==(n=this.name)&&void 0!==n?n:this.constructor.lc_name())&&void 0!==t?t:this.constructor.name;return e?"".concat(r).concat(e):r}bind(e){return new A({bound:this,kwargs:e,config:{}})}map(){return new I({bound:this})}withRetry(e){return new N({bound:this,kwargs:{},config:{},maxAttemptNumber:null===e||void 0===e?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new A({bound:this,config:e,kwargs:{}})}withFallbacks(e){return new L({runnable:this,fallbacks:e.fallbacks})}_getOptionsList(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(Array.isArray(e)&&e.length!==t)throw new Error('Passed "options" must be an array with the same length as the inputs, but got '.concat(e.length," options for ").concat(t," inputs"));if(Array.isArray(e))return e.map(v.ZI);if(t>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const n=Object.fromEntries(Object.entries(e).filter((e=>{let[t]=e;return"runId"!==t})));return Array.from({length:t},((t,r)=>(0,v.ZI)(0===r?e:n)))}return Array.from({length:t},(()=>(0,v.ZI)(e)))}async batch(e,t,n){var r,a;const i=this._getOptionsList(null!==t&&void 0!==t?t:{},e.length),o=null!==(r=null===(a=i[0])||void 0===a?void 0:a.maxConcurrency)&&void 0!==r?r:null===n||void 0===n?void 0:n.maxConcurrency,s=new g.g({maxConcurrency:o,onFailedAttempt:e=>{throw e}}),l=e.map(((e,t)=>s.call((async()=>{try{return await this.invoke(e,i[t])}catch(r){if(null!==n&&void 0!==n&&n.returnExceptions)return r;throw r}}))));return Promise.all(l)}async*_streamIterator(e,t){yield this.invoke(e,t)}async stream(e,t){const n=new l.Tr(this._streamIterator(e,(0,v.ZI)(t)));return await n.setup,l.bO.fromAsyncGenerator(n)}_separateRunnableConfigFromCallOptions(e){let t;t=void 0===e?(0,v.ZI)(e):(0,v.ZI)({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId});const n={...e};return delete n.callbacks,delete n.tags,delete n.metadata,delete n.runName,delete n.configurable,delete n.recursionLimit,delete n.maxConcurrency,delete n.runId,[t,n]}async _callWithConfig(e,t,n){var r;const a=(0,v.ZI)(n),i=await(0,v.kJ)(a),o=await(null===i||void 0===i?void 0:i.handleChainStart(this.toJSON(),T(t,"input"),a.runId,null===a||void 0===a?void 0:a.runType,void 0,void 0,null!==(r=null===a||void 0===a?void 0:a.runName)&&void 0!==r?r:this.getName()));let s;delete a.runId;try{s=await e.call(this,t,a,o)}catch(l){throw await(null===o||void 0===o?void 0:o.handleChainError(l)),l}return await(null===o||void 0===o?void 0:o.handleChainEnd(T(s,"output"))),s}async _batchWithConfig(e,t,n,r){const a=this._getOptionsList(null!==n&&void 0!==n?n:{},t.length),i=await Promise.all(a.map(v.kJ)),o=await Promise.all(i.map((async(e,n)=>{var r;const i=await(null===e||void 0===e?void 0:e.handleChainStart(this.toJSON(),T(t[n],"input"),a[n].runId,a[n].runType,void 0,void 0,null!==(r=a[n].runName)&&void 0!==r?r:this.getName()));return delete a[n].runId,i})));let s;try{s=await e.call(this,t,a,o,r)}catch(l){throw await Promise.all(o.map((e=>null===e||void 0===e?void 0:e.handleChainError(l)))),l}return await Promise.all(o.map((e=>null===e||void 0===e?void 0:e.handleChainEnd(T(s,"output"))))),s}async*_transformStreamWithConfig(e,t,n){var r,a;let i,o,s=!0,c=!0;const u=(0,v.ZI)(n),d=await(0,v.kJ)(u);let h;try{var f;const n=await(0,l.DS)(t.bind(this),async function*(){for await(const t of e){if(s)if(void 0===i)i=t;else try{i=(0,l.xW)(i,t)}catch{i=void 0,s=!1}yield t}}(),(async()=>{var e;return null===d||void 0===d?void 0:d.handleChainStart(this.toJSON(),{input:""},u.runId,u.runType,void 0,void 0,null!==(e=u.runName)&&void 0!==e?e:this.getName())}),u);delete u.runId,h=n.setup;const r=e=>"log_stream_tracer"===e.name,a=null===(f=h)||void 0===f?void 0:f.handlers.find(r);let p=n.output;void 0!==a&&void 0!==h&&(p=await a.tapOutputIterable(h.runId,n.output));for await(const e of p)if(yield e,c)if(void 0===o)o=e;else try{o=(0,l.xW)(o,e)}catch{o=void 0,c=!1}}catch(m){var p;throw await(null===(p=h)||void 0===p?void 0:p.handleChainError(m,void 0,void 0,void 0,{inputs:T(i,"input")})),m}await(null===(r=h)||void 0===r?void 0:r.handleChainEnd(null!==(a=o)&&void 0!==a?a:{},void 0,void 0,void 0,{inputs:T(i,"input")}))}getGraph(e){const t=new P,n=t.addNode({name:"".concat(this.getName(),"Input"),schema:r.z.any()}),a=t.addNode(this),i=t.addNode({name:"".concat(this.getName(),"Output"),schema:r.z.any()});return t.addEdge(n,a),t.addEdge(a,i),t}pipe(e){return new j({first:this,last:z(e)})}pick(e){return this.pipe(new F(e))}assign(e){return this.pipe(new D(new R({steps:e})))}async*transform(e,t){let n;for await(const r of e)n=void 0===n?r:(0,l.xW)(n,r);yield*this._streamIterator(n,(0,v.ZI)(t))}async*streamLog(e,t,n){const r=new p({...n,autoClose:!1,_schemaFormat:"original"}),a=(0,v.ZI)(t);yield*this._streamLog(e,r,a)}async*_streamLog(e,t,n){const{callbacks:r}=n;if(void 0===r)n.callbacks=[t];else if(Array.isArray(r))n.callbacks=r.concat([t]);else{const e=r.copy();e.inheritableHandlers.push(t),n.callbacks=e}const a=this.stream(e,n);const i=async function(){try{const e=await a;for await(const n of e){const e=new u({ops:[{op:"add",path:"/streamed_output/-",value:n}]});await t.writer.write(e)}}finally{await t.writer.close()}}();try{for await(const e of t)yield e}finally{await i}}async*streamEvents(e,t,n){var r,a,i,o;if("v1"!==t.version)throw new Error('Only version "v1" of the events schema is currently supported.');let s,l=!1;const c=(0,v.ZI)(t),u=null!==(r=c.tags)&&void 0!==r?r:[],h=null!==(a=c.metadata)&&void 0!==a?a:{},f=null!==(i=c.runName)&&void 0!==i?i:this.getName(),m=new p({...n,autoClose:!1,_schemaFormat:"streaming_events"}),g=new w({...n}),y=this._streamLog(e,m,c);for await(const p of y){if(s=s?s.concat(p):d.fromRunLogPatch(p),void 0===s.state)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!l){l=!0;const t={...s.state},n={run_id:t.id,event:"on_".concat(t.type,"_start"),name:f,tags:u,metadata:h,data:{input:e}};g.includeEvent(n,t.type)&&(yield n)}const t=p.ops.filter((e=>e.path.startsWith("/logs/"))).map((e=>e.path.split("/")[2])),n=[...new Set(t)];for(const e of n){let t,n={};const r=s.state.logs[e];if(t=void 0===r.end_time?r.streamed_output.length>0?"stream":"start":"end","start"===t)void 0!==r.inputs&&(n.input=r.inputs);else if("end"===t)void 0!==r.inputs&&(n.input=r.inputs),n.output=r.final_output;else if("stream"===t){const e=r.streamed_output.length;if(1!==e)throw new Error("Expected exactly one chunk of streamed output, got ".concat(e,' instead. Encountered in: "').concat(r.name,'"'));n={chunk:r.streamed_output[0]},r.streamed_output=[]}yield{event:"on_".concat(r.type,"_").concat(t),name:r.name,run_id:r.id,tags:r.tags,metadata:r.metadata,data:n}}const{state:r}=s;if(r.streamed_output.length>0){const e=r.streamed_output.length;if(1!==e)throw new Error("Expected exactly one chunk of streamed output, got ".concat(e,' instead. Encountered in: "').concat(r.name,'"'));const t={chunk:r.streamed_output[0]};r.streamed_output=[];const n={event:"on_".concat(r.type,"_stream"),run_id:r.id,tags:u,metadata:h,name:f,data:t};g.includeEvent(n,r.type)&&(yield n)}}const b=null===(o=s)||void 0===o?void 0:o.state;if(void 0!==b){const e={event:"on_".concat(b.type,"_end"),name:f,run_id:b.id,tags:u,metadata:h,data:{output:b.final_output}};g.includeEvent(e,b.type)&&(yield e)}}static isRunnable(e){return b(e)}withListeners(e){let{onStart:t,onEnd:n,onError:r}=e;return new A({bound:this,config:{},configFactories:[e=>({callbacks:[new y({config:e,onStart:t,onEnd:n,onError:r})]})]})}}class A extends C{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=(0,v.SV)(this.config,...t);return(0,v.SV)(r,...this.configFactories?await Promise.all(this.configFactories.map((async e=>await e(r)))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new this.constructor({bound:this.bound.withRetry(e),kwargs:this.kwargs,config:this.config})}async invoke(e,t){return this.bound.invoke(e,await this._mergeConfig((0,v.ZI)(t),this.kwargs))}async batch(e,t,n){const r=Array.isArray(t)?await Promise.all(t.map((async e=>this._mergeConfig((0,v.ZI)(e),this.kwargs)))):await this._mergeConfig((0,v.ZI)(t),this.kwargs);return this.bound.batch(e,r,n)}async*_streamIterator(e,t){yield*this.bound._streamIterator(e,await this._mergeConfig((0,v.ZI)(t),this.kwargs))}async stream(e,t){return this.bound.stream(e,await this._mergeConfig((0,v.ZI)(t),this.kwargs))}async*transform(e,t){yield*this.bound.transform(e,await this._mergeConfig((0,v.ZI)(t),this.kwargs))}async*streamEvents(e,t,n){yield*this.bound.streamEvents(e,{...await this._mergeConfig((0,v.ZI)(t),this.kwargs),version:t.version},n)}static isRunnableBinding(e){return e.bound&&C.isRunnable(e.bound)}withListeners(e){let{onStart:t,onEnd:n,onError:r}=e;return new A({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[e=>({callbacks:[new y({config:e,onStart:t,onEnd:n,onError:r})]})]})}}class I extends C{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new I({bound:this.bound.bind(e)})}async invoke(e,t){return this._callWithConfig(this._invoke,e,t)}async _invoke(e,t,n){return this.bound.batch(e,(0,v.tn)(t,{callbacks:null===n||void 0===n?void 0:n.getChild()}))}withListeners(e){let{onStart:t,onEnd:n,onError:r}=e;return new I({bound:this.bound.withListeners({onStart:t,onEnd:n,onError:r})})}}class N extends A{static lc_name(){return"RunnableRetry"}constructor(e){var t,n;super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=null!==(t=e.maxAttemptNumber)&&void 0!==t?t:this.maxAttemptNumber,this.onFailedAttempt=null!==(n=e.onFailedAttempt)&&void 0!==n?n:this.onFailedAttempt}_patchConfigForRetry(e,t,n){const r=e>1?"retry:attempt:".concat(e):void 0;return(0,v.tn)(t,{callbacks:null===n||void 0===n?void 0:n.getChild(r)})}async _invoke(e,t,n){return a((r=>super.invoke(e,this._patchConfigForRetry(r,t,n))),{onFailedAttempt:t=>this.onFailedAttempt(t,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,t){return this._callWithConfig(this._invoke,e,t)}async _batch(e,t,n,r){const i={};try{await a((async a=>{const o=e.map(((e,t)=>t)).filter((e=>void 0===i[e.toString()]||i[e.toString()]instanceof Error)),s=o.map((t=>e[t])),l=o.map((e=>this._patchConfigForRetry(a,null===t||void 0===t?void 0:t[e],null===n||void 0===n?void 0:n[e]))),c=await super.batch(s,l,{...r,returnExceptions:!0});let u;for(let e=0;e<c.length;e+=1){const t=c[e],n=o[e];t instanceof Error&&void 0===u&&(u=t,u.input=s[e]),i[n.toString()]=t}if(u)throw u;return c}),{onFailedAttempt:e=>this.onFailedAttempt(e,e.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(o){if(!0!==(null===r||void 0===r?void 0:r.returnExceptions))throw o}return Object.keys(i).sort(((e,t)=>parseInt(e,10)-parseInt(t,10))).map((e=>i[parseInt(e,10)]))}async batch(e,t,n){return this._batchWithConfig(this._batch.bind(this),e,t,n)}}class j extends C{static lc_name(){return"RunnableSequence"}constructor(e){var t;super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=null!==(t=e.middle)&&void 0!==t?t:this.middle,this.last=e.last,this.name=e.name}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,t){const n=(0,v.ZI)(t),r=await(0,v.kJ)(n),a=await(null===r||void 0===r?void 0:r.handleChainStart(this.toJSON(),T(e,"input"),n.runId,void 0,void 0,void 0,null===n||void 0===n?void 0:n.runName));delete n.runId;let i,o=e;try{const e=[this.first,...this.middle];for(let t=0;t<e.length;t+=1){const r=e[t];o=await r.invoke(o,(0,v.tn)(n,{callbacks:null===a||void 0===a?void 0:a.getChild("seq:step:".concat(t+1))}))}i=await this.last.invoke(o,(0,v.tn)(n,{callbacks:null===a||void 0===a?void 0:a.getChild("seq:step:".concat(this.steps.length))}))}catch(s){throw await(null===a||void 0===a?void 0:a.handleChainError(s)),s}return await(null===a||void 0===a?void 0:a.handleChainEnd(T(i,"output"))),i}async batch(e,t,n){const r=this._getOptionsList(null!==t&&void 0!==t?t:{},e.length),a=await Promise.all(r.map(v.kJ)),i=await Promise.all(a.map((async(t,n)=>{const a=await(null===t||void 0===t?void 0:t.handleChainStart(this.toJSON(),T(e[n],"input"),r[n].runId,void 0,void 0,void 0,r[n].runName));return delete r[n].runId,a})));let o=e;try{for(let e=0;e<this.steps.length;e+=1){const t=this.steps[e];o=await t.batch(o,i.map(((t,n)=>{const a=null===t||void 0===t?void 0:t.getChild("seq:step:".concat(e+1));return(0,v.tn)(r[n],{callbacks:a})})),n)}}catch(s){throw await Promise.all(i.map((e=>null===e||void 0===e?void 0:e.handleChainError(s)))),s}return await Promise.all(i.map((e=>null===e||void 0===e?void 0:e.handleChainEnd(T(o,"output"))))),o}async*_streamIterator(e,t){const n=await(0,v.kJ)(t),{runId:r,...a}=null!==t&&void 0!==t?t:{},i=await(null===n||void 0===n?void 0:n.handleChainStart(this.toJSON(),T(e,"input"),r,void 0,void 0,void 0,null===a||void 0===a?void 0:a.runName)),o=[this.first,...this.middle,this.last];let s,c=!0;try{let t=o[0].transform(async function*(){yield e}(),(0,v.tn)(a,{callbacks:null===i||void 0===i?void 0:i.getChild("seq:step:1")}));for(let e=1;e<o.length;e+=1){const n=o[e];t=await n.transform(t,(0,v.tn)(a,{callbacks:null===i||void 0===i?void 0:i.getChild("seq:step:".concat(e+1))}))}for await(const e of t)if(yield e,c)if(void 0===s)s=e;else try{s=(0,l.xW)(s,e)}catch(u){s=void 0,c=!1}}catch(u){throw await(null===i||void 0===i?void 0:i.handleChainError(u)),u}await(null===i||void 0===i?void 0:i.handleChainEnd(T(s,"output")))}getGraph(e){const t=new P;let n=null;return this.steps.forEach(((r,a)=>{const i=r.getGraph(e);0!==a&&i.trimFirstNode(),a!==this.steps.length-1&&i.trimLastNode(),t.extend(i);const o=i.firstNode();if(!o)throw new Error("Runnable ".concat(r," has no first node"));n&&t.addEdge(n,o),n=i.lastNode()})),t}pipe(e){var t;return j.isRunnableSequence(e)?new j({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:null!==(t=this.name)&&void 0!==t?t:e.name}):new j({first:this.first,middle:[...this.middle,this.last],last:z(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&C.isRunnable(e)}static from(e,t){let[n,...r]=e;return new j({first:z(n),middle:r.slice(0,-1).map(z),last:z(r[r.length-1]),name:t})}}class R extends C{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[t,n]of Object.entries(e.steps))this.steps[t]=z(n)}static from(e){return new R({steps:e})}async invoke(e,t){const n=(0,v.ZI)(t),r=await(0,v.kJ)(n),a=await(null===r||void 0===r?void 0:r.handleChainStart(this.toJSON(),{input:e},n.runId,void 0,void 0,void 0,null===n||void 0===n?void 0:n.runName));delete n.runId;const i={};try{await Promise.all(Object.entries(this.steps).map((async t=>{let[r,o]=t;i[r]=await o.invoke(e,(0,v.tn)(n,{callbacks:null===a||void 0===a?void 0:a.getChild("map:key:".concat(r))}))})))}catch(o){throw await(null===a||void 0===a?void 0:a.handleChainError(o)),o}return await(null===a||void 0===a?void 0:a.handleChainEnd(i)),i}async*_transform(e,t,n){const r={...this.steps},a=(0,l.gI)(e,Object.keys(r).length),i=new Map(Object.entries(r).map(((e,r)=>{let[i,o]=e;const s=o.transform(a[r],(0,v.tn)(n,{callbacks:null===t||void 0===t?void 0:t.getChild("map:key:".concat(i))}));return[i,s.next().then((e=>({key:i,gen:s,result:e})))]})));for(;i.size;){const{key:e,result:t,gen:n}=await Promise.race(i.values());i.delete(e),t.done||(yield{[e]:t.value},i.set(e,n.next().then((t=>({key:e,gen:n,result:t})))))}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){const n=new l.Tr(this.transform(async function*(){yield e}(),t));return await n.setup,l.bO.fromAsyncGenerator(n)}}class M extends C{static lc_name(){return"RunnableLambda"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.func=e.func}static from(e){return new M({func:e})}async _invoke(e,t,n){return new Promise(((r,a)=>{var i;const o=(0,v.tn)(t,{callbacks:null===n||void 0===n?void 0:n.getChild(),recursionLimit:(null!==(i=null===t||void 0===t?void 0:t.recursionLimit)&&void 0!==i?i:v.p_)-1});_.N.getInstance().run(o,(async()=>{try{let a=await this.func(e,{...o,config:o});if(a&&C.isRunnable(a)){var n;if(0===(null===t||void 0===t?void 0:t.recursionLimit))throw new Error("Recursion limit reached.");a=await a.invoke(e,{...o,recursionLimit:(null!==(n=o.recursionLimit)&&void 0!==n?n:v.p_)-1})}r(a)}catch(i){a(i)}}))}))}async invoke(e,t){return this._callWithConfig(this._invoke,e,t)}async*_transform(e,t,n){let r;for await(const s of e)if(void 0===r)r=s;else try{r=(0,l.xW)(r,s)}catch(o){r=s}const a=await new Promise(((e,t)=>{_.N.getInstance().run(n,(async()=>{try{const t=await this.func(r,{...n,config:n});e(t)}catch(o){t(o)}}))}));if(a&&C.isRunnable(a)){var i;if(0===(null===n||void 0===n?void 0:n.recursionLimit))throw new Error("Recursion limit reached.");const e=await a.stream(r,(0,v.tn)(n,{callbacks:null===t||void 0===t?void 0:t.getChild(),recursionLimit:(null!==(i=null===n||void 0===n?void 0:n.recursionLimit)&&void 0!==i?i:v.p_)-1}));for await(const t of e)yield t}else yield a}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){const n=new l.Tr(this.transform(async function*(){yield e}(),t));return await n.setup,l.bO.fromAsyncGenerator(n)}}class L extends C{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,t){const n=await i.Td.configure(null===t||void 0===t?void 0:t.callbacks,void 0,null===t||void 0===t?void 0:t.tags,void 0,null===t||void 0===t?void 0:t.metadata),{runId:r,...a}=null!==t&&void 0!==t?t:{},o=await(null===n||void 0===n?void 0:n.handleChainStart(this.toJSON(),T(e,"input"),r,void 0,void 0,void 0,null===a||void 0===a?void 0:a.runName));let s;for(const i of this.runnables())try{const t=await i.invoke(e,(0,v.tn)(a,{callbacks:null===o||void 0===o?void 0:o.getChild()}));return await(null===o||void 0===o?void 0:o.handleChainEnd(T(t,"output"))),t}catch(l){void 0===s&&(s=l)}if(void 0===s)throw new Error("No error stored at end of fallback.");throw await(null===o||void 0===o?void 0:o.handleChainError(s)),s}async batch(e,t,n){if(null!==n&&void 0!==n&&n.returnExceptions)throw new Error("Not implemented.");const r=this._getOptionsList(null!==t&&void 0!==t?t:{},e.length),a=await Promise.all(r.map((e=>i.Td.configure(null===e||void 0===e?void 0:e.callbacks,void 0,null===e||void 0===e?void 0:e.tags,void 0,null===e||void 0===e?void 0:e.metadata)))),o=await Promise.all(a.map((async(t,n)=>{const a=await(null===t||void 0===t?void 0:t.handleChainStart(this.toJSON(),T(e[n],"input"),r[n].runId,void 0,void 0,void 0,r[n].runName));return delete r[n].runId,a})));let s;for(const i of this.runnables())try{const t=await i.batch(e,o.map(((e,t)=>(0,v.tn)(r[t],{callbacks:null===e||void 0===e?void 0:e.getChild()}))),n);return await Promise.all(o.map(((e,n)=>null===e||void 0===e?void 0:e.handleChainEnd(T(t[n],"output"))))),t}catch(l){void 0===s&&(s=l)}if(!s)throw new Error("No error stored at end of fallbacks.");throw await Promise.all(o.map((e=>null===e||void 0===e?void 0:e.handleChainError(s)))),s}}function z(e){if("function"===typeof e)return new M({func:e});if(C.isRunnable(e))return e;if(Array.isArray(e)||"object"!==typeof e)throw new Error("Expected a Runnable, function or object.\nInstead got an unsupported type.");{const t={};for(const[n,r]of Object.entries(e))t[n]=z(r);return new R({steps:t})}}class D extends C{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof R&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,t){const n=await this.mapper.invoke(e,t);return{...e,...n}}async*_transform(e,t,n){const r=this.mapper.getStepsKeys(),[a,i]=(0,l.gI)(e),o=this.mapper.transform(i,(0,v.tn)(n,{callbacks:null===t||void 0===t?void 0:t.getChild()})),s=o.next();for await(const l of a){if("object"!==typeof l||Array.isArray(l))throw new Error("RunnableAssign can only be used with objects as input, got ".concat(typeof l));const e=Object.fromEntries(Object.entries(l).filter((e=>{let[t]=e;return!r.includes(t)})));Object.keys(e).length>0&&(yield e)}yield(await s).value;for await(const l of o)yield l}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){const n=new l.Tr(this.transform(async function*(){yield e}(),t));return await n.setup,l.bO.fromAsyncGenerator(n)}}class F extends C{static lc_name(){return"RunnablePick"}constructor(e){("string"===typeof e||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if("string"===typeof this.keys)return e[this.keys];{const t=this.keys.map((t=>[t,e[t]])).filter((e=>void 0!==e[1]));return 0===t.length?void 0:Object.fromEntries(t)}}async invoke(e,t){return this._callWithConfig(this._pick.bind(this),e,t)}async*_transform(e){for await(const t of e){const e=await this._pick(t);void 0!==e&&(yield e)}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){const n=new l.Tr(this.transform(async function*(){yield e}(),t));return await n.setup,l.bO.fromAsyncGenerator(n)}}},1430:(e,t,n)=>{"use strict";n.d(t,{SV:()=>s,ZI:()=>c,kJ:()=>o,p_:()=>i,tn:()=>u});var r=n(9341),a=n(9582);const i=25;async function o(e){return r.Td.configure(null===e||void 0===e?void 0:e.callbacks,void 0,null===e||void 0===e?void 0:e.tags,void 0,null===e||void 0===e?void 0:e.metadata)}function s(){const e={};for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];for(const l of n.filter((e=>!!e)))for(const t of Object.keys(l))if("metadata"===t)e[t]={...e[t],...l[t]};else if("tags"===t){var i,o;const n=null!==(i=e[t])&&void 0!==i?i:[];e[t]=[...new Set(n.concat(null!==(o=l[t])&&void 0!==o?o:[]))]}else if("configurable"===t)e[t]={...e[t],...l[t]};else if("callbacks"===t){const t=e.callbacks,n=l.callbacks;if(Array.isArray(n))if(t)if(Array.isArray(t))e.callbacks=t.concat(n);else{const a=t.copy();for(const e of n)a.addHandler((0,r.tW)(e),!0);e.callbacks=a}else e.callbacks=n;else if(n)if(t)if(Array.isArray(t)){const a=n.copy();for(const e of t)a.addHandler((0,r.tW)(e),!0);e.callbacks=a}else e.callbacks=new r.Td(n._parentRunId,{handlers:t.handlers.concat(n.handlers),inheritableHandlers:t.inheritableHandlers.concat(n.inheritableHandlers),tags:Array.from(new Set(t.tags.concat(n.tags))),inheritableTags:Array.from(new Set(t.inheritableTags.concat(n.inheritableTags))),metadata:{...t.metadata,...n.metadata}});else e.callbacks=n}else{var s;const n=t;e[n]=null!==(s=l[n])&&void 0!==s?s:e[n]}return e}const l=new Set(["string","number","boolean"]);function c(e){const t=null!==e&&void 0!==e?e:a.N.getInstance().getStore();let n={tags:[],metadata:{},callbacks:void 0,recursionLimit:25,runId:void 0};if(t&&(n={...n,...t}),null!==t&&void 0!==t&&t.configurable)for(const a of Object.keys(t.configurable)){var r;!l.has(typeof t.configurable[a])||null!==(r=n.metadata)&&void 0!==r&&r[a]||(n.metadata||(n.metadata={}),n.metadata[a]=t.configurable[a])}return n}function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{callbacks:t,maxConcurrency:n,recursionLimit:r,runName:a,configurable:i,runId:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=c(e);return void 0!==t&&(delete s.runName,s.callbacks=t),void 0!==r&&(s.recursionLimit=r),void 0!==n&&(s.maxConcurrency=n),void 0!==a&&(s.runName=a),void 0!==i&&(s.configurable={...s.configurable,...i}),void 0!==o&&delete s.runId,s}},9582:(e,t,n)=>{"use strict";n.d(t,{N:()=>a});class r{getStore(){}run(e,t){t()}}const a=new class{constructor(){Object.defineProperty(this,"asyncLocalStorage",{enumerable:!0,configurable:!0,writable:!0,value:new r}),Object.defineProperty(this,"hasBeenInitialized",{enumerable:!0,configurable:!0,writable:!0,value:!1})}getInstance(){return this.asyncLocalStorage}initializeGlobalInstance(e){this.hasBeenInitialized||(this.hasBeenInitialized=!0,this.asyncLocalStorage=e)}}},3653:(e,t,n)=>{"use strict";n.d(t,{J:()=>i});var r=n(9915);function a(e,t){return e&&!Array.isArray(e)&&"object"===typeof e?e:{[t]:e}}class i extends r.N{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(e){return e instanceof Error?e.message+(null!==e&&void 0!==e&&e.stack?"\n\n".concat(e.stack):""):"string"===typeof e?e:"".concat(e)}_addChildRun(e,t){e.child_runs.push(t)}async _startTrace(e){var t;const n=(r=e.start_time,a=e.id,"".concat(new Date(r).toISOString().slice(0,-1),"000Z").replace(/[-:.]/g,"")+a);var r,a;const i={...e};if(void 0!==i.parent_run_id){const e=this.runMap.get(i.parent_run_id);e&&(this._addChildRun(e,i),e.child_execution_order=Math.max(e.child_execution_order,i.child_execution_order),i.trace_id=e.trace_id,void 0!==e.dotted_order&&(i.dotted_order=[e.dotted_order,n].join(".")))}else i.trace_id=i.id,i.dotted_order=n;this.runMap.set(i.id,i),await(null===(t=this.onRunCreate)||void 0===t?void 0:t.call(this,i))}async _endTrace(e){var t;const n=void 0!==e.parent_run_id&&this.runMap.get(e.parent_run_id);n?n.child_execution_order=Math.max(n.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await(null===(t=this.onRunUpdate)||void 0===t?void 0:t.call(this,e))}_getExecutionOrder(e){const t=void 0!==e&&this.runMap.get(e);return t?t.child_execution_order+1:1}async handleLLMStart(e,t,n,r,a,i,o,s){var l;const c=this._getExecutionOrder(r),u=Date.now(),d=o?{...a,metadata:o}:a,h={id:n,name:null!==s&&void 0!==s?s:e.id[e.id.length-1],parent_run_id:r,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{prompts:t},execution_order:c,child_runs:[],child_execution_order:c,run_type:"llm",extra:null!==d&&void 0!==d?d:{},tags:i||[]};return await this._startTrace(h),await(null===(l=this.onLLMStart)||void 0===l?void 0:l.call(this,h)),h}async handleChatModelStart(e,t,n,r,a,i,o,s){var l;const c=this._getExecutionOrder(r),u=Date.now(),d=o?{...a,metadata:o}:a,h={id:n,name:null!==s&&void 0!==s?s:e.id[e.id.length-1],parent_run_id:r,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{messages:t},execution_order:c,child_runs:[],child_execution_order:c,run_type:"llm",extra:null!==d&&void 0!==d?d:{},tags:i||[]};return await this._startTrace(h),await(null===(l=this.onLLMStart)||void 0===l?void 0:l.call(this,h)),h}async handleLLMEnd(e,t){var n;const r=this.runMap.get(t);if(!r||"llm"!==(null===r||void 0===r?void 0:r.run_type))throw new Error("No LLM run to end.");return r.end_time=Date.now(),r.outputs=e,r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await(null===(n=this.onLLMEnd)||void 0===n?void 0:n.call(this,r)),await this._endTrace(r),r}async handleLLMError(e,t){var n;const r=this.runMap.get(t);if(!r||"llm"!==(null===r||void 0===r?void 0:r.run_type))throw new Error("No LLM run to end.");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await(null===(n=this.onLLMError)||void 0===n?void 0:n.call(this,r)),await this._endTrace(r),r}async handleChainStart(e,t,n,r,a,i,o,s){var l;const c=this._getExecutionOrder(r),u=Date.now(),d={id:n,name:null!==s&&void 0!==s?s:e.id[e.id.length-1],parent_run_id:r,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:t,execution_order:c,child_execution_order:c,run_type:null!==o&&void 0!==o?o:"chain",child_runs:[],extra:i?{metadata:i}:{},tags:a||[]};return await this._startTrace(d),await(null===(l=this.onChainStart)||void 0===l?void 0:l.call(this,d)),d}async handleChainEnd(e,t,n,r,i){var o;const s=this.runMap.get(t);if(!s)throw new Error("No chain run to end.");return s.end_time=Date.now(),s.outputs=a(e,"output"),s.events.push({name:"end",time:new Date(s.end_time).toISOString()}),void 0!==(null===i||void 0===i?void 0:i.inputs)&&(s.inputs=a(i.inputs,"input")),await(null===(o=this.onChainEnd)||void 0===o?void 0:o.call(this,s)),await this._endTrace(s),s}async handleChainError(e,t,n,r,i){var o;const s=this.runMap.get(t);if(!s)throw new Error("No chain run to end.");return s.end_time=Date.now(),s.error=this.stringifyError(e),s.events.push({name:"error",time:new Date(s.end_time).toISOString()}),void 0!==(null===i||void 0===i?void 0:i.inputs)&&(s.inputs=a(i.inputs,"input")),await(null===(o=this.onChainError)||void 0===o?void 0:o.call(this,s)),await this._endTrace(s),s}async handleToolStart(e,t,n,r,a,i,o){var s;const l=this._getExecutionOrder(r),c=Date.now(),u={id:n,name:null!==o&&void 0!==o?o:e.id[e.id.length-1],parent_run_id:r,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{input:t},execution_order:l,child_execution_order:l,run_type:"tool",child_runs:[],extra:i?{metadata:i}:{},tags:a||[]};return await this._startTrace(u),await(null===(s=this.onToolStart)||void 0===s?void 0:s.call(this,u)),u}async handleToolEnd(e,t){var n;const r=this.runMap.get(t);if(!r||"tool"!==(null===r||void 0===r?void 0:r.run_type))throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await(null===(n=this.onToolEnd)||void 0===n?void 0:n.call(this,r)),await this._endTrace(r),r}async handleToolError(e,t){var n;const r=this.runMap.get(t);if(!r||"tool"!==(null===r||void 0===r?void 0:r.run_type))throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await(null===(n=this.onToolError)||void 0===n?void 0:n.call(this,r)),await this._endTrace(r),r}async handleAgentAction(e,t){var n;const r=this.runMap.get(t);if(!r||"chain"!==(null===r||void 0===r?void 0:r.run_type))return;const a=r;a.actions=a.actions||[],a.actions.push(e),a.events.push({name:"agent_action",time:(new Date).toISOString(),kwargs:{action:e}}),await(null===(n=this.onAgentAction)||void 0===n?void 0:n.call(this,r))}async handleAgentEnd(e,t){var n;const r=this.runMap.get(t);r&&"chain"===(null===r||void 0===r?void 0:r.run_type)&&(r.events.push({name:"agent_end",time:(new Date).toISOString(),kwargs:{action:e}}),await(null===(n=this.onAgentEnd)||void 0===n?void 0:n.call(this,r)))}async handleRetrieverStart(e,t,n,r,a,i,o){var s;const l=this._getExecutionOrder(r),c=Date.now(),u={id:n,name:null!==o&&void 0!==o?o:e.id[e.id.length-1],parent_run_id:r,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{query:t},execution_order:l,child_execution_order:l,run_type:"retriever",child_runs:[],extra:i?{metadata:i}:{},tags:a||[]};return await this._startTrace(u),await(null===(s=this.onRetrieverStart)||void 0===s?void 0:s.call(this,u)),u}async handleRetrieverEnd(e,t){var n;const r=this.runMap.get(t);if(!r||"retriever"!==(null===r||void 0===r?void 0:r.run_type))throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await(null===(n=this.onRetrieverEnd)||void 0===n?void 0:n.call(this,r)),await this._endTrace(r),r}async handleRetrieverError(e,t){var n;const r=this.runMap.get(t);if(!r||"retriever"!==(null===r||void 0===r?void 0:r.run_type))throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await(null===(n=this.onRetrieverError)||void 0===n?void 0:n.call(this,r)),await this._endTrace(r),r}async handleText(e,t){var n;const r=this.runMap.get(t);r&&"chain"===(null===r||void 0===r?void 0:r.run_type)&&(r.events.push({name:"text",time:(new Date).toISOString(),kwargs:{text:e}}),await(null===(n=this.onText)||void 0===n?void 0:n.call(this,r)))}async handleLLMNewToken(e,t,n,r,a,i){var o;const s=this.runMap.get(n);if(!s||"llm"!==(null===s||void 0===s?void 0:s.run_type))throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return s.events.push({name:"new_token",time:(new Date).toISOString(),kwargs:{token:e,idx:t,chunk:null===i||void 0===i?void 0:i.chunk}}),await(null===(o=this.onLLMNewToken)||void 0===o?void 0:o.call(this,s,e,{chunk:null===i||void 0===i?void 0:i.chunk})),s}}},9263:(e,t,n)=>{"use strict";n.d(t,{g:()=>s});var r=n(6659),a=n(5623);const i=[400,401,402,403,404,405,406,407,409],o=e=>{var t,n,r;if(e.message.startsWith("Cancel")||e.message.startsWith("AbortError")||"AbortError"===e.name)throw e;if("ECONNABORTED"===(null===e||void 0===e?void 0:e.code))throw e;const a=null!==(t=null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.status)&&void 0!==t?t:null===e||void 0===e?void 0:e.status;if(a&&i.includes(+a))throw e;if("insufficient_quota"===(null===e||void 0===e||null===(r=e.error)||void 0===r?void 0:r.code)){const t=new Error(null===e||void 0===e?void 0:e.message);throw t.name="InsufficientQuotaError",t}};class s{constructor(e){var t,n,r;Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=null!==(t=e.maxConcurrency)&&void 0!==t?t:1/0,this.maxRetries=null!==(n=e.maxRetries)&&void 0!==n?n:6,this.onFailedAttempt=null!==(r=e.onFailedAttempt)&&void 0!==r?r:o;const i=a.default;this.queue=new i({concurrency:this.maxConcurrency})}call(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return this.queue.add((()=>r((()=>e(...n).catch((e=>{throw e instanceof Error?e:new Error(e)}))),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0})),{throwOnTimeout:!0})}callWithOptions(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return e.signal?Promise.race([this.call(t,...r),new Promise(((t,n)=>{var r;null===(r=e.signal)||void 0===r||r.addEventListener("abort",(()=>{n(new Error("AbortError"))}))}))]):this.call(t,...r)}fetch(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.call((()=>fetch(...t).then((e=>e.ok?e:Promise.reject(e)))))}}},4070:(e,t,n)=>{"use strict";n.d(t,{Az:()=>s,Ec:()=>o});const r=()=>"undefined"!==typeof Deno,a=()=>{let e;return e="undefined"!==typeof window&&"undefined"!==typeof window.document?"browser":"undefined"===typeof process||"undefined"===typeof process.versions||"undefined"===typeof process.versions.node||r()?"object"===typeof globalThis&&globalThis.constructor&&"DedicatedWorkerGlobalScope"===globalThis.constructor.name?"webworker":"undefined"!==typeof window&&"nodejs"===window.name||"undefined"!==typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"))?"jsdom":r()?"deno":"other":"node",e};let i;async function o(){if(void 0===i){const e=a();i={library:"langchain-js",runtime:e}}return i}function s(e){try{var t;return"undefined"!==typeof process?null===(t={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===t?void 0:t[e]:void 0}catch(n){return}}},6922:(e,t,n)=>{"use strict";n.d(t,{X6:()=>w,UD:()=>E});var r={};n.r(r),n.d(r,{JsonPatchError:()=>p,_areEquals:()=>S,applyOperation:()=>b,applyPatch:()=>w,applyReducer:()=>_,deepClone:()=>m,getValueByPointer:()=>y,validate:()=>x,validator:()=>k});const a=Object.prototype.hasOwnProperty;function i(e,t){return a.call(e,t)}function o(e){if(Array.isArray(e)){const t=new Array(e.length);for(let e=0;e<t.length;e++)t[e]=""+e;return t}if(Object.keys)return Object.keys(e);let t=[];for(let n in e)i(e,n)&&t.push(n);return t}function s(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function l(e){let t=0;const n=e.length;let r;for(;t<n;){if(r=e.charCodeAt(t),!(r>=48&&r<=57))return!1;t++}return!0}function c(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function u(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function d(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(d(e[n]))return!0}else if("object"===typeof e){const n=o(e),r=n.length;for(var t=0;t<r;t++)if(d(e[n[t]]))return!0}return!1}function h(e,t){const n=[e];for(const r in t){const e="object"===typeof t[r]?JSON.stringify(t[r],null,2):t[r];"undefined"!==typeof e&&n.push("".concat(r,": ").concat(e))}return n.join("\n")}class f extends Error{constructor(e,t,n,r,a){super(h(e,{name:t,index:n,operation:r,tree:a})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.setPrototypeOf(this,new.target.prototype),this.message=h(e,{name:t,index:n,operation:r,tree:a})}}const p=f,m=s,v={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){let r=y(n,this.path);r&&(r=s(r));const a=b(n,{op:"remove",path:this.from}).removed;return b(n,{op:"add",path:this.path,value:a}),{newDocument:n,removed:r}},copy:function(e,t,n){const r=y(n,this.from);return b(n,{op:"add",path:this.path,value:s(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:S(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}};var g={add:function(e,t,n){return l(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:v.move,copy:v.copy,test:v.test,_get:v._get};function y(e,t){if(""==t)return e;var n={op:"_get",path:t};return b(e,n),n.value}function b(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(n&&("function"==typeof n?n(t,0,e,t.path):k(t,0)),""===t.path){let r={newDocument:e};if("add"===t.op)return r.newDocument=t.value,r;if("replace"===t.op)return r.newDocument=t.value,r.removed=e,r;if("move"===t.op||"copy"===t.op)return r.newDocument=y(e,t.from),"move"===t.op&&(r.removed=e),r;if("test"===t.op){if(r.test=S(e,t.value),!1===r.test)throw new p("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return r.newDocument=e,r}if("remove"===t.op)return r.removed=e,r.newDocument=null,r;if("_get"===t.op)return t.value=e,r;if(n)throw new p("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",i,t,e);return r}{r||(e=s(e));const o=(t.path||"").split("/");let c,d,h,f=e,m=1,y=o.length;for(h="function"==typeof n?n:k;;){if(d=o[m],d&&-1!=d.indexOf("~")&&(d=u(d)),a&&("__proto__"==d||"prototype"==d&&m>0&&"constructor"==o[m-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===c&&(void 0===f[d]?c=o.slice(0,m).join("/"):m==y-1&&(c=t.path),void 0!==c&&h(t,0,e,c)),m++,Array.isArray(f)){if("-"===d)d=f.length;else{if(n&&!l(d))throw new p("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",i,t,e);l(d)&&(d=~~d)}if(m>=y){if(n&&"add"===t.op&&d>f.length)throw new p("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",i,t,e);const r=g[t.op].call(t,f,d,e);if(!1===r.test)throw new p("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return r}}else if(m>=y){const n=v[t.op].call(t,f,d,e);if(!1===n.test)throw new p("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return n}if(f=f[d],n&&m<y&&(!f||"object"!==typeof f))throw new p("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",i,t,e)}}}function w(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(n&&!Array.isArray(t))throw new p("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=s(e));const i=new Array(t.length);for(let o=0,s=t.length;o<s;o++)i[o]=b(e,t[o],n,!0,a,o),e=i[o].newDocument;return i.newDocument=e,i}function _(e,t,n){const r=b(e,t);if(!1===r.test)throw new p("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function k(e,t,n,r){if("object"!==typeof e||null===e||Array.isArray(e))throw new p("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!v[e.op])throw new p("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!==typeof e.path)throw new p("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new p('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!==typeof e.from)throw new p("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new p("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&d(e.value))throw new p("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var a=e.path.split("/").length,i=r.split("/").length;if(a!==i+1&&a!==i)throw new p("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new p("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var o=x([{op:"_get",path:e.from,value:void 0}],n);if(o&&"OPERATION_PATH_UNRESOLVABLE"===o.name)throw new p("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function x(e,t,n){try{if(!Array.isArray(e))throw new p("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)w(s(t),s(e),n||!0);else{n=n||k;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(a){if(a instanceof p)return a;throw a}}function S(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,r,a,i=Array.isArray(e),o=Array.isArray(t);if(i&&o){if((r=e.length)!=t.length)return!1;for(n=r;0!==n--;)if(!S(e[n],t[n]))return!1;return!0}if(i!=o)return!1;var s=Object.keys(e);if((r=s.length)!==Object.keys(t).length)return!1;for(n=r;0!==n--;)if(!t.hasOwnProperty(s[n]))return!1;for(n=r;0!==n--;)if(!S(e[a=s[n]],t[a]))return!1;return!0}return e!==e&&t!==t}new WeakMap;function O(e,t,n,r,a){if(t!==e){"function"===typeof t.toJSON&&(t=t.toJSON());for(var l=o(t),u=o(e),d=!1,h=u.length-1;h>=0;h--){var f=e[m=u[h]];if(!i(t,m)||void 0===t[m]&&void 0!==f&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(a&&n.push({op:"test",path:r+"/"+c(m),value:s(f)}),n.push({op:"remove",path:r+"/"+c(m)}),d=!0):(a&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}),!0);else{var p=t[m];"object"==typeof f&&null!=f&&"object"==typeof p&&null!=p&&Array.isArray(f)===Array.isArray(p)?O(f,p,n,r+"/"+c(m),a):f!==p&&(!0,a&&n.push({op:"test",path:r+"/"+c(m),value:s(f)}),n.push({op:"replace",path:r+"/"+c(m),value:s(p)}))}}if(d||l.length!=u.length)for(h=0;h<l.length;h++){var m;i(e,m=l[h])||void 0===t[m]||n.push({op:"add",path:r+"/"+c(m),value:s(t[m])})}}}function E(e,t){var n=[];return O(e,t,n,"",arguments.length>2&&void 0!==arguments[2]&&arguments[2]),n}},9523:(e,t,n)=>{"use strict";function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;e=e.trim();const n=/```(json)?(.*)```/s.exec(e);return t(n?n[2]:e)}function a(e){if("undefined"===typeof e)return null;try{return JSON.parse(e)}catch(i){}let t="";const n=[];let r=!1,a=!1;for(let o of e){if(r)'"'!==o||a?"\n"!==o||a?a="\\"===o&&!a:o="\\n":r=!1;else if('"'===o)r=!0,a=!1;else if("{"===o)n.push("}");else if("["===o)n.push("]");else if("}"===o||"]"===o){if(!n||n[n.length-1]!==o)return null;n.pop()}t+=o}r&&(t+='"');for(let o=n.length-1;o>=0;o-=1)t+=n[o];try{return JSON.parse(t)}catch(i){return null}}n.d(t,{D:()=>r,d:()=>a})},261:(e,t,n)=>{"use strict";n.d(t,{DS:()=>s,Tr:()=>o,bO:()=>r,gI:()=>a,xW:()=>i});class r extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}throw e}[Symbol.asyncIterator](){return this}static fromReadableStream(e){const t=e.getReader();return new r({start:e=>function n(){return t.read().then((t=>{let{done:r,value:a}=t;if(!r)return e.enqueue(a),n();e.close()}))}(),cancel(){t.releaseLock()}})}static fromAsyncGenerator(e){return new r({async pull(t){const{value:n,done:r}=await e.next();r&&t.close(),t.enqueue(n)},async cancel(t){await e.return(t)}})}}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const n=Array.from({length:t},(()=>[]));return n.map((async function*(t){for(;;)if(0===t.length){const t=await e.next();for(const e of n)e.push(t)}else{if(t[0].done)return;yield t.shift().value}}))}function i(e,t){if(Array.isArray(e)&&Array.isArray(t))return e.concat(t);if("string"===typeof e&&"string"===typeof t)return e+t;if("number"===typeof e&&"number"===typeof t)return e+t;if("concat"in e&&"function"===typeof e.concat)return e.concat(t);if("object"===typeof e&&"object"===typeof t){const n={...e};for(const[e,r]of Object.entries(t))e in n&&!Array.isArray(n[e])?n[e]=i(n[e],r):n[e]=r;return n}throw new Error("Cannot concat ".concat(typeof e," and ").concat(typeof t))}class o{constructor(e,t){Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e,this.setup=new Promise(((n,r)=>{this.firstResult=e.next(),t?this.firstResult.then(t).then(n,r):this.firstResult.then((e=>n(void 0)),r)}))}async next(){return this.firstResultUsed?this.generator.next(...arguments):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}}async function s(e,t,n){const r=new o(t,n),a=await r.setup;for(var i=arguments.length,s=new Array(i>3?i-3:0),l=3;l<i;l++)s[l-3]=arguments[l];return{output:e(r,a,...s),setup:a}}},6139:(e,t,n)=>{"use strict";n.d(t,{Ik:()=>O});const r=Symbol("Let zodToJsonSchema decide on which parser to use"),a={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",emailStrategy:"format:email",base64Strategy:"contentEncoding:base64"},i=e=>{const t=(e=>"string"===typeof e?{...a,name:e}:{...a,...e})(e),n=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map((e=>{let[n,r]=e;return[r._def,{def:r._def,path:[...t.basePath,t.definitionPath,n],jsonSchema:void 0}]})))}};var o=n(7665);function s(e,t,n,r){null!==r&&void 0!==r&&r.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function l(e,t,n,r,a){e[t]=n,s(e,t,r,a)}function c(e,t,n){const r=null!==n&&void 0!==n?n:t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map(((n,r)=>c(e,t,n)))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return u(e,t)}}const u=(e,t)=>{const n={type:"integer",format:"unix-time"};if("openApi3"===t.target)return n;for(const r of e.checks)switch(r.kind){case"min":l(n,"minimum",r.value,r.message,t);break;case"max":l(n,"maximum",r.value,r.message,t)}return n};const d={cuid:"^[cC][^\\s-]{8,}$",cuid2:"^[a-z][a-z0-9]*$",ulid:"^[0-9A-HJKMNP-TV-Z]{26}$",email:"^(?!\\.)(?!.*\\.\\.)([a-zA-Z0-9_+-\\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\\-]*\\.)+[a-zA-Z]{2,}$",emoji:"^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",uuid:"^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$",ipv4:"^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$",ipv6:"^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$",base64:"^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$",nanoid:"^[a-zA-Z0-9_-]{21}$"};function h(e,t){const n={type:"string"};function r(e){return"escape"===t.patternStrategy?f(e):e}if(e.checks)for(const a of e.checks)switch(a.kind){case"min":l(n,"minLength","number"===typeof n.minLength?Math.max(n.minLength,a.value):a.value,a.message,t);break;case"max":l(n,"maxLength","number"===typeof n.maxLength?Math.min(n.maxLength,a.value):a.value,a.message,t);break;case"email":switch(t.emailStrategy){case"format:email":p(n,"email",a.message,t);break;case"format:idn-email":p(n,"idn-email",a.message,t);break;case"pattern:zod":m(n,d.email,a.message,t)}break;case"url":p(n,"uri",a.message,t);break;case"uuid":p(n,"uuid",a.message,t);break;case"regex":m(n,a.regex.source,a.message,t);break;case"cuid":m(n,d.cuid,a.message,t);break;case"cuid2":m(n,d.cuid2,a.message,t);break;case"startsWith":m(n,"^"+r(a.value),a.message,t);break;case"endsWith":m(n,r(a.value)+"$",a.message,t);break;case"datetime":p(n,"date-time",a.message,t);break;case"date":p(n,"date",a.message,t);break;case"time":p(n,"time",a.message,t);break;case"duration":p(n,"duration",a.message,t);break;case"length":l(n,"minLength","number"===typeof n.minLength?Math.max(n.minLength,a.value):a.value,a.message,t),l(n,"maxLength","number"===typeof n.maxLength?Math.min(n.maxLength,a.value):a.value,a.message,t);break;case"includes":m(n,r(a.value),a.message,t);break;case"ip":"v6"!==a.version&&p(n,"ipv4",a.message,t),"v4"!==a.version&&p(n,"ipv6",a.message,t);break;case"emoji":m(n,d.emoji,a.message,t);break;case"ulid":m(n,d.ulid,a.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":p(n,"binary",a.message,t);break;case"contentEncoding:base64":l(n,"contentEncoding","base64",a.message,t);break;case"pattern:zod":m(n,d.base64,a.message,t)}break;case"nanoid":m(n,d.nanoid,a.message,t)}return n}const f=e=>Array.from(e).map((e=>/[a-zA-Z0-9]/.test(e)?e:"\\".concat(e))).join(""),p=(e,t,n,r)=>{var a;e.format||null!==(a=e.anyOf)&&void 0!==a&&a.some((e=>e.format))?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):l(e,"format",t,n,r)},m=(e,t,n,r)=>{var a;e.pattern||null!==(a=e.allOf)&&void 0!==a&&a.some((e=>e.pattern))?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:t,...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):l(e,"pattern",t,n,r)};function v(e,t){var n,r,a,i,s;if("openApi3"===t.target&&(null===(n=e.keyType)||void 0===n?void 0:n._def.typeName)===o.kY.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce(((n,r)=>{var a;return{...n,[r]:null!==(a=w(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",r]}))&&void 0!==a?a:{}}}),{}),additionalProperties:!1};const l={type:"object",additionalProperties:null!==(r=w(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))&&void 0!==r?r:{}};if("openApi3"===t.target)return l;if((null===(a=e.keyType)||void 0===a?void 0:a._def.typeName)===o.kY.ZodString&&null!==(i=e.keyType._def.checks)&&void 0!==i&&i.length){const n=Object.entries(h(e.keyType._def,t)).reduce(((e,t)=>{let[n,r]=t;return"type"===n?e:{...e,[n]:r}}),{});return{...l,propertyNames:n}}return(null===(s=e.keyType)||void 0===s?void 0:s._def.typeName)===o.kY.ZodEnum?{...l,propertyNames:{enum:e.keyType._def.values}}:l}const g={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};const y=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map(((e,n)=>w(e._def,{...t,currentPath:[...t.currentPath,"anyOf","".concat(n)]}))).filter((e=>!!e&&(!t.strictUnions||"object"===typeof e&&Object.keys(e).length>0)));return n.length?{anyOf:n}:void 0};function b(e,t){var n,r;return"strict"===t.removeAdditionalStrategy?"ZodNever"===e.catchall._def.typeName?"strict"!==e.unknownKeys:null===(n=w(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))||void 0===n||n:"ZodNever"===e.catchall._def.typeName?"passthrough"===e.unknownKeys:null===(r=w(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))||void 0===r||r}function w(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=t.seen.get(e);if(t.override){var i;const o=null===(i=t.override)||void 0===i?void 0:i.call(t,e,t,a,n);if(o!==r)return o}if(a&&!n){const e=_(a,t);if(void 0!==e)return e}const o={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,o);const s=x(e,e.typeName,t);return s&&S(e,t,s),o.jsonSchema=s,s}const _=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:k(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every(((e,n)=>t.currentPath[n]===e))?(console.warn("Recursive reference detected at ".concat(t.currentPath.join("/"),"! Defaulting to any")),{}):"seen"===t.$refStrategy?{}:void 0}},k=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},x=(e,t,n)=>{switch(t){case o.kY.ZodString:return h(e,n);case o.kY.ZodNumber:return function(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",s(n,"type",r.message,t);break;case"min":"jsonSchema7"===t.target?r.inclusive?l(n,"minimum",r.value,r.message,t):l(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),l(n,"minimum",r.value,r.message,t));break;case"max":"jsonSchema7"===t.target?r.inclusive?l(n,"maximum",r.value,r.message,t):l(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),l(n,"maximum",r.value,r.message,t));break;case"multipleOf":l(n,"multipleOf",r.value,r.message,t)}return n}(e,n);case o.kY.ZodObject:return function(e,t){const n={type:"object",...Object.entries(e.shape()).reduce(((e,n)=>{let[r,a]=n;if(void 0===a||void 0===a._def)return e;const i=w(a._def,{...t,currentPath:[...t.currentPath,"properties",r],propertyPath:[...t.currentPath,"properties",r]});return void 0===i?e:{properties:{...e.properties,[r]:i},required:a.isOptional()?e.required:[...e.required,r]}}),{properties:{},required:[]}),additionalProperties:b(e,t)};return n.required.length||delete n.required,n}(e,n);case o.kY.ZodBigInt:return function(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":"jsonSchema7"===t.target?r.inclusive?l(n,"minimum",r.value,r.message,t):l(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),l(n,"minimum",r.value,r.message,t));break;case"max":"jsonSchema7"===t.target?r.inclusive?l(n,"maximum",r.value,r.message,t):l(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),l(n,"maximum",r.value,r.message,t));break;case"multipleOf":l(n,"multipleOf",r.value,r.message,t)}return n}(e,n);case o.kY.ZodBoolean:return{type:"boolean"};case o.kY.ZodDate:return c(e,n);case o.kY.ZodUndefined:return{not:{}};case o.kY.ZodNull:return function(e){return"openApi3"===e.target?{enum:["null"],nullable:!0}:{type:"null"}}(n);case o.kY.ZodArray:return function(e,t){var n;const r={type:"array"};return(null===(n=e.type)||void 0===n||null===(n=n._def)||void 0===n?void 0:n.typeName)!==o.kY.ZodAny&&(r.items=w(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&l(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&l(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(l(r,"minItems",e.exactLength.value,e.exactLength.message,t),l(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}(e,n);case o.kY.ZodUnion:case o.kY.ZodDiscriminatedUnion:return function(e,t){if("openApi3"===t.target)return y(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every((e=>e._def.typeName in g&&(!e._def.checks||!e._def.checks.length)))){const e=n.reduce(((e,t)=>{const n=g[t._def.typeName];return n&&!e.includes(n)?[...e,n]:e}),[]);return{type:e.length>1?e:e[0]}}if(n.every((e=>"ZodLiteral"===e._def.typeName&&!e.description))){const e=n.reduce(((e,t)=>{const n=typeof t._def.value;switch(n){case"string":case"number":case"boolean":return[...e,n];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}}),[]);if(e.length===n.length){const t=e.filter(((e,t,n)=>n.indexOf(e)===t));return{type:t.length>1?t:t[0],enum:n.reduce(((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value]),[])}}}else if(n.every((e=>"ZodEnum"===e._def.typeName)))return{type:"string",enum:n.reduce(((e,t)=>[...e,...t._def.values.filter((t=>!e.includes(t)))]),[])};return y(e,t)}(e,n);case o.kY.ZodIntersection:return function(e,t){const n=[w(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),w(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter((e=>!!e));let r="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0;const a=[];return n.forEach((e=>{if("type"in(t=e)&&"string"===t.type||!("allOf"in t)){let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){const{additionalProperties:n,...r}=e;t=r}else r=void 0;a.push(t)}else a.push(...e.allOf),void 0===e.unevaluatedProperties&&(r=void 0);var t})),a.length?{allOf:a,...r}:void 0}(e,n);case o.kY.ZodTuple:return function(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map(((e,n)=>w(e._def,{...t,currentPath:[...t.currentPath,"items","".concat(n)]}))).reduce(((e,t)=>void 0===t?e:[...e,t]),[]),additionalItems:w(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map(((e,n)=>w(e._def,{...t,currentPath:[...t.currentPath,"items","".concat(n)]}))).reduce(((e,t)=>void 0===t?e:[...e,t]),[])}}(e,n);case o.kY.ZodRecord:return v(e,n);case o.kY.ZodLiteral:return function(e,t){const n=typeof e.value;return"bigint"!==n&&"number"!==n&&"boolean"!==n&&"string"!==n?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===n?"integer":n,enum:[e.value]}:{type:"bigint"===n?"integer":n,const:e.value}}(e,n);case o.kY.ZodEnum:return function(e){return{type:"string",enum:e.values}}(e);case o.kY.ZodNativeEnum:return function(e){const t=e.values,n=Object.keys(e.values).filter((e=>"number"!==typeof t[t[e]])).map((e=>t[e])),r=Array.from(new Set(n.map((e=>typeof e))));return{type:1===r.length?"string"===r[0]?"string":"number":["string","number"],enum:n}}(e);case o.kY.ZodNullable:return function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:g[e.innerType._def.typeName],nullable:!0}:{type:[g[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){const n=w(e.innerType._def,{...t,currentPath:[...t.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}const n=w(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}(e,n);case o.kY.ZodOptional:return((e,t)=>{var n;if(t.currentPath.toString()===(null===(n=t.propertyPath)||void 0===n?void 0:n.toString()))return w(e.innerType._def,t);const r=w(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}})(e,n);case o.kY.ZodMap:return function(e,t){return"record"===t.mapStrategy?v(e,t):{type:"array",maxItems:125,items:{type:"array",items:[w(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},w(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}}}(e,n);case o.kY.ZodSet:return function(e,t){const n={type:"array",uniqueItems:!0,items:w(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&l(n,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&l(n,"maxItems",e.maxSize.value,e.maxSize.message,t),n}(e,n);case o.kY.ZodLazy:return w(e.getter()._def,n);case o.kY.ZodPromise:return function(e,t){return w(e.type._def,t)}(e,n);case o.kY.ZodNaN:case o.kY.ZodNever:return{not:{}};case o.kY.ZodEffects:return function(e,t){return"input"===t.effectStrategy?w(e.schema._def,t):{}}(e,n);case o.kY.ZodAny:case o.kY.ZodUnknown:return{};case o.kY.ZodDefault:return function(e,t){return{...w(e.innerType._def,t),default:e.defaultValue()}}(e,n);case o.kY.ZodBranded:return function(e,t){return w(e.type._def,t)}(e,n);case o.kY.ZodReadonly:case o.kY.ZodCatch:return((e,t)=>w(e.innerType._def,t))(e,n);case o.kY.ZodPipeline:return((e,t)=>{if("input"===t.pipeStrategy)return w(e.in._def,t);if("output"===t.pipeStrategy)return w(e.out._def,t);const n=w(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]});return{allOf:[n,w(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]})].filter((e=>void 0!==e))}})(e,n);case o.kY.ZodFunction:case o.kY.ZodVoid:case o.kY.ZodSymbol:default:return}},S=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),O=(e,t)=>{var n;const r=i(t),a="object"===typeof t&&t.definitions?Object.entries(t.definitions).reduce(((e,t)=>{var n;let[a,i]=t;return{...e,[a]:null!==(n=w(i._def,{...r,currentPath:[...r.basePath,r.definitionPath,a]},!0))&&void 0!==n?n:{}}}),{}):void 0,o="string"===typeof t?t:null===t||void 0===t?void 0:t.name,s=null!==(n=w(e._def,void 0===o?r:{...r,currentPath:[...r.basePath,r.definitionPath,o]},!1))&&void 0!==n?n:{},l=void 0===o?a?{...s,[r.definitionPath]:a}:s:{$ref:[..."relative"===r.$refStrategy?[]:r.basePath,r.definitionPath,o].join("/"),[r.definitionPath]:{...a,[o]:s}};return"jsonSchema7"===r.target?l.$schema="http://json-schema.org/draft-07/schema#":"jsonSchema2019-09"===r.target&&(l.$schema="https://json-schema.org/draft/2019-09/schema#"),l}},7665:(e,t,n)=>{"use strict";var r,a;n.d(t,{kY:()=>Le,z:()=>bt}),function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter((e=>"number"!==typeof t[t[e]])),r={};for(const e of n)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"===typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"===typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"===typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" | ";return e.map((e=>"string"===typeof e?"'".concat(e,"'"):e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"===typeof t?t.toString():t}(r||(r={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(a||(a={}));const i=r.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),o=e=>{switch(typeof e){case"undefined":return i.undefined;case"string":return i.string;case"number":return isNaN(e)?i.nan:i.number;case"boolean":return i.boolean;case"function":return i.function;case"bigint":return i.bigint;case"symbol":return i.symbol;case"object":return Array.isArray(e)?i.array:null===e?i.null:e.then&&"function"===typeof e.then&&e.catch&&"function"===typeof e.catch?i.promise:"undefined"!==typeof Map&&e instanceof Map?i.map:"undefined"!==typeof Set&&e instanceof Set?i.set:"undefined"!==typeof Date&&e instanceof Date?i.date:i.object;default:return i.unknown}},s=r.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class l extends Error{constructor(e){var t;super(),t=this,this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.issues=[...t.issues,...e]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(const a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(r);else if("invalid_return_type"===a.code)r(a.returnTypeError);else if("invalid_arguments"===a.code)r(a.argumentsError);else if(0===a.path.length)n._errors.push(t(a));else{let e=n,r=0;for(;r<a.path.length;){const n=a.path[r];r===a.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(a))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}static assert(e){if(!(e instanceof l))throw new Error("Not a ZodError: ".concat(e))}toString(){return this.message}get message(){return JSON.stringify(this.issues,r.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e.message;const t={},n=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}l.create=e=>new l(e);const c=(e,t)=>{let n;switch(e.code){case s.invalid_type:n=e.received===i.undefined?"Required":"Expected ".concat(e.expected,", received ").concat(e.received);break;case s.invalid_literal:n="Invalid literal value, expected ".concat(JSON.stringify(e.expected,r.jsonStringifyReplacer));break;case s.unrecognized_keys:n="Unrecognized key(s) in object: ".concat(r.joinValues(e.keys,", "));break;case s.invalid_union:n="Invalid input";break;case s.invalid_union_discriminator:n="Invalid discriminator value. Expected ".concat(r.joinValues(e.options));break;case s.invalid_enum_value:n="Invalid enum value. Expected ".concat(r.joinValues(e.options),", received '").concat(e.received,"'");break;case s.invalid_arguments:n="Invalid function arguments";break;case s.invalid_return_type:n="Invalid function return type";break;case s.invalid_date:n="Invalid date";break;case s.invalid_string:"object"===typeof e.validation?"includes"in e.validation?(n='Invalid input: must include "'.concat(e.validation.includes,'"'),"number"===typeof e.validation.position&&(n="".concat(n," at one or more positions greater than or equal to ").concat(e.validation.position))):"startsWith"in e.validation?n='Invalid input: must start with "'.concat(e.validation.startsWith,'"'):"endsWith"in e.validation?n='Invalid input: must end with "'.concat(e.validation.endsWith,'"'):r.assertNever(e.validation):n="regex"!==e.validation?"Invalid ".concat(e.validation):"Invalid";break;case s.too_small:n="array"===e.type?"Array must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"more than"," ").concat(e.minimum," element(s)"):"string"===e.type?"String must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"over"," ").concat(e.minimum," character(s)"):"number"===e.type?"Number must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(e.minimum):"date"===e.type?"Date must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(new Date(Number(e.minimum))):"Invalid input";break;case s.too_big:n="array"===e.type?"Array must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"less than"," ").concat(e.maximum," element(s)"):"string"===e.type?"String must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"under"," ").concat(e.maximum," character(s)"):"number"===e.type?"Number must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):"bigint"===e.type?"BigInt must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):"date"===e.type?"Date must be ".concat(e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"," ").concat(new Date(Number(e.maximum))):"Invalid input";break;case s.custom:n="Invalid input";break;case s.invalid_intersection_types:n="Intersection results could not be merged";break;case s.not_multiple_of:n="Number must be a multiple of ".concat(e.multipleOf);break;case s.not_finite:n="Number must be finite";break;default:n=t.defaultError,r.assertNever(e)}return{message:n}};let u=c;function d(){return u}const h=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],o={...a,path:i};if(void 0!==a.message)return{...a,path:i,message:a.message};let s="";const l=r.filter((e=>!!e)).slice().reverse();for(const c of l)s=c(o,{data:t,defaultError:s}).message;return{...a,path:i,message:s}};function f(e,t){const n=d(),r=h({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===c?void 0:c].filter((e=>!!e))});e.common.issues.push(r)}class p{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if("aborted"===r.status)return m;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const r of t){const e=await r.key,t=await r.value;n.push({key:e,value:t})}return p.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:t,value:a}=r;if("aborted"===t.status)return m;if("aborted"===a.status)return m;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"===t.value||"undefined"===typeof a.value&&!r.alwaysSet||(n[t.value]=a.value)}return{status:e.value,value:n}}}const m=Object.freeze({status:"aborted"}),v=e=>({status:"dirty",value:e}),g=e=>({status:"valid",value:e}),y=e=>"aborted"===e.status,b=e=>"dirty"===e.status,w=e=>"valid"===e.status,_=e=>"undefined"!==typeof Promise&&e instanceof Promise;function k(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function x(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n}var S,O,E;"function"===typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"===typeof e?{message:e}:e||{},e.toString=e=>"string"===typeof e?e:null===e||void 0===e?void 0:e.message}(S||(S={}));class P{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const T=(e,t)=>{if(w(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new l(e.common.issues);return this._error=t,this._error}}};function C(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:a};return{errorMap:(t,a)=>{var i,o;const{message:s}=e;return"invalid_enum_value"===t.code?{message:null!==s&&void 0!==s?s:a.defaultError}:"undefined"===typeof a.data?{message:null!==(i=null!==s&&void 0!==s?s:r)&&void 0!==i?i:a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:null!==(o=null!==s&&void 0!==s?s:n)&&void 0!==o?o:a.defaultError}},description:a}}class A{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return o(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:o(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new p,ctx:{common:e.parent.common,data:e.data,parsedType:o(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(_(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const r={common:{issues:[],async:null!==(n=null===t||void 0===t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null===t||void 0===t?void 0:t.errorMap},path:(null===t||void 0===t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:o(e)},a=this._parseSync({data:e,path:r.path,parent:r});return T(r,a)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null===t||void 0===t?void 0:t.errorMap,async:!0},path:(null===t||void 0===t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:o(e)},r=this._parse({data:e,path:n.path,parent:n}),a=await(_(r)?r:Promise.resolve(r));return T(n,a)}refine(e,t){const n=e=>"string"===typeof t||"undefined"===typeof t?{message:t}:"function"===typeof t?t(e):t;return this._refinement(((t,r)=>{const a=e(t),i=()=>r.addIssue({code:s.custom,...n(t)});return"undefined"!==typeof Promise&&a instanceof Promise?a.then((e=>!!e||(i(),!1))):!!a||(i(),!1)}))}refinement(e,t){return this._refinement(((n,r)=>!!e(n)||(r.addIssue("function"===typeof t?t(n,r):t),!1)))}_refinement(e){return new Se({schema:this,typeName:Le.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Oe.create(this,this._def)}nullable(){return Ee.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ie.create(this,this._def)}promise(){return xe.create(this,this._def)}or(e){return le.create([this,e],this._def)}and(e){return he.create(this,e,this._def)}transform(e){return new Se({...C(this._def),schema:this,typeName:Le.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"===typeof e?e:()=>e;return new Pe({...C(this._def),innerType:this,defaultValue:t,typeName:Le.ZodDefault})}brand(){return new Ie({typeName:Le.ZodBranded,type:this,...C(this._def)})}catch(e){const t="function"===typeof e?e:()=>e;return new Te({...C(this._def),innerType:this,catchValue:t,typeName:Le.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Ne.create(this,e)}readonly(){return je.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const I=/^c[^\s-]{8,}$/i,N=/^[0-9a-z]+$/,j=/^[0-9A-HJKMNP-TV-Z]{26}$/,R=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,M=/^[a-z0-9_-]{21}$/i,L=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,z=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let D;const F=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,U=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,B=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Z="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",V=new RegExp("^".concat(Z,"$"));function H(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t="".concat(t,"\\.\\d{").concat(e.precision,"}"):null==e.precision&&(t="".concat(t,"(\\.\\d+)?")),t}function W(e){let t="".concat(Z,"T").concat(H(e));const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t="".concat(t,"(").concat(n.join("|"),")"),new RegExp("^".concat(t,"$"))}class q extends A{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==i.string){const t=this._getOrReturnCtx(e);return f(t,{code:s.invalid_type,expected:i.string,received:t.parsedType}),m}const t=new p;let n;for(const i of this._def.checks)if("min"===i.kind)e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),f(n,{code:s.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("max"===i.kind)e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),f(n,{code:s.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("length"===i.kind){const r=e.data.length>i.value,a=e.data.length<i.value;(r||a)&&(n=this._getOrReturnCtx(e,n),r?f(n,{code:s.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&f(n,{code:s.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),t.dirty())}else if("email"===i.kind)z.test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{validation:"email",code:s.invalid_string,message:i.message}),t.dirty());else if("emoji"===i.kind)D||(D=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),D.test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{validation:"emoji",code:s.invalid_string,message:i.message}),t.dirty());else if("uuid"===i.kind)R.test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{validation:"uuid",code:s.invalid_string,message:i.message}),t.dirty());else if("nanoid"===i.kind)M.test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{validation:"nanoid",code:s.invalid_string,message:i.message}),t.dirty());else if("cuid"===i.kind)I.test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{validation:"cuid",code:s.invalid_string,message:i.message}),t.dirty());else if("cuid2"===i.kind)N.test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{validation:"cuid2",code:s.invalid_string,message:i.message}),t.dirty());else if("ulid"===i.kind)j.test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{validation:"ulid",code:s.invalid_string,message:i.message}),t.dirty());else if("url"===i.kind)try{new URL(e.data)}catch(l){n=this._getOrReturnCtx(e,n),f(n,{validation:"url",code:s.invalid_string,message:i.message}),t.dirty()}else if("regex"===i.kind){i.regex.lastIndex=0;i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{validation:"regex",code:s.invalid_string,message:i.message}),t.dirty())}else if("trim"===i.kind)e.data=e.data.trim();else if("includes"===i.kind)e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),f(n,{code:s.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),t.dirty());else if("toLowerCase"===i.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===i.kind)e.data=e.data.toUpperCase();else if("startsWith"===i.kind)e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),f(n,{code:s.invalid_string,validation:{startsWith:i.value},message:i.message}),t.dirty());else if("endsWith"===i.kind)e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),f(n,{code:s.invalid_string,validation:{endsWith:i.value},message:i.message}),t.dirty());else if("datetime"===i.kind){W(i).test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{code:s.invalid_string,validation:"datetime",message:i.message}),t.dirty())}else if("date"===i.kind){V.test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{code:s.invalid_string,validation:"date",message:i.message}),t.dirty())}else if("time"===i.kind){new RegExp("^".concat(H(i),"$")).test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{code:s.invalid_string,validation:"time",message:i.message}),t.dirty())}else"duration"===i.kind?L.test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{validation:"duration",code:s.invalid_string,message:i.message}),t.dirty()):"ip"===i.kind?(a=e.data,("v4"!==(o=i.version)&&o||!F.test(a))&&("v6"!==o&&o||!U.test(a))&&(n=this._getOrReturnCtx(e,n),f(n,{validation:"ip",code:s.invalid_string,message:i.message}),t.dirty())):"base64"===i.kind?B.test(e.data)||(n=this._getOrReturnCtx(e,n),f(n,{validation:"base64",code:s.invalid_string,message:i.message}),t.dirty()):r.assertNever(i);var a,o;return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement((t=>e.test(t)),{validation:t,code:s.invalid_string,...S.errToObj(n)})}_addCheck(e){return new q({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...S.errToObj(e)})}url(e){return this._addCheck({kind:"url",...S.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...S.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...S.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...S.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...S.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...S.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...S.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...S.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...S.errToObj(e)})}datetime(e){var t,n;return"string"===typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:"undefined"===typeof(null===e||void 0===e?void 0:e.precision)?null:null===e||void 0===e?void 0:e.precision,offset:null!==(t=null===e||void 0===e?void 0:e.offset)&&void 0!==t&&t,local:null!==(n=null===e||void 0===e?void 0:e.local)&&void 0!==n&&n,...S.errToObj(null===e||void 0===e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"===typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:"undefined"===typeof(null===e||void 0===e?void 0:e.precision)?null:null===e||void 0===e?void 0:e.precision,...S.errToObj(null===e||void 0===e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...S.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...S.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null===t||void 0===t?void 0:t.position,...S.errToObj(null===t||void 0===t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...S.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...S.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...S.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...S.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...S.errToObj(t)})}nonempty(e){return this.min(1,S.errToObj(e))}trim(){return new q({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new q({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new q({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function $(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r;return parseInt(e.toFixed(a).replace(".",""))%parseInt(t.toFixed(a).replace(".",""))/Math.pow(10,a)}q.create=e=>{var t;return new q({checks:[],typeName:Le.ZodString,coerce:null!==(t=null===e||void 0===e?void 0:e.coerce)&&void 0!==t&&t,...C(e)})};class K extends A{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==i.number){const t=this._getOrReturnCtx(e);return f(t,{code:s.invalid_type,expected:i.number,received:t.parsedType}),m}let t;const n=new p;for(const a of this._def.checks)if("int"===a.kind)r.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),f(t,{code:s.invalid_type,expected:"integer",received:"float",message:a.message}),n.dirty());else if("min"===a.kind){(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),f(t,{code:s.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty())}else if("max"===a.kind){(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),f(t,{code:s.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty())}else"multipleOf"===a.kind?0!==$(e.data,a.value)&&(t=this._getOrReturnCtx(e,t),f(t,{code:s.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):"finite"===a.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),f(t,{code:s.not_finite,message:a.message}),n.dirty()):r.assertNever(a);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,S.toString(t))}gt(e,t){return this.setLimit("min",e,!1,S.toString(t))}lte(e,t){return this.setLimit("max",e,!0,S.toString(t))}lt(e,t){return this.setLimit("max",e,!1,S.toString(t))}setLimit(e,t,n,r){return new K({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:S.toString(r)}]})}_addCheck(e){return new K({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:S.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:S.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:S.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:S.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:S.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:S.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:S.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:S.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:S.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&r.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}K.create=e=>new K({checks:[],typeName:Le.ZodNumber,coerce:(null===e||void 0===e?void 0:e.coerce)||!1,...C(e)});class J extends A{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==i.bigint){const t=this._getOrReturnCtx(e);return f(t,{code:s.invalid_type,expected:i.bigint,received:t.parsedType}),m}let t;const n=new p;for(const a of this._def.checks)if("min"===a.kind){(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),f(t,{code:s.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty())}else if("max"===a.kind){(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),f(t,{code:s.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty())}else"multipleOf"===a.kind?e.data%a.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),f(t,{code:s.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):r.assertNever(a);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,S.toString(t))}gt(e,t){return this.setLimit("min",e,!1,S.toString(t))}lte(e,t){return this.setLimit("max",e,!0,S.toString(t))}lt(e,t){return this.setLimit("max",e,!1,S.toString(t))}setLimit(e,t,n,r){return new J({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:S.toString(r)}]})}_addCheck(e){return new J({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:S.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:S.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:S.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:S.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:S.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}J.create=e=>{var t;return new J({checks:[],typeName:Le.ZodBigInt,coerce:null!==(t=null===e||void 0===e?void 0:e.coerce)&&void 0!==t&&t,...C(e)})};class Y extends A{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==i.boolean){const t=this._getOrReturnCtx(e);return f(t,{code:s.invalid_type,expected:i.boolean,received:t.parsedType}),m}return g(e.data)}}Y.create=e=>new Y({typeName:Le.ZodBoolean,coerce:(null===e||void 0===e?void 0:e.coerce)||!1,...C(e)});class G extends A{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==i.date){const t=this._getOrReturnCtx(e);return f(t,{code:s.invalid_type,expected:i.date,received:t.parsedType}),m}if(isNaN(e.data.getTime())){return f(this._getOrReturnCtx(e),{code:s.invalid_date}),m}const t=new p;let n;for(const a of this._def.checks)"min"===a.kind?e.data.getTime()<a.value&&(n=this._getOrReturnCtx(e,n),f(n,{code:s.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),t.dirty()):"max"===a.kind?e.data.getTime()>a.value&&(n=this._getOrReturnCtx(e,n),f(n,{code:s.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),t.dirty()):r.assertNever(a);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new G({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:S.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:S.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}G.create=e=>new G({checks:[],coerce:(null===e||void 0===e?void 0:e.coerce)||!1,typeName:Le.ZodDate,...C(e)});class Q extends A{_parse(e){if(this._getType(e)!==i.symbol){const t=this._getOrReturnCtx(e);return f(t,{code:s.invalid_type,expected:i.symbol,received:t.parsedType}),m}return g(e.data)}}Q.create=e=>new Q({typeName:Le.ZodSymbol,...C(e)});class X extends A{_parse(e){if(this._getType(e)!==i.undefined){const t=this._getOrReturnCtx(e);return f(t,{code:s.invalid_type,expected:i.undefined,received:t.parsedType}),m}return g(e.data)}}X.create=e=>new X({typeName:Le.ZodUndefined,...C(e)});class ee extends A{_parse(e){if(this._getType(e)!==i.null){const t=this._getOrReturnCtx(e);return f(t,{code:s.invalid_type,expected:i.null,received:t.parsedType}),m}return g(e.data)}}ee.create=e=>new ee({typeName:Le.ZodNull,...C(e)});class te extends A{constructor(){super(...arguments),this._any=!0}_parse(e){return g(e.data)}}te.create=e=>new te({typeName:Le.ZodAny,...C(e)});class ne extends A{constructor(){super(...arguments),this._unknown=!0}_parse(e){return g(e.data)}}ne.create=e=>new ne({typeName:Le.ZodUnknown,...C(e)});class re extends A{_parse(e){const t=this._getOrReturnCtx(e);return f(t,{code:s.invalid_type,expected:i.never,received:t.parsedType}),m}}re.create=e=>new re({typeName:Le.ZodNever,...C(e)});class ae extends A{_parse(e){if(this._getType(e)!==i.undefined){const t=this._getOrReturnCtx(e);return f(t,{code:s.invalid_type,expected:i.void,received:t.parsedType}),m}return g(e.data)}}ae.create=e=>new ae({typeName:Le.ZodVoid,...C(e)});class ie extends A{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==i.array)return f(t,{code:s.invalid_type,expected:i.array,received:t.parsedType}),m;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,a=t.data.length<r.exactLength.value;(e||a)&&(f(t,{code:e?s.too_big:s.too_small,minimum:a?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(f(t,{code:s.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(f(t,{code:s.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>r.type._parseAsync(new P(t,e,t.path,n))))).then((e=>p.mergeArray(n,e)));const a=[...t.data].map(((e,n)=>r.type._parseSync(new P(t,e,t.path,n))));return p.mergeArray(n,a)}get element(){return this._def.type}min(e,t){return new ie({...this._def,minLength:{value:e,message:S.toString(t)}})}max(e,t){return new ie({...this._def,maxLength:{value:e,message:S.toString(t)}})}length(e,t){return new ie({...this._def,exactLength:{value:e,message:S.toString(t)}})}nonempty(e){return this.min(1,e)}}function oe(e){if(e instanceof se){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Oe.create(oe(r))}return new se({...e._def,shape:()=>t})}return e instanceof ie?new ie({...e._def,type:oe(e.element)}):e instanceof Oe?Oe.create(oe(e.unwrap())):e instanceof Ee?Ee.create(oe(e.unwrap())):e instanceof fe?fe.create(e.items.map((e=>oe(e)))):e}ie.create=(e,t)=>new ie({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Le.ZodArray,...C(t)});class se extends A{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=r.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==i.object){const t=this._getOrReturnCtx(e);return f(t,{code:s.invalid_type,expected:i.object,received:t.parsedType}),m}const{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof re&&"strip"===this._def.unknownKeys))for(const i in n.data)a.includes(i)||o.push(i);const l=[];for(const i of a){const e=r[i],t=n.data[i];l.push({key:{status:"valid",value:i},value:e._parse(new P(n,t,n.path,i)),alwaysSet:i in n.data})}if(this._def.catchall instanceof re){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of o)l.push({key:{status:"valid",value:t},value:{status:"valid",value:n.data[t]}});else if("strict"===e)o.length>0&&(f(n,{code:s.unrecognized_keys,keys:o}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of o){const r=n.data[t];l.push({key:{status:"valid",value:t},value:e._parse(new P(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of l){const n=await t.key,r=await t.value;e.push({key:n,value:r,alwaysSet:t.alwaysSet})}return e})).then((e=>p.mergeObjectSync(t,e))):p.mergeObjectSync(t,l)}get shape(){return this._def.shape()}strict(e){return S.errToObj,new se({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var r,a,i,o;const s=null!==(i=null===(a=(r=this._def).errorMap)||void 0===a?void 0:a.call(r,t,n).message)&&void 0!==i?i:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(o=S.errToObj(e).message)&&void 0!==o?o:s}:{message:s}}}:{}})}strip(){return new se({...this._def,unknownKeys:"strip"})}passthrough(){return new se({...this._def,unknownKeys:"passthrough"})}extend(e){return new se({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new se({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Le.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new se({...this._def,catchall:e})}pick(e){const t={};return r.objectKeys(e).forEach((n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])})),new se({...this._def,shape:()=>t})}omit(e){const t={};return r.objectKeys(this.shape).forEach((n=>{e[n]||(t[n]=this.shape[n])})),new se({...this._def,shape:()=>t})}deepPartial(){return oe(this)}partial(e){const t={};return r.objectKeys(this.shape).forEach((n=>{const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()})),new se({...this._def,shape:()=>t})}required(e){const t={};return r.objectKeys(this.shape).forEach((n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof Oe;)e=e._def.innerType;t[n]=e}})),new se({...this._def,shape:()=>t})}keyof(){return we(r.objectKeys(this.shape))}}se.create=(e,t)=>new se({shape:()=>e,unknownKeys:"strip",catchall:re.create(),typeName:Le.ZodObject,...C(t)}),se.strictCreate=(e,t)=>new se({shape:()=>e,unknownKeys:"strict",catchall:re.create(),typeName:Le.ZodObject,...C(t)}),se.lazycreate=(e,t)=>new se({shape:e,unknownKeys:"strip",catchall:re.create(),typeName:Le.ZodObject,...C(t)});class le extends A{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const n=e.map((e=>new l(e.ctx.common.issues)));return f(t,{code:s.invalid_union,unionErrors:n}),m}));{let e;const r=[];for(const i of n){const n={...t,common:{...t.common,issues:[]},parent:null},a=i._parseSync({data:t.data,path:t.path,parent:n});if("valid"===a.status)return a;"dirty"!==a.status||e||(e={result:a,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const a=r.map((e=>new l(e)));return f(t,{code:s.invalid_union,unionErrors:a}),m}}get options(){return this._def.options}}le.create=(e,t)=>new le({options:e,typeName:Le.ZodUnion,...C(t)});const ce=e=>e instanceof ye?ce(e.schema):e instanceof Se?ce(e.innerType()):e instanceof be?[e.value]:e instanceof _e?e.options:e instanceof ke?r.objectValues(e.enum):e instanceof Pe?ce(e._def.innerType):e instanceof X?[void 0]:e instanceof ee?[null]:e instanceof Oe?[void 0,...ce(e.unwrap())]:e instanceof Ee?[null,...ce(e.unwrap())]:e instanceof Ie||e instanceof je?ce(e.unwrap()):e instanceof Te?ce(e._def.innerType):[];class ue extends A{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==i.object)return f(t,{code:s.invalid_type,expected:i.object,received:t.parsedType}),m;const n=this.discriminator,r=t.data[n],a=this.optionsMap.get(r);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(f(t,{code:s.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),m)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const r=new Map;for(const a of t){const t=ce(a.shape[e]);if(!t.length)throw new Error("A discriminator value for key `".concat(e,"` could not be extracted from all schema options"));for(const n of t){if(r.has(n))throw new Error("Discriminator property ".concat(String(e)," has duplicate value ").concat(String(n)));r.set(n,a)}}return new ue({typeName:Le.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...C(n)})}}function de(e,t){const n=o(e),a=o(t);if(e===t)return{valid:!0,data:e};if(n===i.object&&a===i.object){const n=r.objectKeys(t),a=r.objectKeys(e).filter((e=>-1!==n.indexOf(e))),i={...e,...t};for(const r of a){const n=de(e[r],t[r]);if(!n.valid)return{valid:!1};i[r]=n.data}return{valid:!0,data:i}}if(n===i.array&&a===i.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let r=0;r<e.length;r++){const a=de(e[r],t[r]);if(!a.valid)return{valid:!1};n.push(a.data)}return{valid:!0,data:n}}return n===i.date&&a===i.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}class he extends A{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(y(e)||y(r))return m;const a=de(e.value,r.value);return a.valid?((b(e)||b(r))&&t.dirty(),{status:t.value,value:a.data}):(f(n,{code:s.invalid_intersection_types}),m)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((e=>{let[t,n]=e;return r(t,n)})):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}he.create=(e,t,n)=>new he({left:e,right:t,typeName:Le.ZodIntersection,...C(n)});class fe extends A{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==i.array)return f(n,{code:s.invalid_type,expected:i.array,received:n.parsedType}),m;if(n.data.length<this._def.items.length)return f(n,{code:s.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),m;!this._def.rest&&n.data.length>this._def.items.length&&(f(n,{code:s.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map(((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new P(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(r).then((e=>p.mergeArray(t,e))):p.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new fe({...this._def,rest:e})}}fe.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new fe({items:e,typeName:Le.ZodTuple,rest:null,...C(t)})};class pe extends A{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==i.object)return f(n,{code:s.invalid_type,expected:i.object,received:n.parsedType}),m;const r=[],a=this._def.keyType,o=this._def.valueType;for(const i in n.data)r.push({key:a._parse(new P(n,i,n.path,i)),value:o._parse(new P(n,n.data[i],n.path,i)),alwaysSet:i in n.data});return n.common.async?p.mergeObjectAsync(t,r):p.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return new pe(t instanceof A?{keyType:e,valueType:t,typeName:Le.ZodRecord,...C(n)}:{keyType:q.create(),valueType:e,typeName:Le.ZodRecord,...C(t)})}}class me extends A{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==i.map)return f(n,{code:s.invalid_type,expected:i.map,received:n.parsedType}),m;const r=this._def.keyType,a=this._def.valueType,o=[...n.data.entries()].map(((e,t)=>{let[i,o]=e;return{key:r._parse(new P(n,i,n.path,[t,"key"])),value:a._parse(new P(n,o,n.path,[t,"value"]))}}));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of o){const r=await n.key,a=await n.value;if("aborted"===r.status||"aborted"===a.status)return m;"dirty"!==r.status&&"dirty"!==a.status||t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of o){const r=n.key,a=n.value;if("aborted"===r.status||"aborted"===a.status)return m;"dirty"!==r.status&&"dirty"!==a.status||t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}}}}me.create=(e,t,n)=>new me({valueType:t,keyType:e,typeName:Le.ZodMap,...C(n)});class ve extends A{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==i.set)return f(n,{code:s.invalid_type,expected:i.set,received:n.parsedType}),m;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(f(n,{code:s.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(f(n,{code:s.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const a=this._def.valueType;function o(e){const n=new Set;for(const r of e){if("aborted"===r.status)return m;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}const l=[...n.data.values()].map(((e,t)=>a._parse(new P(n,e,n.path,t))));return n.common.async?Promise.all(l).then((e=>o(e))):o(l)}min(e,t){return new ve({...this._def,minSize:{value:e,message:S.toString(t)}})}max(e,t){return new ve({...this._def,maxSize:{value:e,message:S.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ve.create=(e,t)=>new ve({valueType:e,minSize:null,maxSize:null,typeName:Le.ZodSet,...C(t)});class ge extends A{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==i.function)return f(t,{code:s.invalid_type,expected:i.function,received:t.parsedType}),m;function n(e,n){return h({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,d(),c].filter((e=>!!e)),issueData:{code:s.invalid_arguments,argumentsError:n}})}function r(e,n){return h({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,d(),c].filter((e=>!!e)),issueData:{code:s.invalid_return_type,returnTypeError:n}})}const a={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof xe){const e=this;return g((async function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];const c=new l([]),u=await e._def.args.parseAsync(i,a).catch((e=>{throw c.addIssue(n(i,e)),c})),d=await Reflect.apply(o,this,u);return await e._def.returns._def.type.parseAsync(d,a).catch((e=>{throw c.addIssue(r(d,e)),c}))}))}{const e=this;return g((function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];const c=e._def.args.safeParse(i,a);if(!c.success)throw new l([n(i,c.error)]);const u=Reflect.apply(o,this,c.data),d=e._def.returns.safeParse(u,a);if(!d.success)throw new l([r(u,d.error)]);return d.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ge({...this._def,args:fe.create(t).rest(ne.create())})}returns(e){return new ge({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new ge({args:e||fe.create([]).rest(ne.create()),returns:t||ne.create(),typeName:Le.ZodFunction,...C(n)})}}class ye extends A{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ye.create=(e,t)=>new ye({getter:e,typeName:Le.ZodLazy,...C(t)});class be extends A{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return f(t,{received:t.data,code:s.invalid_literal,expected:this._def.value}),m}return{status:"valid",value:e.data}}get value(){return this._def.value}}function we(e,t){return new _e({values:e,typeName:Le.ZodEnum,...C(t)})}be.create=(e,t)=>new be({value:e,typeName:Le.ZodLiteral,...C(t)});class _e extends A{constructor(){super(...arguments),O.set(this,void 0)}_parse(e){if("string"!==typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return f(t,{expected:r.joinValues(n),received:t.parsedType,code:s.invalid_type}),m}if(k(this,O,"f")||x(this,O,new Set(this._def.values),"f"),!k(this,O,"f").has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return f(t,{received:t.data,code:s.invalid_enum_value,options:n}),m}return g(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._def;return _e.create(e,{...this._def,...t})}exclude(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._def;return _e.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}O=new WeakMap,_e.create=we;class ke extends A{constructor(){super(...arguments),E.set(this,void 0)}_parse(e){const t=r.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==i.string&&n.parsedType!==i.number){const e=r.objectValues(t);return f(n,{expected:r.joinValues(e),received:n.parsedType,code:s.invalid_type}),m}if(k(this,E,"f")||x(this,E,new Set(r.getValidEnumValues(this._def.values)),"f"),!k(this,E,"f").has(e.data)){const e=r.objectValues(t);return f(n,{received:n.data,code:s.invalid_enum_value,options:e}),m}return g(e.data)}get enum(){return this._def.values}}E=new WeakMap,ke.create=(e,t)=>new ke({values:e,typeName:Le.ZodNativeEnum,...C(t)});class xe extends A{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==i.promise&&!1===t.common.async)return f(t,{code:s.invalid_type,expected:i.promise,received:t.parsedType}),m;const n=t.parsedType===i.promise?t.data:Promise.resolve(t.data);return g(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}xe.create=(e,t)=>new xe({type:e,typeName:Le.ZodPromise,...C(t)});class Se extends A{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Le.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=this._def.effect||null,i={addIssue:e=>{f(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===a.type){const e=a.transform(n.data,i);if(n.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return m;const r=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===r.status?m:"dirty"===r.status||"dirty"===t.value?v(r.value):r}));{if("aborted"===t.value)return m;const r=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===r.status?m:"dirty"===r.status||"dirty"===t.value?v(r.value):r}}if("refinement"===a.type){const e=e=>{const t=a.refinement(e,i);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?m:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?m:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===a.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!w(e))return e;const r=a.transform(e.value,i);if(r instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:r}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>w(e)?Promise.resolve(a.transform(e.value,i)).then((e=>({status:t.value,value:e}))):e))}r.assertNever(a)}}Se.create=(e,t,n)=>new Se({schema:e,typeName:Le.ZodEffects,effect:t,...C(n)}),Se.createWithPreprocess=(e,t,n)=>new Se({schema:t,effect:{type:"preprocess",transform:e},typeName:Le.ZodEffects,...C(n)});class Oe extends A{_parse(e){return this._getType(e)===i.undefined?g(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Oe.create=(e,t)=>new Oe({innerType:e,typeName:Le.ZodOptional,...C(t)});class Ee extends A{_parse(e){return this._getType(e)===i.null?g(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ee.create=(e,t)=>new Ee({innerType:e,typeName:Le.ZodNullable,...C(t)});class Pe extends A{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===i.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Pe.create=(e,t)=>new Pe({innerType:e,typeName:Le.ZodDefault,defaultValue:"function"===typeof t.default?t.default:()=>t.default,...C(t)});class Te extends A{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return _(r)?r.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new l(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new l(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Te.create=(e,t)=>new Te({innerType:e,typeName:Le.ZodCatch,catchValue:"function"===typeof t.catch?t.catch:()=>t.catch,...C(t)});class Ce extends A{_parse(e){if(this._getType(e)!==i.nan){const t=this._getOrReturnCtx(e);return f(t,{code:s.invalid_type,expected:i.nan,received:t.parsedType}),m}return{status:"valid",value:e.data}}}Ce.create=e=>new Ce({typeName:Le.ZodNaN,...C(e)});const Ae=Symbol("zod_brand");class Ie extends A{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Ne extends A{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?m:"dirty"===e.status?(t.dirty(),v(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?m:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new Ne({in:e,out:t,typeName:Le.ZodPipeline})}}class je extends A{_parse(e){const t=this._def.innerType._parse(e);return w(t)&&(t.value=Object.freeze(t.value)),t}unwrap(){return this._def.innerType}}function Re(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return e?te.create().superRefine(((r,a)=>{var i,o;if(!e(r)){const e="function"===typeof t?t(r):"string"===typeof t?{message:t}:t,s=null===(o=null!==(i=e.fatal)&&void 0!==i?i:n)||void 0===o||o,l="string"===typeof e?{message:e}:e;a.addIssue({code:"custom",...l,fatal:s})}})):te.create()}je.create=(e,t)=>new je({innerType:e,typeName:Le.ZodReadonly,...C(t)});const Me={object:se.lazycreate};var Le;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Le||(Le={}));const ze=q.create,De=K.create,Fe=Ce.create,Ue=J.create,Be=Y.create,Ze=G.create,Ve=Q.create,He=X.create,We=ee.create,qe=te.create,$e=ne.create,Ke=re.create,Je=ae.create,Ye=ie.create,Ge=se.create,Qe=se.strictCreate,Xe=le.create,et=ue.create,tt=he.create,nt=fe.create,rt=pe.create,at=me.create,it=ve.create,ot=ge.create,st=ye.create,lt=be.create,ct=_e.create,ut=ke.create,dt=xe.create,ht=Se.create,ft=Oe.create,pt=Ee.create,mt=Se.createWithPreprocess,vt=Ne.create,gt={string:e=>q.create({...e,coerce:!0}),number:e=>K.create({...e,coerce:!0}),boolean:e=>Y.create({...e,coerce:!0}),bigint:e=>J.create({...e,coerce:!0}),date:e=>G.create({...e,coerce:!0})},yt=m;var bt=Object.freeze({__proto__:null,defaultErrorMap:c,setErrorMap:function(e){u=e},getErrorMap:d,makeIssue:h,EMPTY_PATH:[],addIssueToContext:f,ParseStatus:p,INVALID:m,DIRTY:v,OK:g,isAborted:y,isDirty:b,isValid:w,isAsync:_,get util(){return r},get objectUtil(){return a},ZodParsedType:i,getParsedType:o,ZodType:A,datetimeRegex:W,ZodString:q,ZodNumber:K,ZodBigInt:J,ZodBoolean:Y,ZodDate:G,ZodSymbol:Q,ZodUndefined:X,ZodNull:ee,ZodAny:te,ZodUnknown:ne,ZodNever:re,ZodVoid:ae,ZodArray:ie,ZodObject:se,ZodUnion:le,ZodDiscriminatedUnion:ue,ZodIntersection:he,ZodTuple:fe,ZodRecord:pe,ZodMap:me,ZodSet:ve,ZodFunction:ge,ZodLazy:ye,ZodLiteral:be,ZodEnum:_e,ZodNativeEnum:ke,ZodPromise:xe,ZodEffects:Se,ZodTransformer:Se,ZodOptional:Oe,ZodNullable:Ee,ZodDefault:Pe,ZodCatch:Te,ZodNaN:Ce,BRAND:Ae,ZodBranded:Ie,ZodPipeline:Ne,ZodReadonly:je,custom:Re,Schema:A,ZodSchema:A,late:Me,get ZodFirstPartyTypeKind(){return Le},coerce:gt,any:qe,array:Ye,bigint:Ue,boolean:Be,date:Ze,discriminatedUnion:et,effect:ht,enum:ct,function:ot,instanceof:function(e){return Re((t=>t instanceof e),arguments.length>1&&void 0!==arguments[1]?arguments[1]:{message:"Input not instance of ".concat(e.name)})},intersection:tt,lazy:st,literal:lt,map:at,nan:Fe,nativeEnum:ut,never:Ke,null:We,nullable:pt,number:De,object:Ge,oboolean:()=>Be().optional(),onumber:()=>De().optional(),optional:ft,ostring:()=>ze().optional(),pipeline:vt,preprocess:mt,promise:dt,record:rt,set:it,strictObject:Qe,string:ze,symbol:Ve,transformer:ht,tuple:nt,undefined:He,union:Xe,unknown:$e,void:Je,NEVER:yt,ZodIssueCode:s,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:l})}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r](i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".b6f89065.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="speedtest-testdata:";n.l=(r,a,i,o)=>{if(e[r])e[r].push(a);else{var s,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[a];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(f);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise(((n,r)=>a=e[t]=[n,r]));r.push(a[2]=i);var o=n.p+n.u(t),s=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,a[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var a,i,o=r[0],s=r[1],l=r[2],c=0;if(o.some((t=>0!==e[t]))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(l)l(n)}for(t&&t(r);c<o.length;c++)i=o[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkspeedtest_testdata=self.webpackChunkspeedtest_testdata||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{APIConnectionError:()=>A,APIConnectionTimeoutError:()=>I,APIError:()=>T,APIUserAbortError:()=>C,AuthenticationError:()=>j,BadRequestError:()=>N,ConflictError:()=>L,InternalServerError:()=>F,NotFoundError:()=>M,OpenAIError:()=>P,PermissionDeniedError:()=>R,RateLimitError:()=>D,UnprocessableEntityError:()=>z});var t=n(5043),r=n(4391),a=n(579);const i=e=>{let{data:t,onTypeClick:n}=e;return(0,a.jsx)("div",{className:"modal-content",children:Object.entries(t).map((e=>{let[t,r]=e;return(0,a.jsx)("div",{className:"modal-content-row",children:r.map((e=>{let[t,r]=e;return(0,a.jsxs)("div",{className:"modal-content-block",children:[(0,a.jsx)("button",{className:"type-button",onClick:()=>(e=>{n(e)})(t),children:t}),Array.isArray(r)?r.map(((e,t)=>(0,a.jsx)("label",{className:"little-label",children:e},t))):(0,a.jsx)("label",{className:"little-label",children:r})]},t)}))},t)}))})},o={Basic:{Color:["Red","Blue","Black"],Boolean:["True","False"],Number:["0.25","5.2","1000"],Password:["Generate passwords with customizable requirements"],"Hex Color":["#142a0b","#FOF0F0","#0066FF"],ISBN:["574398570-7","938492119-X","758622794-2"]},Car:{"Car Make":["Honda","Ford","Pontiac"],"Car Model":["Prelude","Mustang","Trans Am"],"Card Model Year":["1994","2008","2001"],"Car VIN":["A random car VIN number,not correlated to othter car fields."]}},s=e=>{let{isOpen:n,onClose:r,onTypeSelected:s}=e;const[l,c]=(0,t.useState)(""),[u,d]=(0,t.useState)(o.Basic),h=e=>{d(o[e])};return(0,a.jsx)("div",{className:"modal ".concat(n?"open":""),children:(0,a.jsxs)("div",{className:"model-container",children:[(0,a.jsxs)("div",{className:"modal-header",children:[(0,a.jsx)("label",{className:"big-label",children:"Choose Type"}),(0,a.jsxs)("div",{className:"header-right",children:[(0,a.jsx)("input",{type:"text",placeholder:"Find Type...",onChange:e=>{c(e.target.value)}}),(0,a.jsx)("button",{className:"modal-close",onClick:r,children:(0,a.jsx)("span",{className:"bigger-symbol",children:"\u2613"})})]})]}),(0,a.jsxs)("div",{className:"modal-content-container",children:[(0,a.jsxs)("div",{className:"modal-sidebar",children:[(0,a.jsx)("button",{className:"modal-sidebar-button",onClick:()=>h("Basic"),children:"Basic"}),(0,a.jsx)("button",{className:"modal-sidebar-button",onClick:()=>h("Car"),children:"Car"}),(0,a.jsx)("button",{className:"modal-sidebar-button",onClick:()=>h("Commerce"),children:"Commerce"}),(0,a.jsx)("button",{className:"modal-sidebar-button",onClick:()=>h("IT"),children:"IT"}),(0,a.jsx)("button",{className:"modal-sidebar-button",onClick:()=>h("Health"),children:"Health"}),(0,a.jsx)("button",{className:"modal-sidebar-button",onClick:()=>h("Location"),children:"Location"})]}),u&&(0,a.jsx)(i,{data:((e,t)=>{const n=Object.entries(e),r=[];for(let a=0;a<n.length;a+=t)r.push(n.slice(a,a+t));return r})(u,3),onTypeClick:e=>{s(e),r()}})]})]})})},l=e=>{let{data:n,onUpdate:r}=e;const[i,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)("");return(0,a.jsxs)("div",{children:[(0,a.jsxs)("button",{className:"chooseTypeButton",onClick:()=>o(!0),value:n.type,children:[l||"Choose Type..",(0,a.jsx)("span",{className:"dropdown-arrow",children:"\u25bc"})]}),(0,a.jsx)(s,{isOpen:i,onClose:()=>o(!1),onTypeSelected:e=>{c(e),r({type:e})}})]})},c=e=>{let{data:t,onRemove:n,onUpdate:r}=e;return(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("input",{className:"field-input",value:t.name,onChange:e=>r({name:e.target.value})}),(0,a.jsx)(l,{data:t,onUpdate:r}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"blank:"}),(0,a.jsx)("input",{className:"blank-input",value:t.blank,onChange:e=>{const t=e.target.value.replace(/[^-\d.]/g,"");if(/^-?\d*(\.\d+)?$/.test(t)){const e=parseFloat(t);r({blank:e})}else console.error("Invalid input. Please enter a valid number.")}}),(0,a.jsx)("span",{children:"%"})]}),(0,a.jsx)("button",{className:"close-button",onClick:n,children:(0,a.jsx)("span",{className:"bigger-symbol",children:"\u2613"})})]})},u=e=>{let{data:n,onUpdate:r}=e;const[i,o]=(0,t.useState)(n.hasHeader);return(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("label",{children:"Model:"}),(0,a.jsxs)("select",{class:"dataFormat-select",onChange:e=>{const{value:t}=e.target;r({...n,model:t})},children:[(0,a.jsx)("option",{children:"gpt-3.5-turbo"}),(0,a.jsx)("option",{children:"gpt-4-turbo"}),(0,a.jsx)("option",{children:"moonshot-v1-8k"}),(0,a.jsx)("option",{children:"moonshot-v1-32k"}),(0,a.jsx)("option",{children:"GLM-3-Turbo"}),(0,a.jsx)("option",{children:"GLM-4"})]}),(0,a.jsx)("label",{children:"Rows:"}),(0,a.jsx)("input",{id:"lines",name:"lines",value:n.lines,className:"dataFormat-input",onChange:e=>{const{value:t}=e.target;r({...n,lines:t})}}),(0,a.jsx)("label",{children:"Format:"}),(0,a.jsxs)("select",{value:n.format,className:"dataFormat-select",onChange:e=>{const{value:t}=e.target;r({...n,format:t})},children:[(0,a.jsx)("option",{children:"CSV"}),(0,a.jsx)("option",{children:"JSON"})]}),(0,a.jsx)("label",{children:"Line Ending:"}),(0,a.jsxs)("select",{value:n.lineEnding,className:"dataFormat-select",onChange:e=>{const{value:t}=e.target;r({...n,lineEnding:t})},children:[(0,a.jsx)("option",{children:"Unix(LF)"}),(0,a.jsx)("option",{children:"Window(CRLF)"})]}),(0,a.jsx)("label",{children:"Include:"}),(0,a.jsxs)("label",{className:"dataFormat-label",children:[(0,a.jsx)("input",{type:"checkbox",className:"dataFormat-checkbox",checked:n.hasHeader,onChange:()=>{o(!i),r({...n,hasHeader:i})}}),"header"]})]})},d="4.38.5";let h,f,p,m,v,g,y,b,w,_=!1,k=null,x=null,S=null,O=null;class E{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}h||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{auto:!1};if(_)throw new Error("you must `import 'openai/shims/".concat(e.kind,"'` before importing anything else from openai"));if(h)throw new Error("can't `import 'openai/shims/".concat(e.kind,"'` after `import 'openai/shims/").concat(h,"'`"));_=t.auto,h=e.kind,f=e.fetch,k=e.Request,x=e.Response,S=e.Headers,p=e.FormData,O=e.Blob,m=e.File,v=e.ReadableStream,g=e.getMultipartRequestOptions,y=e.getDefaultAgent,b=e.fileFromPath,w=e.isFsReadStream}(function(){let{manuallyImported:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e?"You may need to use polyfills":"Add one of these imports before your first `import \u2026 from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,a,i;try{n=fetch,r=Request,a=Response,i=Headers}catch(o){throw new Error("this environment is missing the following Web Fetch API type: ".concat(o.message,". ").concat(t))}return{kind:"web",fetch:n,Request:r,Response:a,Headers:i,FormData:"undefined"!==typeof FormData?FormData:class{constructor(){throw new Error("file uploads aren't supported in this environment yet as 'FormData' is undefined. ".concat(t))}},Blob:"undefined"!==typeof Blob?Blob:class{constructor(){throw new Error("file uploads aren't supported in this environment yet as 'Blob' is undefined. ".concat(t))}},File:"undefined"!==typeof File?File:class{constructor(){throw new Error("file uploads aren't supported in this environment yet as 'File' is undefined. ".concat(t))}},ReadableStream:"undefined"!==typeof ReadableStream?ReadableStream:class{constructor(){throw new Error("streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ".concat(t))}},getMultipartRequestOptions:async(e,t)=>({...t,body:new E(e)}),getDefaultAgent:e=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:e=>!1}}(),{auto:!0});class P extends Error{}class T extends P{constructor(e,t,n,r){super("".concat(T.makeMessage(e,t,n))),this.status=e,this.headers=r,this.request_id=null===r||void 0===r?void 0:r["x-request-id"];const a=t;this.error=a,this.code=null===a||void 0===a?void 0:a.code,this.param=null===a||void 0===a?void 0:a.param,this.type=null===a||void 0===a?void 0:a.type}static makeMessage(e,t,n){const r=null!==t&&void 0!==t&&t.message?"string"===typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&r?"".concat(e," ").concat(r):e?"".concat(e," status code (no body)"):r||"(no status code or body)"}static generate(e,t,n,r){if(!e)return new A({cause:xe(t)});const a=null===t||void 0===t?void 0:t.error;return 400===e?new N(e,a,n,r):401===e?new j(e,a,n,r):403===e?new R(e,a,n,r):404===e?new M(e,a,n,r):409===e?new L(e,a,n,r):422===e?new z(e,a,n,r):429===e?new D(e,a,n,r):e>=500?new F(e,a,n,r):new T(e,a,n,r)}}class C extends T{constructor(){let{message:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class A extends T{constructor(e){let{message:t,cause:n}=e;super(void 0,void 0,t||"Connection error.",void 0),this.status=void 0,n&&(this.cause=n)}}class I extends A{constructor(){let{message:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({message:null!==e&&void 0!==e?e:"Request timed out."})}}class N extends T{constructor(){super(...arguments),this.status=400}}class j extends T{constructor(){super(...arguments),this.status=401}}class R extends T{constructor(){super(...arguments),this.status=403}}class M extends T{constructor(){super(...arguments),this.status=404}}class L extends T{constructor(){super(...arguments),this.status=409}}class z extends T{constructor(){super(...arguments),this.status=422}}class D extends T{constructor(){super(...arguments),this.status=429}}class F extends T{}class U{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let n=!1;return new U((async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(const n of async function*(e,t){if(!e.body)throw t.abort(),new P("Attempted to iterate over a response with no body");const n=new Z,r=new V,a=H(e.body);for await(const i of async function*(e){let t=new Uint8Array;for await(const n of e){if(null==n)continue;const e=n instanceof ArrayBuffer?new Uint8Array(n):"string"===typeof n?(new TextEncoder).encode(n):n;let r,a=new Uint8Array(t.length+e.length);for(a.set(t),a.set(e,t.length),t=a;-1!==(r=B(t));)yield t.slice(0,r),t=t.slice(r)}t.length>0&&(yield t)}(a))for(const e of r.decode(i)){const t=n.decode(e);t&&(yield t)}for(const i of r.flush()){const e=n.decode(i);e&&(yield e)}}(e,t))if(!r)if(n.data.startsWith("[DONE]"))r=!0;else if(null===n.event){let e;try{e=JSON.parse(n.data)}catch(a){throw console.error("Could not parse message into JSON:",n.data),console.error("From chunk:",n.raw),a}if(e&&e.error)throw new T(void 0,e.error,void 0,void 0);yield e}else{let e;try{e=JSON.parse(n.data)}catch(a){throw console.error("Could not parse message into JSON:",n.data),console.error("From chunk:",n.raw),a}if("error"==n.event)throw new T(void 0,e.error,e.message,void 0);yield{event:n.event,data:e}}r=!0}catch(a){if(a instanceof Error&&"AbortError"===a.name)return;throw a}finally{r||t.abort()}}),t)}static fromReadableStream(e,t){let n=!1;return new U((async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(const t of async function*(){const t=new V,n=H(e);for await(const e of n)for(const n of t.decode(e))yield n;for(const e of t.flush())yield e}())r||t&&(yield JSON.parse(t));r=!0}catch(a){if(a instanceof Error&&"AbortError"===a.name)return;throw a}finally{r||t.abort()}}),t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),r=r=>({next:()=>{if(0===r.length){const r=n.next();e.push(r),t.push(r)}return r.shift()}});return[new U((()=>r(e)),this.controller),new U((()=>r(t)),this.controller)]}toReadableStream(){const e=this;let t;const n=new TextEncoder;return new v({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:r,done:a}=await t.next();if(a)return e.close();const i=n.encode(JSON.stringify(r)+"\n");e.enqueue(i)}catch(r){e.error(r)}},async cancel(){var e,n;await(null===(e=(n=t).return)||void 0===e?void 0:e.call(n))}})}}function B(e){for(let t=0;t<e.length-2;t++){if(10===e[t]&&10===e[t+1])return t+2;if(13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return-1}class Z{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,r]=function(e,t){const n=e.indexOf(t);if(-1!==n)return[e.substring(0,n),t,e.substring(n+t.length)];return[e,"",""]}(e,":");return r.startsWith(" ")&&(r=r.substring(1)),"event"===t?this.event=r:"data"===t&&this.data.push(r),null}}class V{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];const n=V.NEWLINE_CHARS.has(t[t.length-1]||"");let r=t.split(V.NEWLINE_REGEXP);return n&&r.pop(),1!==r.length||n?(this.buffer.length>0&&(r=[this.buffer.join("")+r[0],...r.slice(1)],this.buffer=[]),n||(this.buffer=[r.pop()||""]),r):(this.buffer.push(r[0]),[])}decodeText(e){if(null==e)return"";if("string"===typeof e)return e;if("undefined"!==typeof Buffer){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new P("Unexpected: received non-Uint8Array (".concat(e.constructor.name,') stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.'))}if("undefined"!==typeof TextDecoder){var t;if(e instanceof Uint8Array||e instanceof ArrayBuffer)return null!==(t=this.textDecoder)&&void 0!==t||(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new P("Unexpected: received non-Uint8Array/ArrayBuffer (".concat(e.constructor.name,") in a web platform. Please report this error."))}throw new P("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}function H(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return null!==e&&void 0!==e&&e.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}V.NEWLINE_CHARS=new Set(["\n","\r"]),V.NEWLINE_REGEXP=/\r\n|[\n\r]/g;const W=e=>null!=e&&"object"===typeof e&&"string"===typeof e.url&&"function"===typeof e.blob,q=e=>null!=e&&"object"===typeof e&&"string"===typeof e.name&&"number"===typeof e.lastModified&&$(e),$=e=>null!=e&&"object"===typeof e&&"number"===typeof e.size&&"string"===typeof e.type&&"function"===typeof e.text&&"function"===typeof e.slice&&"function"===typeof e.arrayBuffer,K=e=>q(e)||W(e)||w(e);async function J(e,t,n){var r,a;if(e=await e,null!==(r=n)&&void 0!==r||(n=q(e)?{lastModified:e.lastModified,type:e.type}:{}),W(e)){var i;const r=await e.blob();return t||(t=null!==(i=new URL(e.url).pathname.split(/[\\/]/).pop())&&void 0!==i?i:"unknown_file"),new m([r],t,n)}const o=await async function(e){let t=[];if("string"===typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if($(e))t.push(await e.arrayBuffer());else{var n;if(!G(e))throw new Error("Unexpected data type: ".concat(typeof e,"; constructor: ").concat(null===e||void 0===e||null===(n=e.constructor)||void 0===n?void 0:n.name,"; props: ").concat(function(e){const t=Object.getOwnPropertyNames(e);return"[".concat(t.map((e=>'"'.concat(e,'"'))).join(", "),"]")}(e)));for await(const n of e)t.push(n)}return t}(e);if(t||(t=null!==(a=function(e){var t;return Y(e.name)||Y(e.filename)||(null===(t=Y(e.path))||void 0===t?void 0:t.split(/[\\/]/).pop())}(e))&&void 0!==a?a:"unknown_file"),!n.type){var s;const e=null===(s=o[0])||void 0===s?void 0:s.type;"string"===typeof e&&(n={...n,type:e})}return new m(o,t,n)}const Y=e=>"string"===typeof e?e:"undefined"!==typeof Buffer&&e instanceof Buffer?String(e):void 0,G=e=>null!=e&&"object"===typeof e&&"function"===typeof e[Symbol.asyncIterator],Q=e=>e&&"object"===typeof e&&e.body&&"MultipartBody"===e[Symbol.toStringTag],X=async e=>{const t=await ee(e.body);return g(t,e)},ee=async e=>{const t=new p;return await Promise.all(Object.entries(e||{}).map((e=>{let[n,r]=e;return te(t,n,r)}))),t},te=async(e,t,n)=>{if(void 0!==n){if(null==n)throw new TypeError('Received null for "'.concat(t,"\"; to pass null in FormData, you must use the string 'null'"));if("string"===typeof n||"number"===typeof n||"boolean"===typeof n)e.append(t,String(n));else if(K(n)){const r=await J(n);e.append(t,r)}else if(Array.isArray(n))await Promise.all(n.map((n=>te(e,t+"[]",n))));else{if("object"!==typeof n)throw new TypeError("Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ".concat(n," instead"));await Promise.all(Object.entries(n).map((n=>{let[r,a]=n;return te(e,"".concat(t,"[").concat(r,"]"),a)})))}}};var ne,re=function(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n},ae=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};async function ie(e){const{response:t}=e;if(e.options.stream)return Te("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):U.fromSSEResponse(t,e.controller);if(204===t.status)return null;if(e.options.__binaryResponse)return t;const n=t.headers.get("content-type");if((null===n||void 0===n?void 0:n.includes("application/json"))||(null===n||void 0===n?void 0:n.includes("application/vnd.api+json"))){const e=await t.json();return Te("response",t.status,t.url,t.headers,e),e}const r=await t.text();return Te("response",t.status,t.url,t.headers,r),r}class oe extends Promise{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie;super((e=>{e(null)})),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new oe(this.responsePromise,(async t=>e(await this.parseResponse(t))))}asResponse(){return this.responsePromise.then((e=>e.response))}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class se{constructor(e){let{baseURL:t,maxRetries:n=2,timeout:r=6e5,httpAgent:a,fetch:i}=e;this.baseURL=t,this.maxRetries=ke("maxRetries",n),this.timeout=ke("timeout",r),this.httpAgent=a,this.fetch=null!==i&&void 0!==i?i:f}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...ge(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return"stainless-node-retry-".concat(Ce())}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then((n=>({method:e,path:t,...n}))))}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}calculateContentLength(e){if("string"===typeof e){if("undefined"!==typeof Buffer)return Buffer.byteLength(e,"utf8").toString();if("undefined"!==typeof TextEncoder){return(new TextEncoder).encode(e).length.toString()}}return null}buildRequest(e){var t,n,r,a,i,o;const{method:s,path:l,query:c,headers:u={}}=e,d=Q(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,h=this.calculateContentLength(d),f=this.buildURL(l,c);"timeout"in e&&ke("timeout",e.timeout);const p=null!==(t=e.timeout)&&void 0!==t?t:this.timeout,m=null!==(n=null!==(r=e.httpAgent)&&void 0!==r?r:this.httpAgent)&&void 0!==n?n:y(f),v=p+1e3;"number"===typeof(null===m||void 0===m||null===(a=m.options)||void 0===a?void 0:a.timeout)&&v>(null!==(i=m.options.timeout)&&void 0!==i?i:0)&&(m.options.timeout=v),this.idempotencyHeader&&"get"!==s&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),u[this.idempotencyHeader]=e.idempotencyKey);return{req:{method:s,...d&&{body:d},headers:this.buildHeaders({options:e,headers:u,contentLength:h}),...m&&{agent:m},signal:null!==(o=e.signal)&&void 0!==o?o:null},url:f,timeout:p}}buildHeaders(e){let{options:t,headers:n,contentLength:r}=e;const a={};r&&(a["content-length"]=r);return Pe(a,this.defaultHeaders(t)),Pe(a,n),Q(t.body)&&"node"!==h&&delete a["content-type"],this.validateHeaders(a,n),a}async prepareOptions(e){}async prepareRequest(e,t){let{url:n,options:r}=t}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map((e=>[...e]))):{...e}:{}}makeStatusError(e,t,n,r){return T.generate(e,t,n,r)}request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new oe(this.makeRequest(e,t))}async makeRequest(e,t){var n;const r=await e;var a;null==t&&(t=null!==(a=r.maxRetries)&&void 0!==a?a:this.maxRetries);await this.prepareOptions(r);const{req:i,url:o,timeout:s}=this.buildRequest(r);if(await this.prepareRequest(i,{url:o,options:r}),Te("request",o,r,i.headers),null!==(n=r.signal)&&void 0!==n&&n.aborted)throw new C;const l=new AbortController,c=await this.fetchWithTimeout(o,i,s,l).catch(xe);if(c instanceof Error){var u;if(null!==(u=r.signal)&&void 0!==u&&u.aborted)throw new C;if(t)return this.retryRequest(r,t);if("AbortError"===c.name)throw new I;throw new A({cause:c})}const d=ue(c.headers);if(!c.ok){if(t&&this.shouldRetry(c)){const e="retrying, ".concat(t," attempts remaining");return Te("response (error; ".concat(e,")"),c.status,o,d),this.retryRequest(r,t,d)}const e=await c.text().catch((e=>xe(e).message)),n=ye(e),a=n?void 0:e;Te("response (error; ".concat(t?"(error; no more retries left)":"(error; not retryable)",")"),c.status,o,d,a);throw this.makeStatusError(c.status,n,a,d)}return{response:c,options:r,controller:l}}requestAPIList(e,t){const n=this.makeRequest(t,null);return new ce(this,n,e)}buildURL(e,t){const n=we(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return Oe(r)||(t={...r,...t}),"object"===typeof t&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}stringifyQuery(e){return Object.entries(e).filter((e=>{let[t,n]=e;return"undefined"!==typeof n})).map((e=>{let[t,n]=e;if("string"===typeof n||"number"===typeof n||"boolean"===typeof n)return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n));if(null===n)return"".concat(encodeURIComponent(t),"=");throw new P("Cannot stringify type ".concat(typeof n,"; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case."))})).join("&")}async fetchWithTimeout(e,t,n,r){const{signal:a,...i}=t||{};a&&a.addEventListener("abort",(()=>r.abort()));const o=setTimeout((()=>r.abort()),n);return this.getRequestClient().fetch.call(void 0,e,{signal:r.signal,...i}).finally((()=>{clearTimeout(o)}))}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||(409===e.status||(429===e.status||e.status>=500)))}async retryRequest(e,t,n){let r;const a=null===n||void 0===n?void 0:n["retry-after-ms"];if(a){const e=parseFloat(a);Number.isNaN(e)||(r=e)}const i=null===n||void 0===n?void 0:n["retry-after"];if(i&&!r){const e=parseFloat(i);r=Number.isNaN(e)?Date.parse(i)-Date.now():1e3*e}if(!(r&&0<=r&&r<6e4)){var o;const n=null!==(o=e.maxRetries)&&void 0!==o?o:this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(t,n)}return await _e(r),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const n=t-e;return Math.min(.5*Math.pow(2,n),8)*(1-.25*Math.random())*1e3}getUserAgent(){return"".concat(this.constructor.name,"/JS ").concat(d)}}class le{constructor(e,t,n,r){ne.set(this,void 0),re(this,ne,e,"f"),this.options=r,this.response=t,this.body=n}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageInfo()}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new P("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&"object"===typeof t.query)t.query={...t.query,...e.params};else if("url"in e){const n=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[t,r]of n)e.url.searchParams.set(t,r);t.query=void 0,t.path=e.url.toString()}return await ae(this,ne,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(ne=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class ce extends oe{constructor(e,t,n){super(t,(async t=>new n(e,t.response,await ie(t),t.options)))}async*[Symbol.asyncIterator](){const e=await(this);for await(const t of e)yield t}}const ue=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){const n=t.toString();return e[n.toLowerCase()]||e[n]}}),de={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryResponse:!0,__streamClass:!0},he=e=>"object"===typeof e&&null!==e&&!Oe(e)&&Object.keys(e).every((e=>Ee(de,e))),fe=()=>{var e,t;if("undefined"!==typeof Deno&&null!=Deno.build)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":d,"X-Stainless-OS":me(Deno.build.os),"X-Stainless-Arch":pe(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"===typeof Deno.version?Deno.version:null!==(e=null===(t=Deno.version)||void 0===t?void 0:t.deno)&&void 0!==e?e:"unknown"};if("undefined"!==typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":d,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"other:".concat(EdgeRuntime),"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if("[object process]"===Object.prototype.toString.call("undefined"!==typeof process?process:0))return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":d,"X-Stainless-OS":me(process.platform),"X-Stainless-Arch":pe(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const n=function(){if("undefined"===typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const e=n.exec(navigator.userAgent);if(e){const n=e[1]||0,r=e[2]||0,a=e[3]||0;return{browser:t,version:"".concat(n,".").concat(r,".").concat(a)}}}return null}();return n?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":d,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"browser:".concat(n.browser),"X-Stainless-Runtime-Version":n.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":d,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};const pe=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?"other:".concat(e):"unknown",me=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?"Other:".concat(e):"Unknown";let ve;const ge=()=>{var e;return null!==(e=ve)&&void 0!==e?e:ve=fe()},ye=e=>{try{return JSON.parse(e)}catch(t){return}},be=new RegExp("^(?:[a-z]+:)?//","i"),we=e=>be.test(e),_e=e=>new Promise((t=>setTimeout(t,e))),ke=(e,t)=>{if("number"!==typeof t||!Number.isInteger(t))throw new P("".concat(e," must be an integer"));if(t<0)throw new P("".concat(e," must be a positive integer"));return t},xe=e=>e instanceof Error?e:new Error(e),Se=e=>{var t,n,r,a;return"undefined"!==typeof process?null!==(t=null===(n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===n||null===(n=n[e])||void 0===n?void 0:n.trim())&&void 0!==t?t:void 0:"undefined"!==typeof Deno?null===(r=Deno.env)||void 0===r||null===(a=r.get)||void 0===a||null===(a=a.call(r,e))||void 0===a?void 0:a.trim():void 0};function Oe(e){if(!e)return!0;for(const t in e)return!1;return!0}function Ee(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Pe(e,t){for(const n in t){if(!Ee(t,n))continue;const r=n.toLowerCase();if(!r)continue;const a=t[n];null===a?delete e[r]:void 0!==a&&(e[r]=a)}}function Te(e){var t;if("undefined"!==typeof process&&"true"===(null===(t=process)||void 0===t||null===(t={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===t?void 0:t.DEBUG)){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];console.log("OpenAI:DEBUG:".concat(e),...r)}}const Ce=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));function Ae(e){return null!=e&&"object"===typeof e&&!Array.isArray(e)}class Ie extends le{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.object=n.object}getPaginatedItems(){var e;return null!==(e=this.data)&&void 0!==e?e:[]}nextPageParams(){return null}nextPageInfo(){return null}}class Ne extends le{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[]}getPaginatedItems(){var e;return null!==(e=this.data)&&void 0!==e?e:[]}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var e;const t=this.getPaginatedItems();if(!t.length)return null;const n=null===(e=t[t.length-1])||void 0===e?void 0:e.id;return n?{params:{after:n}}:null}}class je{constructor(e){this._client=e}}class Re extends je{create(e,t){var n;return this._client.post("/completions",{body:e,...t,stream:null!==(n=e.stream)&&void 0!==n&&n})}}Re||(Re={});class Me extends je{create(e,t){var n;return this._client.post("/chat/completions",{body:e,...t,stream:null!==(n=e.stream)&&void 0!==n&&n})}}Me||(Me={});class Le extends je{constructor(){super(...arguments),this.completions=new Me(this._client)}}!function(e){e.Completions=Me}(Le||(Le={}));class ze extends je{create(e,t){return this._client.post("/embeddings",{body:e,...t})}}ze||(ze={});class De extends je{create(e,t){return this._client.post("/files",X({body:e,...t}))}retrieve(e,t){return this._client.get("/files/".concat(e),t)}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return he(e)?this.list({},e):this._client.getAPIList("/files",Fe,{query:e,...t})}del(e,t){return this._client.delete("/files/".concat(e),t)}content(e,t){return this._client.get("/files/".concat(e,"/content"),{...t,__binaryResponse:!0})}retrieveContent(e,t){return this._client.get("/files/".concat(e,"/content"),{...t,headers:{Accept:"application/json",...null===t||void 0===t?void 0:t.headers}})}async waitForProcessing(e){let{pollInterval:t=5e3,maxWait:n=18e5}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=new Set(["processed","error","deleted"]),a=Date.now();let i=await this.retrieve(e);for(;!i.status||!r.has(i.status);)if(await _e(t),i=await this.retrieve(e),Date.now()-a>n)throw new I({message:"Giving up on waiting for file ".concat(e," to finish processing after ").concat(n," milliseconds.")});return i}}class Fe extends Ie{}!function(e){e.FileObjectsPage=Fe}(De||(De={}));class Ue extends je{createVariation(e,t){return this._client.post("/images/variations",X({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",X({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}Ue||(Ue={});class Be extends je{create(e,t){return this._client.post("/audio/speech",{body:e,...t,__binaryResponse:!0})}}Be||(Be={});class Ze extends je{create(e,t){return this._client.post("/audio/transcriptions",X({body:e,...t}))}}Ze||(Ze={});class Ve extends je{create(e,t){return this._client.post("/audio/translations",X({body:e,...t}))}}Ve||(Ve={});class He extends je{constructor(){super(...arguments),this.transcriptions=new Ze(this._client),this.translations=new Ve(this._client),this.speech=new Be(this._client)}}!function(e){e.Transcriptions=Ze,e.Translations=Ve,e.Speech=Be}(He||(He={}));class We extends je{create(e,t){return this._client.post("/moderations",{body:e,...t})}}We||(We={});class qe extends je{retrieve(e,t){return this._client.get("/models/".concat(e),t)}list(e){return this._client.getAPIList("/models",$e,e)}del(e,t){return this._client.delete("/models/".concat(e),t)}}class $e extends Ie{}!function(e){e.ModelsPage=$e}(qe||(qe={}));class Ke extends je{list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return he(t)?this.list(e,{},t):this._client.getAPIList("/fine_tuning/jobs/".concat(e,"/checkpoints"),Je,{query:t,...n})}}class Je extends Ne{}!function(e){e.FineTuningJobCheckpointsPage=Je}(Ke||(Ke={}));class Ye extends je{constructor(){super(...arguments),this.checkpoints=new Ke(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get("/fine_tuning/jobs/".concat(e),t)}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return he(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Ge,{query:e,...t})}cancel(e,t){return this._client.post("/fine_tuning/jobs/".concat(e,"/cancel"),t)}listEvents(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return he(t)?this.listEvents(e,{},t):this._client.getAPIList("/fine_tuning/jobs/".concat(e,"/events"),Qe,{query:t,...n})}}class Ge extends Ne{}class Qe extends Ne{}!function(e){e.FineTuningJobsPage=Ge,e.FineTuningJobEventsPage=Qe,e.Checkpoints=Ke,e.FineTuningJobCheckpointsPage=Je}(Ye||(Ye={}));class Xe extends je{constructor(){super(...arguments),this.jobs=new Ye(this._client)}}!function(e){e.Jobs=Ye,e.FineTuningJobsPage=Ge,e.FineTuningJobEventsPage=Qe}(Xe||(Xe={}));class et extends je{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...null===t||void 0===t?void 0:t.headers}})}retrieve(e,t){return this._client.get("/assistants/".concat(e),{...t,headers:{"OpenAI-Beta":"assistants=v2",...null===t||void 0===t?void 0:t.headers}})}update(e,t,n){return this._client.post("/assistants/".concat(e),{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null===n||void 0===n?void 0:n.headers}})}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return he(e)?this.list({},e):this._client.getAPIList("/assistants",tt,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...null===t||void 0===t?void 0:t.headers}})}del(e,t){return this._client.delete("/assistants/".concat(e),{...t,headers:{"OpenAI-Beta":"assistants=v2",...null===t||void 0===t?void 0:t.headers}})}}class tt extends Ne{}function nt(e){return"function"===typeof e.parse}!function(e){e.AssistantsPage=tt}(et||(et={}));const rt=e=>"assistant"===(null===e||void 0===e?void 0:e.role),at=e=>"function"===(null===e||void 0===e?void 0:e.role),it=e=>"tool"===(null===e||void 0===e?void 0:e.role);var ot,st,lt,ct,ut,dt,ht,ft,pt,mt,vt,gt,yt,bt,wt,_t,kt,xt,St,Ot,Et=function(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n},Pt=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const Tt=10;class Ct{constructor(){ot.add(this),this.controller=new AbortController,st.set(this,void 0),lt.set(this,(()=>{})),ct.set(this,(()=>{})),ut.set(this,void 0),dt.set(this,(()=>{})),ht.set(this,(()=>{})),ft.set(this,{}),this._chatCompletions=[],this.messages=[],pt.set(this,!1),mt.set(this,!1),vt.set(this,!1),gt.set(this,!1),xt.set(this,(e=>{if(Et(this,mt,!0,"f"),e instanceof Error&&"AbortError"===e.name&&(e=new C),e instanceof C)return Et(this,vt,!0,"f"),this._emit("abort",e);if(e instanceof P)return this._emit("error",e);if(e instanceof Error){const t=new P(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new P(String(e)))})),Et(this,st,new Promise(((e,t)=>{Et(this,lt,e,"f"),Et(this,ct,t,"f")})),"f"),Et(this,ut,new Promise(((e,t)=>{Et(this,dt,e,"f"),Et(this,ht,t,"f")})),"f"),Pt(this,st,"f").catch((()=>{})),Pt(this,ut,"f").catch((()=>{}))}_run(e){setTimeout((()=>{e().then((()=>{this._emitFinal(),this._emit("end")}),Pt(this,xt,"f"))}),0)}_addChatCompletion(e){var t;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=null===(t=e.choices[0])||void 0===t?void 0:t.message;return n&&this._addMessage(n),e}_addMessage(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("content"in e||(e.content=null),this.messages.push(e),t)if(this._emit("message",e),(at(e)||it(e))&&e.content)this._emit("functionCallResult",e.content);else if(rt(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(rt(e)&&e.tool_calls)for(const n of e.tool_calls)"function"===n.type&&this._emit("functionCall",n.function)}_connected(){this.ended||(Pt(this,lt,"f").call(this),this._emit("connect"))}get ended(){return Pt(this,pt,"f")}get errored(){return Pt(this,mt,"f")}get aborted(){return Pt(this,vt,"f")}abort(){this.controller.abort()}on(e,t){return(Pt(this,ft,"f")[e]||(Pt(this,ft,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=Pt(this,ft,"f")[e];if(!n)return this;const r=n.findIndex((e=>e.listener===t));return r>=0&&n.splice(r,1),this}once(e,t){return(Pt(this,ft,"f")[e]||(Pt(this,ft,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise(((t,n)=>{Et(this,gt,!0,"f"),"error"!==e&&this.once("error",n),this.once(e,t)}))}async done(){Et(this,gt,!0,"f"),await Pt(this,ut,"f")}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new P("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Pt(this,ot,"m",yt).call(this)}async finalMessage(){return await this.done(),Pt(this,ot,"m",bt).call(this)}async finalFunctionCall(){return await this.done(),Pt(this,ot,"m",wt).call(this)}async finalFunctionCallResult(){return await this.done(),Pt(this,ot,"m",_t).call(this)}async totalUsage(){return await this.done(),Pt(this,ot,"m",kt).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(Pt(this,pt,"f"))return;"end"===e&&(Et(this,pt,!0,"f"),Pt(this,dt,"f").call(this));const a=Pt(this,ft,"f")[e];if(a&&(Pt(this,ft,"f")[e]=a.filter((e=>!e.once)),a.forEach((e=>{let{listener:t}=e;return t(...n)}))),"abort"===e){const e=n[0];return Pt(this,gt,"f")||null!==a&&void 0!==a&&a.length||Promise.reject(e),Pt(this,ct,"f").call(this,e),Pt(this,ht,"f").call(this,e),void this._emit("end")}if("error"===e){const e=n[0];Pt(this,gt,"f")||null!==a&&void 0!==a&&a.length||Promise.reject(e),Pt(this,ct,"f").call(this,e),Pt(this,ht,"f").call(this,e),this._emit("end")}}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=Pt(this,ot,"m",bt).call(this);t&&this._emit("finalMessage",t);const n=Pt(this,ot,"m",yt).call(this);n&&this._emit("finalContent",n);const r=Pt(this,ot,"m",wt).call(this);r&&this._emit("finalFunctionCall",r);const a=Pt(this,ot,"m",_t).call(this);null!=a&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some((e=>e.usage))&&this._emit("totalUsage",Pt(this,ot,"m",kt).call(this))}async _createChatCompletion(e,t,n){const r=null===n||void 0===n?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",(()=>this.controller.abort()))),Pt(this,ot,"m",St).call(this,t);const a=await e.create({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(a)}async _runChatCompletion(e,t,n){for(const r of t.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,t,n)}async _runFunctions(e,t,n){const r="function",{function_call:a="auto",stream:i,...o}=t,s="string"!==typeof a&&(null===a||void 0===a?void 0:a.name),{maxChatCompletions:l=Tt}=n||{},c={};for(const f of t.functions)c[f.name||f.function.name]=f;const u=t.functions.map((e=>({name:e.name||e.function.name,parameters:e.parameters,description:e.description})));for(const f of t.messages)this._addMessage(f,!1);for(let f=0;f<l;++f){var d;const t=null===(d=(await this._createChatCompletion(e,{...o,function_call:a,functions:u,messages:[...this.messages]},n)).choices[0])||void 0===d?void 0:d.message;if(!t)throw new P("missing message in ChatCompletion response");if(!t.function_call)return;const{name:i,arguments:l}=t.function_call,f=c[i];if(!f){const e="Invalid function_call: ".concat(JSON.stringify(i),". Available options are: ").concat(u.map((e=>JSON.stringify(e.name))).join(", "),". Please try again");this._addMessage({role:r,name:i,content:e});continue}if(s&&s!==i){const e="Invalid function_call: ".concat(JSON.stringify(i),". ").concat(JSON.stringify(s)," requested. Please try again");this._addMessage({role:r,name:i,content:e});continue}let p;try{p=nt(f)?await f.parse(l):l}catch(h){this._addMessage({role:r,name:i,content:h instanceof Error?h.message:String(h)});continue}const m=await f.function(p,this),v=Pt(this,ot,"m",Ot).call(this,m);if(this._addMessage({role:r,name:i,content:v}),s)return}}async _runTools(e,t,n){var r;const a="tool",{tool_choice:i="auto",stream:o,...s}=t,l="string"!==typeof i&&(null===i||void 0===i||null===(r=i.function)||void 0===r?void 0:r.name),{maxChatCompletions:c=Tt}=n||{},u={};for(const p of t.tools)"function"===p.type&&(u[p.function.name||p.function.function.name]=p.function);const d="tools"in t?t.tools.map((e=>"function"===e.type?{type:"function",function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description}}:e)):void 0;for(const p of t.messages)this._addMessage(p,!1);for(let p=0;p<c;++p){var h;const t=null===(h=(await this._createChatCompletion(e,{...s,tool_choice:i,tools:d,messages:[...this.messages]},n)).choices[0])||void 0===h?void 0:h.message;if(!t)throw new P("missing message in ChatCompletion response");if(!t.tool_calls)return;for(const e of t.tool_calls){if("function"!==e.type)continue;const t=e.id,{name:n,arguments:r}=e.function,i=u[n];if(!i){const e="Invalid tool_call: ".concat(JSON.stringify(n),". Available options are: ").concat(d.map((e=>JSON.stringify(e.function.name))).join(", "),". Please try again");this._addMessage({role:a,tool_call_id:t,content:e});continue}if(l&&l!==n){const e="Invalid tool_call: ".concat(JSON.stringify(n),". ").concat(JSON.stringify(l)," requested. Please try again");this._addMessage({role:a,tool_call_id:t,content:e});continue}let o;try{o=nt(i)?await i.parse(r):r}catch(f){const e=f instanceof Error?f.message:String(f);this._addMessage({role:a,tool_call_id:t,content:e});continue}const s=await i.function(o,this),c=Pt(this,ot,"m",Ot).call(this,s);if(this._addMessage({role:a,tool_call_id:t,content:c}),l)return}}}}st=new WeakMap,lt=new WeakMap,ct=new WeakMap,ut=new WeakMap,dt=new WeakMap,ht=new WeakMap,ft=new WeakMap,pt=new WeakMap,mt=new WeakMap,vt=new WeakMap,gt=new WeakMap,xt=new WeakMap,ot=new WeakSet,yt=function(){var e;return null!==(e=Pt(this,ot,"m",bt).call(this).content)&&void 0!==e?e:null},bt=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];var t;if(rt(n))return{...n,content:null!==(t=n.content)&&void 0!==t?t:null}}throw new P("stream ended without producing a ChatCompletionMessage with role=assistant")},wt=function(){for(let n=this.messages.length-1;n>=0;n--){var e;const r=this.messages[n];if(rt(r)&&null!==r&&void 0!==r&&r.function_call)return r.function_call;var t;if(rt(r)&&null!==r&&void 0!==r&&null!==(e=r.tool_calls)&&void 0!==e&&e.length)return null===(t=r.tool_calls.at(-1))||void 0===t?void 0:t.function}},_t=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(at(t)&&null!=t.content)return t.content;if(it(t)&&null!=t.content&&this.messages.some((e=>{var n;return"assistant"===e.role&&(null===(n=e.tool_calls)||void 0===n?void 0:n.some((e=>"function"===e.type&&e.id===t.tool_call_id)))})))return t.content}},kt=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},St=function(e){if(null!=e.n&&e.n>1)throw new P("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Ot=function(e){return"string"===typeof e?e:void 0===e?"undefined":JSON.stringify(e)};class At extends Ct{static runFunctions(e,t,n){const r=new At,a={...n,headers:{...null===n||void 0===n?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run((()=>r._runFunctions(e,t,a))),r}static runTools(e,t,n){const r=new At,a={...n,headers:{...null===n||void 0===n?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run((()=>r._runTools(e,t,a))),r}_addMessage(e){super._addMessage(e),rt(e)&&e.content&&this._emit("content",e.content)}}var It,Nt,jt,Rt,Mt,Lt,zt=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},Dt=function(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n};class Ft extends Ct{constructor(){super(...arguments),It.add(this),Nt.set(this,void 0)}get currentChatCompletionSnapshot(){return zt(this,Nt,"f")}static fromReadableStream(e){const t=new Ft;return t._run((()=>t._fromReadableStream(e))),t}static createChatCompletion(e,t,n){const r=new Ft;return r._run((()=>r._runChatCompletion(e,{...t,stream:!0},{...n,headers:{...null===n||void 0===n?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}}))),r}async _createChatCompletion(e,t,n){var r;const a=null===n||void 0===n?void 0:n.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",(()=>this.controller.abort()))),zt(this,It,"m",jt).call(this);const i=await e.create({...t,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const o of i)zt(this,It,"m",Rt).call(this,o);if(null!==(r=i.controller.signal)&&void 0!==r&&r.aborted)throw new C;return this._addChatCompletion(zt(this,It,"m",Mt).call(this))}async _fromReadableStream(e,t){var n;const r=null===t||void 0===t?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",(()=>this.controller.abort()))),zt(this,It,"m",jt).call(this),this._connected();const a=U.fromReadableStream(e,this.controller);let i;for await(const o of a)i&&i!==o.id&&this._addChatCompletion(zt(this,It,"m",Mt).call(this)),zt(this,It,"m",Rt).call(this,o),i=o.id;if(null!==(n=a.controller.signal)&&void 0!==n&&n.aborted)throw new C;return this._addChatCompletion(zt(this,It,"m",Mt).call(this))}[(Nt=new WeakMap,It=new WeakSet,jt=function(){this.ended||Dt(this,Nt,void 0,"f")},Rt=function(e){var t,n;if(this.ended)return;const r=zt(this,It,"m",Lt).call(this,e);this._emit("chunk",e,r);const a=null===(t=e.choices[0])||void 0===t||null===(t=t.delta)||void 0===t?void 0:t.content,i=null===(n=r.choices[0])||void 0===n?void 0:n.message;null!=a&&"assistant"===(null===i||void 0===i?void 0:i.role)&&null!==i&&void 0!==i&&i.content&&this._emit("content",a,i.content)},Mt=function(){if(this.ended)throw new P("stream has ended, this shouldn't happen");const e=zt(this,Nt,"f");if(!e)throw new P("request ended without sending any chunks");return Dt(this,Nt,void 0,"f"),function(e){const{id:t,choices:n,created:r,model:a,system_fingerprint:i,...o}=e;return{...o,id:t,choices:n.map((t=>{let{message:n,finish_reason:r,index:a,logprobs:i,...o}=t;if(!r)throw new P("missing finish_reason for choice ".concat(a));const{content:s=null,function_call:l,tool_calls:c,...u}=n,d=n.role;if(!d)throw new P("missing role for choice ".concat(a));if(l){const{arguments:e,name:t}=l;if(null==e)throw new P("missing function_call.arguments for choice ".concat(a));if(!t)throw new P("missing function_call.name for choice ".concat(a));return{...o,message:{content:s,function_call:{arguments:e,name:t},role:d},finish_reason:r,index:a,logprobs:i}}return c?{...o,index:a,finish_reason:r,logprobs:i,message:{...u,role:d,content:s,tool_calls:c.map(((t,n)=>{const{function:r,type:i,id:o,...s}=t,{arguments:l,name:c,...u}=r||{};if(null==o)throw new P("missing choices[".concat(a,"].tool_calls[").concat(n,"].id\n").concat(Ut(e)));if(null==i)throw new P("missing choices[".concat(a,"].tool_calls[").concat(n,"].type\n").concat(Ut(e)));if(null==c)throw new P("missing choices[".concat(a,"].tool_calls[").concat(n,"].function.name\n").concat(Ut(e)));if(null==l)throw new P("missing choices[".concat(a,"].tool_calls[").concat(n,"].function.arguments\n").concat(Ut(e)));return{...s,id:o,type:i,function:{...u,name:c,arguments:l}}}))}}:{...o,message:{...u,content:s,role:d},finish_reason:r,index:a,logprobs:i}})),created:r,model:a,object:"chat.completion",...i?{system_fingerprint:i}:{}}}(e)},Lt=function(e){var t,n,r;let a=zt(this,Nt,"f");const{choices:i,...o}=e;a?Object.assign(a,o):a=Dt(this,Nt,{...o,choices:[]},"f");for(const{delta:d,finish_reason:h,index:f,logprobs:p=null,...m}of e.choices){let e=a.choices[f];if(e||(e=a.choices[f]={finish_reason:h,index:f,message:{},logprobs:p,...m}),p)if(e.logprobs){const{content:n,...r}=p;var s;if(Object.assign(e.logprobs,r),n)null!==(s=(t=e.logprobs).content)&&void 0!==s||(t.content=[]),e.logprobs.content.push(...n)}else e.logprobs=Object.assign({},p);if(h&&(e.finish_reason=h),Object.assign(e,m),!d)continue;const{content:i,function_call:o,role:v,tool_calls:g,...y}=d;var l;if(Object.assign(e.message,y),i&&(e.message.content=(e.message.content||"")+i),v&&(e.message.role=v),o)if(e.message.function_call){if(o.name&&(e.message.function_call.name=o.name),o.arguments)null!==(l=(n=e.message.function_call).arguments)&&void 0!==l||(n.arguments=""),e.message.function_call.arguments+=o.arguments}else e.message.function_call=o;if(g){e.message.tool_calls||(e.message.tool_calls=[]);for(const{index:t,id:n,type:a,function:i,...o}of g){var c,u;const s=null!==(c=(r=e.message.tool_calls)[t])&&void 0!==c?c:r[t]={};Object.assign(s,o),n&&(s.id=n),a&&(s.type=a),i&&(null!==(u=s.function)&&void 0!==u||(s.function={arguments:""})),null!==i&&void 0!==i&&i.name&&(s.function.name=i.name),null!==i&&void 0!==i&&i.arguments&&(s.function.arguments+=i.arguments)}}}return a},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("chunk",(n=>{const r=t.shift();r?r.resolve(n):e.push(n)})),this.on("end",(()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0})),this.on("abort",(e=>{n=!0;for(const n of t)n.reject(e);t.length=0})),this.on("error",(e=>{n=!0;for(const n of t)n.reject(e);t.length=0})),{next:async()=>{if(!e.length)return n?{value:void 0,done:!0}:new Promise(((e,n)=>t.push({resolve:e,reject:n}))).then((e=>e?{value:e,done:!1}:{value:void 0,done:!0}));return{value:e.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new U(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Ut(e){return JSON.stringify(e)}class Bt extends Ft{static fromReadableStream(e){const t=new Bt;return t._run((()=>t._fromReadableStream(e))),t}static runFunctions(e,t,n){const r=new Bt,a={...n,headers:{...null===n||void 0===n?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run((()=>r._runFunctions(e,t,a))),r}static runTools(e,t,n){const r=new Bt,a={...n,headers:{...null===n||void 0===n?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run((()=>r._runTools(e,t,a))),r}}class Zt extends je{runFunctions(e,t){return e.stream?Bt.runFunctions(this._client.chat.completions,e,t):At.runFunctions(this._client.chat.completions,e,t)}runTools(e,t){return e.stream?Bt.runTools(this._client.chat.completions,e,t):At.runTools(this._client.chat.completions,e,t)}stream(e,t){return Ft.createChatCompletion(this._client.chat.completions,e,t)}}class Vt extends je{constructor(){super(...arguments),this.completions=new Zt(this._client)}}!function(e){e.Completions=Zt}(Vt||(Vt={}));var Ht,Wt,qt,$t,Kt,Jt,Yt,Gt,Qt,Xt,en,tn,nn=function(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n},rn=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class an{constructor(){this.controller=new AbortController,Ht.set(this,void 0),Wt.set(this,(()=>{})),qt.set(this,(()=>{})),$t.set(this,void 0),Kt.set(this,(()=>{})),Jt.set(this,(()=>{})),Yt.set(this,{}),Gt.set(this,!1),Qt.set(this,!1),Xt.set(this,!1),en.set(this,!1),tn.set(this,(e=>{if(nn(this,Qt,!0,"f"),e instanceof Error&&"AbortError"===e.name&&(e=new C),e instanceof C)return nn(this,Xt,!0,"f"),this._emit("abort",e);if(e instanceof P)return this._emit("error",e);if(e instanceof Error){const t=new P(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new P(String(e)))})),nn(this,Ht,new Promise(((e,t)=>{nn(this,Wt,e,"f"),nn(this,qt,t,"f")})),"f"),nn(this,$t,new Promise(((e,t)=>{nn(this,Kt,e,"f"),nn(this,Jt,t,"f")})),"f"),rn(this,Ht,"f").catch((()=>{})),rn(this,$t,"f").catch((()=>{}))}_run(e){setTimeout((()=>{e().then((()=>{this._emit("end")}),rn(this,tn,"f"))}),0)}_addRun(e){return e}_connected(){this.ended||(rn(this,Wt,"f").call(this),this._emit("connect"))}get ended(){return rn(this,Gt,"f")}get errored(){return rn(this,Qt,"f")}get aborted(){return rn(this,Xt,"f")}abort(){this.controller.abort()}on(e,t){return(rn(this,Yt,"f")[e]||(rn(this,Yt,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=rn(this,Yt,"f")[e];if(!n)return this;const r=n.findIndex((e=>e.listener===t));return r>=0&&n.splice(r,1),this}once(e,t){return(rn(this,Yt,"f")[e]||(rn(this,Yt,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise(((t,n)=>{nn(this,en,!0,"f"),"error"!==e&&this.once("error",n),this.once(e,t)}))}async done(){nn(this,en,!0,"f"),await rn(this,$t,"f")}_emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(rn(this,Gt,"f"))return;"end"===e&&(nn(this,Gt,!0,"f"),rn(this,Kt,"f").call(this));const a=rn(this,Yt,"f")[e];if(a&&(rn(this,Yt,"f")[e]=a.filter((e=>!e.once)),a.forEach((e=>{let{listener:t}=e;return t(...n)}))),"abort"===e){const e=n[0];return rn(this,en,"f")||null!==a&&void 0!==a&&a.length||Promise.reject(e),rn(this,qt,"f").call(this,e),rn(this,Jt,"f").call(this,e),void this._emit("end")}if("error"===e){const e=n[0];rn(this,en,"f")||null!==a&&void 0!==a&&a.length||Promise.reject(e),rn(this,qt,"f").call(this,e),rn(this,Jt,"f").call(this,e),this._emit("end")}}async _threadAssistantStream(e,t,n){return await this._createThreadAssistantStream(t,e,n)}async _runAssistantStream(e,t,n,r){return await this._createAssistantStream(t,e,n,r)}async _runToolAssistantStream(e,t,n,r,a){return await this._createToolAssistantStream(n,e,t,r,a)}async _createThreadAssistantStream(e,t,n){const r=null===n||void 0===n?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",(()=>this.controller.abort())));const a=await e.createAndRun({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addRun(a)}async _createToolAssistantStream(e,t,n,r,a){const i=null===a||void 0===a?void 0:a.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",(()=>this.controller.abort())));const o=await e.submitToolOutputs(t,n,{...r,stream:!1},{...a,signal:this.controller.signal});return this._connected(),this._addRun(o)}async _createAssistantStream(e,t,n,r){const a=null===r||void 0===r?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",(()=>this.controller.abort())));const i=await e.create(t,{...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addRun(i)}}Ht=new WeakMap,Wt=new WeakMap,qt=new WeakMap,$t=new WeakMap,Kt=new WeakMap,Jt=new WeakMap,Yt=new WeakMap,Gt=new WeakMap,Qt=new WeakMap,Xt=new WeakMap,en=new WeakMap,tn=new WeakMap;var on,sn,ln,cn,un,dn,hn,fn,pn,mn,vn,gn,yn,bn,wn,_n,kn,xn,Sn,On,En,Pn,Tn=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},Cn=function(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n};class An extends an{constructor(){super(...arguments),on.add(this),sn.set(this,[]),ln.set(this,{}),cn.set(this,{}),un.set(this,void 0),dn.set(this,void 0),hn.set(this,void 0),fn.set(this,void 0),pn.set(this,void 0),mn.set(this,void 0),vn.set(this,void 0),gn.set(this,void 0),yn.set(this,void 0)}[(sn=new WeakMap,ln=new WeakMap,cn=new WeakMap,un=new WeakMap,dn=new WeakMap,hn=new WeakMap,fn=new WeakMap,pn=new WeakMap,mn=new WeakMap,vn=new WeakMap,gn=new WeakMap,yn=new WeakMap,on=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",(n=>{const r=t.shift();r?r.resolve(n):e.push(n)})),this.on("end",(()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0})),this.on("abort",(e=>{n=!0;for(const n of t)n.reject(e);t.length=0})),this.on("error",(e=>{n=!0;for(const n of t)n.reject(e);t.length=0})),{next:async()=>{if(!e.length)return n?{value:void 0,done:!0}:new Promise(((e,n)=>t.push({resolve:e,reject:n}))).then((e=>e?{value:e,done:!1}:{value:void 0,done:!0}));return{value:e.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new An;return t._run((()=>t._fromReadableStream(e))),t}async _fromReadableStream(e,t){var n;const r=null===t||void 0===t?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",(()=>this.controller.abort()))),this._connected();const a=U.fromReadableStream(e,this.controller);for await(const i of a)Tn(this,on,"m",bn).call(this,i);if(null!==(n=a.controller.signal)&&void 0!==n&&n.aborted)throw new C;return this._addRun(Tn(this,on,"m",wn).call(this))}toReadableStream(){return new U(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,n,r,a){const i=new An;return i._run((()=>i._runToolAssistantStream(e,t,n,r,{...a,headers:{...null===a||void 0===a?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}}))),i}async _createToolAssistantStream(e,t,n,r,a){var i;const o=null===a||void 0===a?void 0:a.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",(()=>this.controller.abort())));const s={...r,stream:!0},l=await e.submitToolOutputs(t,n,s,{...a,signal:this.controller.signal});this._connected();for await(const c of l)Tn(this,on,"m",bn).call(this,c);if(null!==(i=l.controller.signal)&&void 0!==i&&i.aborted)throw new C;return this._addRun(Tn(this,on,"m",wn).call(this))}static createThreadAssistantStream(e,t,n){const r=new An;return r._run((()=>r._threadAssistantStream(e,t,{...n,headers:{...null===n||void 0===n?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}}))),r}static createAssistantStream(e,t,n,r){const a=new An;return a._run((()=>a._runAssistantStream(e,t,n,{...r,headers:{...null===r||void 0===r?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}}))),a}currentEvent(){return Tn(this,vn,"f")}currentRun(){return Tn(this,gn,"f")}currentMessageSnapshot(){return Tn(this,un,"f")}currentRunStepSnapshot(){return Tn(this,yn,"f")}async finalRunSteps(){return await this.done(),Object.values(Tn(this,ln,"f"))}async finalMessages(){return await this.done(),Object.values(Tn(this,cn,"f"))}async finalRun(){if(await this.done(),!Tn(this,dn,"f"))throw Error("Final run was not received.");return Tn(this,dn,"f")}async _createThreadAssistantStream(e,t,n){var r;const a=null===n||void 0===n?void 0:n.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",(()=>this.controller.abort())));const i={...t,stream:!0},o=await e.createAndRun(i,{...n,signal:this.controller.signal});this._connected();for await(const s of o)Tn(this,on,"m",bn).call(this,s);if(null!==(r=o.controller.signal)&&void 0!==r&&r.aborted)throw new C;return this._addRun(Tn(this,on,"m",wn).call(this))}async _createAssistantStream(e,t,n,r){var a;const i=null===r||void 0===r?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",(()=>this.controller.abort())));const o={...n,stream:!0},s=await e.create(t,o,{...r,signal:this.controller.signal});this._connected();for await(const l of s)Tn(this,on,"m",bn).call(this,l);if(null!==(a=s.controller.signal)&&void 0!==a&&a.aborted)throw new C;return this._addRun(Tn(this,on,"m",wn).call(this))}static accumulateDelta(e,t){for(const[n,r]of Object.entries(t)){if(!e.hasOwnProperty(n)){e[n]=r;continue}let t=e[n];if(null!==t&&void 0!==t)if("index"!==n&&"type"!==n){if("string"===typeof t&&"string"===typeof r)t+=r;else if("number"===typeof t&&"number"===typeof r)t+=r;else if(Ae(t)&&Ae(r))t=this.accumulateDelta(t,r);else{if(!Array.isArray(t)||!Array.isArray(r))throw Error("Unhandled record type: ".concat(n,", deltaValue: ").concat(r,", accValue: ").concat(t));if(t.every((e=>"string"===typeof e||"number"===typeof e))){t.push(...r);continue}}e[n]=t}else e[n]=r;else e[n]=r}return e}}bn=function(e){if(!this.ended)switch(Cn(this,vn,e,"f"),Tn(this,on,"m",xn).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":Tn(this,on,"m",Pn).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Tn(this,on,"m",kn).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":Tn(this,on,"m",_n).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},wn=function(){if(this.ended)throw new P("stream has ended, this shouldn't happen");if(!Tn(this,dn,"f"))throw Error("Final run has not been received");return Tn(this,dn,"f")},_n=function(e){const[t,n]=Tn(this,on,"m",On).call(this,e,Tn(this,un,"f"));Cn(this,un,t,"f"),Tn(this,cn,"f")[t.id]=t;for(const r of n){const e=t.content[r.index];"text"==(null===e||void 0===e?void 0:e.type)&&this._emit("textCreated",e.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const n of e.data.delta.content){if("text"==n.type&&n.text){let e=n.text,r=t.content[n.index];if(!r||"text"!=r.type)throw Error("The snapshot associated with this text delta is not text or missing");this._emit("textDelta",e,r.text)}if(n.index!=Tn(this,hn,"f")){if(Tn(this,fn,"f"))switch(Tn(this,fn,"f").type){case"text":this._emit("textDone",Tn(this,fn,"f").text,Tn(this,un,"f"));break;case"image_file":this._emit("imageFileDone",Tn(this,fn,"f").image_file,Tn(this,un,"f"))}Cn(this,hn,n.index,"f")}Cn(this,fn,t.content[n.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(void 0!==Tn(this,hn,"f")){const t=e.data.content[Tn(this,hn,"f")];if(t)switch(t.type){case"image_file":this._emit("imageFileDone",t.image_file,Tn(this,un,"f"));break;case"text":this._emit("textDone",t.text,Tn(this,un,"f"))}}Tn(this,un,"f")&&this._emit("messageDone",e.data),Cn(this,un,void 0,"f")}},kn=function(e){const t=Tn(this,on,"m",Sn).call(this,e);switch(Cn(this,yn,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&"tool_calls"==n.step_details.type&&n.step_details.tool_calls&&"tool_calls"==t.step_details.type)for(const e of n.step_details.tool_calls)e.index==Tn(this,pn,"f")?this._emit("toolCallDelta",e,t.step_details.tool_calls[e.index]):(Tn(this,mn,"f")&&this._emit("toolCallDone",Tn(this,mn,"f")),Cn(this,pn,e.index,"f"),Cn(this,mn,t.step_details.tool_calls[e.index],"f"),Tn(this,mn,"f")&&this._emit("toolCallCreated",Tn(this,mn,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Cn(this,yn,void 0,"f");"tool_calls"==e.data.step_details.type&&Tn(this,mn,"f")&&(this._emit("toolCallDone",Tn(this,mn,"f")),Cn(this,mn,void 0,"f")),this._emit("runStepDone",e.data,t)}},xn=function(e){Tn(this,sn,"f").push(e),this._emit("event",e)},Sn=function(e){switch(e.event){case"thread.run.step.created":return Tn(this,ln,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=Tn(this,ln,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const r=An.accumulateDelta(t,n.delta);Tn(this,ln,"f")[e.data.id]=r}return Tn(this,ln,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":Tn(this,ln,"f")[e.data.id]=e.data}if(Tn(this,ln,"f")[e.data.id])return Tn(this,ln,"f")[e.data.id];throw new Error("No snapshot available")},On=function(e,t){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const e of r.delta.content)if(e.index in t.content){let n=t.content[e.index];t.content[e.index]=Tn(this,on,"m",En).call(this,e,n)}else t.content[e.index]=e,n.push(e);return[t,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},En=function(e,t){return An.accumulateDelta(t,e)},Pn=function(e){switch(Cn(this,gn,e.data,"f"),e.event){case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.cancelling":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Cn(this,dn,e.data,"f"),Tn(this,mn,"f")&&(this._emit("toolCallDone",Tn(this,mn,"f")),Cn(this,mn,void 0,"f"))}};class In extends je{create(e,t,n){return this._client.post("/threads/".concat(e,"/messages"),{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null===n||void 0===n?void 0:n.headers}})}retrieve(e,t,n){return this._client.get("/threads/".concat(e,"/messages/").concat(t),{...n,headers:{"OpenAI-Beta":"assistants=v2",...null===n||void 0===n?void 0:n.headers}})}update(e,t,n,r){return this._client.post("/threads/".concat(e,"/messages/").concat(t),{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...null===r||void 0===r?void 0:r.headers}})}list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return he(t)?this.list(e,{},t):this._client.getAPIList("/threads/".concat(e,"/messages"),Nn,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null===n||void 0===n?void 0:n.headers}})}}class Nn extends Ne{}!function(e){e.MessagesPage=Nn}(In||(In={}));class jn extends je{retrieve(e,t,n,r){return this._client.get("/threads/".concat(e,"/runs/").concat(t,"/steps/").concat(n),{...r,headers:{"OpenAI-Beta":"assistants=v2",...null===r||void 0===r?void 0:r.headers}})}list(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return he(n)?this.list(e,t,{},n):this._client.getAPIList("/threads/".concat(e,"/runs/").concat(t,"/steps"),Rn,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...null===r||void 0===r?void 0:r.headers}})}}class Rn extends Ne{}!function(e){e.RunStepsPage=Rn}(jn||(jn={}));class Mn extends je{constructor(){super(...arguments),this.steps=new jn(this._client)}create(e,t,n){var r;return this._client.post("/threads/".concat(e,"/runs"),{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null===n||void 0===n?void 0:n.headers},stream:null!==(r=t.stream)&&void 0!==r&&r})}retrieve(e,t,n){return this._client.get("/threads/".concat(e,"/runs/").concat(t),{...n,headers:{"OpenAI-Beta":"assistants=v2",...null===n||void 0===n?void 0:n.headers}})}update(e,t,n,r){return this._client.post("/threads/".concat(e,"/runs/").concat(t),{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...null===r||void 0===r?void 0:r.headers}})}list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return he(t)?this.list(e,{},t):this._client.getAPIList("/threads/".concat(e,"/runs"),Ln,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null===n||void 0===n?void 0:n.headers}})}cancel(e,t,n){return this._client.post("/threads/".concat(e,"/runs/").concat(t,"/cancel"),{...n,headers:{"OpenAI-Beta":"assistants=v2",...null===n||void 0===n?void 0:n.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}createAndStream(e,t,n){return An.createAssistantStream(e,this._client.beta.threads.runs,t,n)}async poll(e,t,n){const r={...null===n||void 0===n?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(null!==n&&void 0!==n&&n.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:a,response:i}=await this.retrieve(e,t,{...n,headers:{...null===n||void 0===n?void 0:n.headers,...r}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let e=5e3;if(null!==n&&void 0!==n&&n.pollIntervalMs)e=n.pollIntervalMs;else{const t=i.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await _e(e);break;case"requires_action":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,t,n){return An.createAssistantStream(e,this._client.beta.threads.runs,t,n)}submitToolOutputs(e,t,n,r){var a;return this._client.post("/threads/".concat(e,"/runs/").concat(t,"/submit_tool_outputs"),{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...null===r||void 0===r?void 0:r.headers},stream:null!==(a=n.stream)&&void 0!==a&&a})}async submitToolOutputsAndPoll(e,t,n,r){const a=await this.submitToolOutputs(e,t,n,r);return await this.poll(e,a.id,r)}submitToolOutputsStream(e,t,n,r){return An.createToolAssistantStream(e,t,this._client.beta.threads.runs,n,r)}}class Ln extends Ne{}!function(e){e.RunsPage=Ln,e.Steps=jn,e.RunStepsPage=Rn}(Mn||(Mn={}));class zn extends je{constructor(){super(...arguments),this.runs=new Mn(this._client),this.messages=new In(this._client)}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return he(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...null===t||void 0===t?void 0:t.headers}})}retrieve(e,t){return this._client.get("/threads/".concat(e),{...t,headers:{"OpenAI-Beta":"assistants=v2",...null===t||void 0===t?void 0:t.headers}})}update(e,t,n){return this._client.post("/threads/".concat(e),{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null===n||void 0===n?void 0:n.headers}})}del(e,t){return this._client.delete("/threads/".concat(e),{...t,headers:{"OpenAI-Beta":"assistants=v2",...null===t||void 0===t?void 0:t.headers}})}createAndRun(e,t){var n;return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...null===t||void 0===t?void 0:t.headers},stream:null!==(n=e.stream)&&void 0!==n&&n})}async createAndRunPoll(e,t){const n=await this.createAndRun(e,t);return await this.runs.poll(n.thread_id,n.id,t)}createAndRunStream(e,t){return An.createThreadAssistantStream(e,this._client.beta.threads,t)}}!function(e){e.Runs=Mn,e.RunsPage=Ln,e.Messages=In,e.MessagesPage=Nn}(zn||(zn={}));class Dn extends je{create(e,t,n){return this._client.post("/vector_stores/".concat(e,"/files"),{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null===n||void 0===n?void 0:n.headers}})}retrieve(e,t,n){return this._client.get("/vector_stores/".concat(e,"/files/").concat(t),{...n,headers:{"OpenAI-Beta":"assistants=v2",...null===n||void 0===n?void 0:n.headers}})}list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return he(t)?this.list(e,{},t):this._client.getAPIList("/vector_stores/".concat(e,"/files"),Fn,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null===n||void 0===n?void 0:n.headers}})}del(e,t,n){return this._client.delete("/vector_stores/".concat(e,"/files/").concat(t),{...n,headers:{"OpenAI-Beta":"assistants=v2",...null===n||void 0===n?void 0:n.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}async poll(e,t,n){const r={...null===n||void 0===n?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(null!==n&&void 0!==n&&n.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const a=await this.retrieve(e,t,{...n,headers:r}).withResponse(),i=a.data;switch(i.status){case"in_progress":let e=5e3;if(null!==n&&void 0!==n&&n.pollIntervalMs)e=n.pollIntervalMs;else{const t=a.response.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await _e(e);break;case"failed":case"completed":return i}}}async upload(e,t,n){const r=await this._client.files.create({file:t,purpose:"assistants"},n);return this.create(e,{file_id:r.id},n)}async uploadAndPoll(e,t,n){const r=await this._client.files.create({file:t,purpose:"assistants"},n);return await this.poll(e,r.id,n)}}class Fn extends Ne{}!function(e){e.VectorStoreFilesPage=Fn}(Dn||(Dn={}));class Un extends je{create(e,t,n){return this._client.post("/vector_stores/".concat(e,"/file_batches"),{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null===n||void 0===n?void 0:n.headers}})}retrieve(e,t,n){return this._client.get("/vector_stores/".concat(e,"/file_batches/").concat(t),{...n,headers:{"OpenAI-Beta":"assistants=v2",...null===n||void 0===n?void 0:n.headers}})}cancel(e,t,n){return this._client.post("/vector_stores/".concat(e,"/file_batches/").concat(t,"/cancel"),{...n,headers:{"OpenAI-Beta":"assistants=v2",...null===n||void 0===n?void 0:n.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t);return await this.poll(e,r.id,n)}listFiles(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return he(n)?this.listFiles(e,t,{},n):this._client.getAPIList("/vector_stores/".concat(e,"/file_batches/").concat(t,"/files"),Fn,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...null===r||void 0===r?void 0:r.headers}})}async poll(e,t,n){const r={...null===n||void 0===n?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(null!==n&&void 0!==n&&n.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:a,response:i}=await this.retrieve(e,t,{...n,headers:r}).withResponse();switch(a.status){case"in_progress":let e=5e3;if(null!==n&&void 0!==n&&n.pollIntervalMs)e=n.pollIntervalMs;else{const t=i.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await _e(e);break;case"failed":case"completed":return a}}}async uploadAndPoll(e,t,n){var r;let{files:a,fileIds:i=[]}=t;if(null===a||0==a.length)throw new Error("No files provided to process.");const o=null!==(r=null===n||void 0===n?void 0:n.maxConcurrency)&&void 0!==r?r:5,s=Math.min(o,a.length),l=this._client,c=a.values(),u=[...i];const d=Array(s).fill(c).map((async function(e){for(let t of e){const e=await l.files.create({file:t,purpose:"assistants"},n);u.push(e.id)}}));return await(async e=>{const t=await Promise.allSettled(e),n=t.filter((e=>"rejected"===e.status));if(n.length){for(const e of n)console.error(e.reason);throw new Error("".concat(n.length," promise(s) failed - see the above errors"))}const r=[];for(const a of t)"fulfilled"===a.status&&r.push(a.value);return r})(d),await this.createAndPoll(e,{file_ids:u})}}Un||(Un={});class Bn extends je{constructor(){super(...arguments),this.files=new Dn(this._client),this.fileBatches=new Un(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...null===t||void 0===t?void 0:t.headers}})}retrieve(e,t){return this._client.get("/vector_stores/".concat(e),{...t,headers:{"OpenAI-Beta":"assistants=v2",...null===t||void 0===t?void 0:t.headers}})}update(e,t,n){return this._client.post("/vector_stores/".concat(e),{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null===n||void 0===n?void 0:n.headers}})}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return he(e)?this.list({},e):this._client.getAPIList("/vector_stores",Zn,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...null===t||void 0===t?void 0:t.headers}})}del(e,t){return this._client.delete("/vector_stores/".concat(e),{...t,headers:{"OpenAI-Beta":"assistants=v2",...null===t||void 0===t?void 0:t.headers}})}}class Zn extends Ne{}!function(e){e.VectorStoresPage=Zn,e.Files=Dn,e.VectorStoreFilesPage=Fn,e.FileBatches=Un}(Bn||(Bn={}));class Vn extends je{constructor(){super(...arguments),this.vectorStores=new Bn(this._client),this.chat=new Vt(this._client),this.assistants=new et(this._client),this.threads=new zn(this._client)}}!function(e){e.VectorStores=Bn,e.VectorStoresPage=Zn,e.Chat=Vt,e.Assistants=et,e.AssistantsPage=tt,e.Threads=zn}(Vn||(Vn={}));class Hn extends je{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get("/batches/".concat(e),t)}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return he(e)?this.list({},e):this._client.getAPIList("/batches",Wn,{query:e,...t})}cancel(e,t){return this._client.post("/batches/".concat(e,"/cancel"),t)}}class Wn extends Ne{}var qn;!function(e){e.BatchesPage=Wn}(Hn||(Hn={}));class $n extends se{constructor(){var e,t,n;let{baseURL:r=Se("OPENAI_BASE_URL"),apiKey:a=Se("OPENAI_API_KEY"),organization:i=(null!==(e=Se("OPENAI_ORG_ID"))&&void 0!==e?e:null),project:o=(null!==(t=Se("OPENAI_PROJECT_ID"))&&void 0!==t?t:null),...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(void 0===a)throw new P("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const l={apiKey:a,organization:i,project:o,...s,baseURL:r||"https://api.openai.com/v1"};if(!l.dangerouslyAllowBrowser&&"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof navigator)throw new P("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");super({baseURL:l.baseURL,timeout:null!==(n=l.timeout)&&void 0!==n?n:6e5,httpAgent:l.httpAgent,maxRetries:l.maxRetries,fetch:l.fetch}),this.completions=new Re(this),this.chat=new Le(this),this.embeddings=new ze(this),this.files=new De(this),this.images=new Ue(this),this.audio=new He(this),this.moderations=new We(this),this.models=new qe(this),this.fineTuning=new Xe(this),this.beta=new Vn(this),this.batches=new Hn(this),this._options=l,this.apiKey=a,this.organization=i,this.project=o}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:"Bearer ".concat(this.apiKey)}}}qn=$n,$n.OpenAI=qn,$n.OpenAIError=P,$n.APIError=T,$n.APIConnectionError=A,$n.APIConnectionTimeoutError=I,$n.APIUserAbortError=C,$n.NotFoundError=M,$n.ConflictError=L,$n.RateLimitError=D,$n.BadRequestError=N,$n.AuthenticationError=j,$n.InternalServerError=F,$n.PermissionDeniedError=R,$n.UnprocessableEntityError=z,$n.toFile=J,$n.fileFromPath=b;const{OpenAIError:Kn,APIError:Jn,APIConnectionError:Yn,APIConnectionTimeoutError:Gn,APIUserAbortError:Qn,NotFoundError:Xn,ConflictError:er,RateLimitError:tr,BadRequestError:nr,AuthenticationError:rr,InternalServerError:ar,PermissionDeniedError:ir,UnprocessableEntityError:or}=e;!function(e){e.Page=Ie,e.CursorPage=Ne,e.Completions=Re,e.Chat=Le,e.Embeddings=ze,e.Files=De,e.FileObjectsPage=Fe,e.Images=Ue,e.Audio=He,e.Moderations=We,e.Models=qe,e.ModelsPage=$e,e.FineTuning=Xe,e.Beta=Vn,e.Batches=Hn,e.BatchesPage=Wn}($n||($n={}));var sr=n(8768);const lr="__run";class cr{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new cr({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}class ur extends cr{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new ur({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}var dr=n(4070),hr="object"===typeof window?window:{},fr="0123456789abcdef".split(""),pr=[-2147483648,8388608,32768,128],mr=[24,16,8,0],vr=[];function gr(e){e?(vr[0]=vr[16]=vr[1]=vr[2]=vr[3]=vr[4]=vr[5]=vr[6]=vr[7]=vr[8]=vr[9]=vr[10]=vr[11]=vr[12]=vr[13]=vr[14]=vr[15]=0,this.blocks=vr):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}gr.prototype.update=function(e){if(!this.finalized){var t="string"!==typeof e;t&&e.constructor===hr.ArrayBuffer&&(e=new Uint8Array(e));for(var n,r,a=0,i=e.length||0,o=this.blocks;a<i;){if(this.hashed&&(this.hashed=!1,o[0]=this.block,o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),t)for(r=this.start;a<i&&r<64;++a)o[r>>2]|=e[a]<<mr[3&r++];else for(r=this.start;a<i&&r<64;++a)(n=e.charCodeAt(a))<128?o[r>>2]|=n<<mr[3&r++]:n<2048?(o[r>>2]|=(192|n>>6)<<mr[3&r++],o[r>>2]|=(128|63&n)<<mr[3&r++]):n<55296||n>=57344?(o[r>>2]|=(224|n>>12)<<mr[3&r++],o[r>>2]|=(128|n>>6&63)<<mr[3&r++],o[r>>2]|=(128|63&n)<<mr[3&r++]):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++a)),o[r>>2]|=(240|n>>18)<<mr[3&r++],o[r>>2]|=(128|n>>12&63)<<mr[3&r++],o[r>>2]|=(128|n>>6&63)<<mr[3&r++],o[r>>2]|=(128|63&n)<<mr[3&r++]);this.lastByteIndex=r,this.bytes+=r-this.start,r>=64?(this.block=o[16],this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296|0,this.bytes=this.bytes%4294967296),this}},gr.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=pr[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},gr.prototype.hash=function(){var e,t,n=this.h0,r=this.h1,a=this.h2,i=this.h3,o=this.h4,s=this.blocks;for(e=16;e<80;++e)t=s[e-3]^s[e-8]^s[e-14]^s[e-16],s[e]=t<<1|t>>>31;for(e=0;e<20;e+=5)n=(t=(r=(t=(a=(t=(i=(t=(o=(t=n<<5|n>>>27)+(r&a|~r&i)+o+1518500249+s[e]|0)<<5|o>>>27)+(n&(r=r<<30|r>>>2)|~n&a)+i+1518500249+s[e+1]|0)<<5|i>>>27)+(o&(n=n<<30|n>>>2)|~o&r)+a+1518500249+s[e+2]|0)<<5|a>>>27)+(i&(o=o<<30|o>>>2)|~i&n)+r+1518500249+s[e+3]|0)<<5|r>>>27)+(a&(i=i<<30|i>>>2)|~a&o)+n+1518500249+s[e+4]|0,a=a<<30|a>>>2;for(;e<40;e+=5)n=(t=(r=(t=(a=(t=(i=(t=(o=(t=n<<5|n>>>27)+(r^a^i)+o+1859775393+s[e]|0)<<5|o>>>27)+(n^(r=r<<30|r>>>2)^a)+i+1859775393+s[e+1]|0)<<5|i>>>27)+(o^(n=n<<30|n>>>2)^r)+a+1859775393+s[e+2]|0)<<5|a>>>27)+(i^(o=o<<30|o>>>2)^n)+r+1859775393+s[e+3]|0)<<5|r>>>27)+(a^(i=i<<30|i>>>2)^o)+n+1859775393+s[e+4]|0,a=a<<30|a>>>2;for(;e<60;e+=5)n=(t=(r=(t=(a=(t=(i=(t=(o=(t=n<<5|n>>>27)+(r&a|r&i|a&i)+o-1894007588+s[e]|0)<<5|o>>>27)+(n&(r=r<<30|r>>>2)|n&a|r&a)+i-1894007588+s[e+1]|0)<<5|i>>>27)+(o&(n=n<<30|n>>>2)|o&r|n&r)+a-1894007588+s[e+2]|0)<<5|a>>>27)+(i&(o=o<<30|o>>>2)|i&n|o&n)+r-1894007588+s[e+3]|0)<<5|r>>>27)+(a&(i=i<<30|i>>>2)|a&o|i&o)+n-1894007588+s[e+4]|0,a=a<<30|a>>>2;for(;e<80;e+=5)n=(t=(r=(t=(a=(t=(i=(t=(o=(t=n<<5|n>>>27)+(r^a^i)+o-899497514+s[e]|0)<<5|o>>>27)+(n^(r=r<<30|r>>>2)^a)+i-899497514+s[e+1]|0)<<5|i>>>27)+(o^(n=n<<30|n>>>2)^r)+a-899497514+s[e+2]|0)<<5|a>>>27)+(i^(o=o<<30|o>>>2)^n)+r-899497514+s[e+3]|0)<<5|r>>>27)+(a^(i=i<<30|i>>>2)^o)+n-899497514+s[e+4]|0,a=a<<30|a>>>2;this.h0=this.h0+n|0,this.h1=this.h1+r|0,this.h2=this.h2+a|0,this.h3=this.h3+i|0,this.h4=this.h4+o|0},gr.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,a=this.h4;return fr[e>>28&15]+fr[e>>24&15]+fr[e>>20&15]+fr[e>>16&15]+fr[e>>12&15]+fr[e>>8&15]+fr[e>>4&15]+fr[15&e]+fr[t>>28&15]+fr[t>>24&15]+fr[t>>20&15]+fr[t>>16&15]+fr[t>>12&15]+fr[t>>8&15]+fr[t>>4&15]+fr[15&t]+fr[n>>28&15]+fr[n>>24&15]+fr[n>>20&15]+fr[n>>16&15]+fr[n>>12&15]+fr[n>>8&15]+fr[n>>4&15]+fr[15&n]+fr[r>>28&15]+fr[r>>24&15]+fr[r>>20&15]+fr[r>>16&15]+fr[r>>12&15]+fr[r>>8&15]+fr[r>>4&15]+fr[15&r]+fr[a>>28&15]+fr[a>>24&15]+fr[a>>20&15]+fr[a>>16&15]+fr[a>>12&15]+fr[a>>8&15]+fr[a>>4&15]+fr[15&a]},gr.prototype.toString=gr.prototype.hex,gr.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,a=this.h4;return[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,r>>24&255,r>>16&255,r>>8&255,255&r,a>>24&255,a>>16&255,a>>8&255,255&a]},gr.prototype.array=gr.prototype.digest,gr.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),e};const yr=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=t.join("_"),new gr(!0).update(r).hex();var r};class br{}const wr=new Map;class _r extends br{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=null!==e&&void 0!==e?e:new Map}lookup(e,t){var n;return Promise.resolve(null!==(n=this.cache.get(yr(e,t)))&&void 0!==n?n:null)}async update(e,t,n){this.cache.set(yr(e,t),n)}static global(){return new _r(wr)}}var kr=n(1774),xr=n(9263);function Sr(e){return Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sr(e)}function Or(e){var t=function(e,t){if("object"!=Sr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Sr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Sr(t)?t:t+""}function Er(e,t,n){return(t=Or(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pr=n(4445),Tr=Object.defineProperty;function Cr(e,t){return 1===e.length?[t.get(e.join(","))]:function(e,t){let n=Array.from({length:e.length},((e,t)=>({start:t,end:t+1})));for(;n.length>1;){let r=null;for(let a=0;a<n.length-1;a++){const i=e.slice(n[a].start,n[a+1].end),o=t.get(i.join(","));null!=o&&(null==r||o<r[0])&&(r=[o,a])}if(null==r)break;{const e=r[1];n[e]={start:n[e].start,end:n[e+1].end},n.splice(e+1,1)}}return n}(e,t).map((n=>t.get(e.slice(n.start,n.end).join(",")))).filter((e=>null!=e))}var Ar,Ir,Nr=class e{constructor(e,t){Er(this,"specialTokens",void 0),Er(this,"inverseSpecialTokens",void 0),Er(this,"patStr",void 0),Er(this,"textEncoder",new TextEncoder),Er(this,"textDecoder",new TextDecoder("utf-8")),Er(this,"rankMap",new Map),Er(this,"textMap",new Map),this.patStr=e.pat_str;const n=e.bpe_ranks.split("\n").filter(Boolean).reduce(((e,t)=>{const[n,r,...a]=t.split(" "),i=Number.parseInt(r,10);return a.forEach(((t,n)=>e[t]=i+n)),e}),{});for(const[r,a]of Object.entries(n)){const e=Pr.toByteArray(r);this.rankMap.set(e.join(","),a),this.textMap.set(a,e)}this.specialTokens={...e.special_tokens,...t},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce(((e,t)=>{let[n,r]=t;return e[r]=this.textEncoder.encode(n),e}),{})}encode(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all";const a=new RegExp(this.patStr,"ug"),i=e.specialTokenRegex(Object.keys(this.specialTokens)),o=[],s=new Set("all"===n?Object.keys(this.specialTokens):n),l=new Set("all"===r?Object.keys(this.specialTokens).filter((e=>!s.has(e))):r);if(l.size>0){const n=e.specialTokenRegex([...l]),r=t.match(n);if(null!=r)throw new Error("The text contains a special token that is not allowed: ".concat(r[0]))}let c=0;for(;;){var u,d;let e=null,n=c;for(;i.lastIndex=n,e=i.exec(t),null!=e&&!s.has(e[0]);)n=e.index+1;const r=null!==(u=null===(d=e)||void 0===d?void 0:d.index)&&void 0!==u?u:t.length;for(const i of t.substring(c,r).matchAll(a)){const e=this.textEncoder.encode(i[0]),t=this.rankMap.get(e.join(","));null==t?o.push(...Cr(e,this.rankMap)):o.push(t)}if(null==e)break;let l=this.specialTokens[e[0]];o.push(l),c=e.index+e[0].length}return o}decode(e){const t=[];let n=0;for(let o=0;o<e.length;++o){var r;const a=e[o],i=null!==(r=this.textMap.get(a))&&void 0!==r?r:this.inverseSpecialTokens[a];null!=i&&(t.push(i),n+=i.length)}const a=new Uint8Array(n);let i=0;for(const o of t)a.set(o,i),i+=o.length;return this.textDecoder.decode(a)}};Ir=e=>new RegExp(e.map((e=>function(e){return e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}(e))).join("|"),"g"),((e,t,n)=>{t in e?Tr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(Nr,"symbol"!==typeof(Ar="specialTokenRegex")?Ar+"":Ar,Ir);const jr={},Rr=new xr.g({});async function Mr(e){return async function(e){return e in jr||(jr[e]=Rr.fetch("https://tiktoken.pages.dev/js/".concat(e,".json")).then((e=>e.json())).then((e=>new Nr(e))).catch((t=>{throw delete jr[e],t}))),await jr[e]}(function(e){switch(e){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":return"cl100k_base";default:throw new Error("Unknown model")}}(e))}var Lr=n(5170);const zr=e=>e.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":e.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":e.startsWith("gpt-4-32k")?"gpt-4-32k":e.startsWith("gpt-4-")?"gpt-4":e;class Dr extends Lr.YN{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){var t,n,r;super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=null!==(t=e.verbose)&&void 0!==t&&t,this.callbacks=e.callbacks,this.tags=null!==(n=e.tags)&&void 0!==n?n:[],this.metadata=null!==(r=e.metadata)&&void 0!==r?r:{}}}class Fr extends Dr{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor(e){let{callbacks:t,callbackManager:n,...r}=e;super({callbacks:null!==t&&void 0!==t?t:n,...r}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),"object"===typeof r.cache?this.cache=r.cache:r.cache?this.cache=_r.global():this.cache=void 0,this.caller=new xr.g(null!==r&&void 0!==r?r:{})}async getNumTokens(e){if("string"!==typeof e)return 0;let t=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await Mr("modelName"in this?zr(this.modelName):"gpt2")}catch(n){console.warn("Failed to calculate number of tokens, falling back to approximate count",n)}if(this._encoding)try{t=this._encoding.encode(e).length}catch(n){console.warn("Failed to calculate number of tokens, falling back to approximate count",n)}return t}static _convertInputToPromptValue(e){return"string"===typeof e?new kr.HY(e):Array.isArray(e)?new kr.aB(e.map(sr.K0)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall(e){let{config:t,...n}=e;const r={...this._identifyingParams(),...n,_type:this._llmType(),_model:this._modelType()},a=Object.entries(r).filter((e=>{let[t,n]=e;return void 0!==n})),i=a.map((e=>{let[t,n]=e;return"".concat(t,":").concat(JSON.stringify(n))})).sort().join(",");return i}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}var Ur=n(9341);class Br extends Fr{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]})}_separateRunnableConfigFromCallOptions(e){const[t,n]=super._separateRunnableConfigFromCallOptions(e);return null!==n&&void 0!==n&&n.timeout&&!n.signal&&(n.signal=AbortSignal.timeout(n.timeout)),[t,n]}async invoke(e,t){const n=Br._convertInputToPromptValue(e);return(await this.generatePrompt([n],t,null===t||void 0===t?void 0:t.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,t,n){throw new Error("Not implemented.")}async*_streamIterator(e,t){if(this._streamResponseChunks===Br.prototype._streamResponseChunks)yield this.invoke(e,t);else{const r=Br._convertInputToPromptValue(e).toChatMessages(),[a,i]=this._separateRunnableConfigFromCallOptions(t),o=await Ur.Td.configure(a.callbacks,this.callbacks,a.tags,this.tags,a.metadata,this.metadata,{verbose:this.verbose}),s={options:i,invocation_params:null===this||void 0===this?void 0:this.invocationParams(i),batch_size:1},l=await(null===o||void 0===o?void 0:o.handleChatModelStart(this.toJSON(),[r],a.runId,void 0,s,void 0,void 0,a.runName));let c;try{for await(const e of this._streamResponseChunks(r,i,null===l||void 0===l?void 0:l[0]))e.message.response_metadata={...e.generationInfo,...e.message.response_metadata},yield e.message,c=c?c.concat(e):e}catch(n){throw await Promise.all((null!==l&&void 0!==l?l:[]).map((e=>null===e||void 0===e?void 0:e.handleLLMError(n)))),n}await Promise.all((null!==l&&void 0!==l?l:[]).map((e=>null===e||void 0===e?void 0:e.handleLLMEnd({generations:[[c]]}))))}}async _generateUncached(e,t,n){var r;const a=e.map((e=>e.map(sr.K0))),i=await Ur.Td.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}),o={options:t,invocation_params:null===this||void 0===this?void 0:this.invocationParams(t),batch_size:1},s=await(null===i||void 0===i?void 0:i.handleChatModelStart(this.toJSON(),a,n.runId,void 0,o,void 0,void 0,n.runName)),l=await Promise.allSettled(a.map(((e,n)=>this._generate(e,{...t,promptIndex:n},null===s||void 0===s?void 0:s[n])))),c=[],u=[];await Promise.all(l.map((async(e,t)=>{if("fulfilled"===e.status){var n;const r=e.value;for(const e of r.generations)e.message.response_metadata={...e.generationInfo,...e.message.response_metadata};return 1===r.generations.length&&(r.generations[0].message.response_metadata={...r.llmOutput,...r.generations[0].message.response_metadata}),c[t]=r.generations,u[t]=r.llmOutput,null===s||void 0===s||null===(n=s[t])||void 0===n?void 0:n.handleLLMEnd({generations:[r.generations],llmOutput:r.llmOutput})}var r;return await(null===s||void 0===s||null===(r=s[t])||void 0===r?void 0:r.handleLLMError(e.reason)),Promise.reject(e.reason)})));const d={generations:c,llmOutput:u.length?null===(r=this._combineLLMOutput)||void 0===r?void 0:r.call(this,...u):void 0};return Object.defineProperty(d,lr,{value:s?{runIds:null===s||void 0===s?void 0:s.map((e=>e.runId))}:void 0,configurable:!0}),d}async _generateCached(e){let{messages:t,cache:n,llmStringKey:r,parsedOptions:a,handledOptions:i}=e;const o=t.map((e=>e.map(sr.K0))),s=await Ur.Td.configure(i.callbacks,this.callbacks,i.tags,this.tags,i.metadata,this.metadata,{verbose:this.verbose}),l={options:a,invocation_params:null===this||void 0===this?void 0:this.invocationParams(a),batch_size:1,cached:!0},c=await(null===s||void 0===s?void 0:s.handleChatModelStart(this.toJSON(),o,i.runId,void 0,l,void 0,void 0,i.runName)),u=[],d=(await Promise.allSettled(o.map((async(e,t)=>{const a=Br._convertInputToPromptValue(e).toString(),i=await n.lookup(a,r);return null==i&&u.push(t),i})))).map(((e,t)=>({result:e,runManager:null===c||void 0===c?void 0:c[t]}))).filter((e=>{let{result:t}=e;return"fulfilled"===t.status&&null!=t.value||"rejected"===t.status})),h=[];await Promise.all(d.map((async(e,t)=>{let{result:n,runManager:r}=e;if("fulfilled"===n.status){const e=n.value;return h[t]=e,e.length&&await(null===r||void 0===r?void 0:r.handleLLMNewToken(e[0].text)),null===r||void 0===r?void 0:r.handleLLMEnd({generations:[e]})}return await(null===r||void 0===r?void 0:r.handleLLMError(n.reason)),Promise.reject(n.reason)})));const f={generations:h,missingPromptIndices:u};return Object.defineProperty(f,lr,{value:c?{runIds:null===c||void 0===c?void 0:c.map((e=>e.runId))}:void 0,configurable:!0}),f}async generate(e,t,n){var r;let a;a=Array.isArray(t)?{stop:t}:t;const i=e.map((e=>e.map(sr.K0))),[o,s]=this._separateRunnableConfigFromCallOptions(a);if(o.callbacks=null!==(r=o.callbacks)&&void 0!==r?r:n,!this.cache)return this._generateUncached(i,s,o);const{cache:l}=this,c=this._getSerializedCacheKeyParametersForCall(s),{generations:u,missingPromptIndices:d}=await this._generateCached({messages:i,cache:l,llmStringKey:c,parsedOptions:s,handledOptions:o});let h={};if(d.length>0){var f;const e=await this._generateUncached(d.map((e=>i[e])),s,o);await Promise.all(e.generations.map((async(e,t)=>{const n=d[t];u[n]=e;const r=Br._convertInputToPromptValue(i[n]).toString();return l.update(r,c,e)}))),h=null!==(f=e.llmOutput)&&void 0!==f?f:{}}return{generations:u,llmOutput:h}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,t,n){const r=e.map((e=>e.toChatMessages()));return this.generate(r,t,n)}async call(e,t,n){return(await this.generate([e.map(sr.K0)],t,n)).generations[0][0].message}async callPrompt(e,t,n){const r=e.toChatMessages();return this.call(r,t,n)}async predictMessages(e,t,n){return this.call(e,t,n)}async predict(e,t,n){const r=new sr.xc(e),a=await this.call([r],t,n);if("string"!==typeof a.content)throw new Error("Cannot use predict when output is not a string.");return a.content}}var Zr=n(6139);function Vr(e){return{name:e.name,description:e.description,parameters:(0,Zr.Ik)(e.schema)}}function Hr(e){return function(e){return void 0!==e&&Array.isArray(e.lc_namespace)}(e)?{type:"function",function:Vr(e)}:e}var Wr=n(1430),qr=n(261);class $r extends Lr.YN{static lc_name(){return"RunnablePassthrough"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e&&(this.func=e.func)}async invoke(e,t){const n=(0,Wr.ZI)(t);return this.func&&await this.func(e,n),this._callWithConfig((e=>Promise.resolve(e)),e,n)}async*transform(e,t){const n=(0,Wr.ZI)(t);let r,a=!0;for await(const i of this._transformStreamWithConfig(e,(e=>e),n))if(yield i,a)if(void 0===r)r=i;else try{r=(0,qr.xW)(r,i)}catch{r=void 0,a=!1}this.func&&void 0!==r&&await this.func(r,n)}static assign(e){return new Lr.B2(new Lr.ck({steps:e}))}}Lr.YN;Lr.YN;Lr.fJ;class Kr extends Lr.YN{parseResultWithPrompt(e,t,n){return this.parseResult(e,n)}_baseMessageToString(e){return"string"===typeof e.content?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}async invoke(e,t){return"string"===typeof e?this._callWithConfig((async(e,t)=>this.parseResult([{text:e}],null===t||void 0===t?void 0:t.callbacks)),e,{...t,runType:"parser"}):this._callWithConfig((async(e,t)=>this.parseResult([{message:e,text:this._baseMessageToString(e)}],null===t||void 0===t?void 0:t.callbacks)),e,{...t,runType:"parser"})}}class Jr extends Kr{parseResult(e,t){return this.parse(e[0].text,t)}async parseWithPrompt(e,t,n){return this.parse(e,n)}_type(){throw new Error("_type not implemented")}}class Yr extends Error{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(super(e),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=t,this.observation=n,this.sendToLLM=r,r&&(void 0===n||void 0===t))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true")}}var Gr=n(543),Qr=n(3753);function Xr(e,t){const n=typeof e;if(n!==typeof t)return!1;if(Array.isArray(e)){if(!Array.isArray(t))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(!Xr(e[r],t[r]))return!1;return!0}if("object"===n){if(!e||!t)return e===t;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const a of n)if(!Xr(e[a],t[a]))return!1;return!0}return e===t}"undefined"!==typeof self&&self.location&&"null"!==self.location.origin&&(self.location.origin,self.location.pathname,location.search);const ea=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,ta=[0,31,28,31,30,31,30,31,31,30,31,30,31],na=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,ra=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,aa=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,ia=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,oa=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)(?:\.(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,sa=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,la=/^(?:\/(?:[^~/]|~0|~1)*)*$/,ca=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,ua=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,da=/^\d\d\d\d-[0-1]\d-[0-3]\d$/,ha=/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,fa=/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,pa=/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,ma=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,va=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i;function ga(e){return e.test.bind(e)}const ya={date:ba,time:wa.bind(void 0,!1),"date-time":function(e){const t=e.split(_a);return 2==t.length&&ba(t[0])&&wa(!0,t[1])},duration:e=>e.length>1&&e.length<80&&(/^P\d+([.,]\d+)?W$/.test(e)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(e)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(e)),uri:function(e){return ka.test(e)&&xa.test(e)},"uri-reference":ga(aa),"uri-template":ga(ia),url:ga(oa),email:e=>{if('"'===e[0])return!1;const[t,n,...r]=e.split("@");return!(!t||!n||0!==r.length||t.length>64||n.length>253)&&("."!==t[0]&&!t.endsWith(".")&&!t.includes("..")&&(!(!/^[a-z0-9.-]+$/i.test(n)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(t))&&n.split(".").every((e=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(e)))))},hostname:ga(ra),ipv4:ga(ma),ipv6:ga(va),regex:function(e){if(Sa.test(e))return!1;try{return new RegExp(e),!0}catch(t){return!1}},uuid:ga(sa),"json-pointer":ga(la),"json-pointer-uri-fragment":ga(ca),"relative-json-pointer":ga(ua)};function ba(e){const t=e.match(ea);if(!t)return!1;const n=+t[1],r=+t[2],a=+t[3];return r>=1&&r<=12&&a>=1&&a<=(2==r&&function(e){return e%4===0&&(e%100!==0||e%400===0)}(n)?29:ta[r])}function wa(e,t){const n=t.match(na);if(!n)return!1;const r=+n[1],a=+n[2],i=+n[3],o=!!n[5];return(r<=23&&a<=59&&i<=59||23==r&&59==a&&60==i)&&(!e||o)}const _a=/t|\s/i;const ka=/\/|:/,xa=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;const Sa=/[^\\]\\Z/;class Oa extends Jr{async*_transform(e){for await(const t of e)"string"===typeof t?yield this.parseResult([{text:t}]):yield this.parseResult([{message:t,text:this._baseMessageToString(t)}])}async*transform(e,t){yield*this._transformStreamWithConfig(e,this._transform.bind(this),{...t,runType:"parser"})}}class Ea extends Oa{constructor(e){var t;super(e),Object.defineProperty(this,"diff",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.diff=null!==(t=null===e||void 0===e?void 0:e.diff)&&void 0!==t?t:this.diff}async*_transform(e){let t,n;for await(const r of e){if("string"!==typeof r&&"string"!==typeof r.content)throw new Error("Cannot handle non-string output.");let e;if((0,Gr.AJ)(r)){if("string"!==typeof r.content)throw new Error("Cannot handle non-string message output.");e=new ur({message:r,text:r.content})}else if((0,Gr.ny)(r)){if("string"!==typeof r.content)throw new Error("Cannot handle non-string message output.");e=new ur({message:(0,Qr.ih)(r),text:r.content})}else e=new cr({text:r});n=void 0===n?e:n.concat(e);const a=await this.parsePartialResult([n]);void 0===a||null===a||Xr(a,t)||(this.diff?yield this._diff(t,a):yield a,t=a)}}}class Pa extends Oa{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","string"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"StrOutputParser"}parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}_textContentToString(e){return e.text}_imageUrlContentToString(e){throw new Error('Cannot coerce a multimodal "image_url" message part into a string.')}_messageContentComplexToString(e){switch(e.type){case"text":if("text"in e)return this._textContentToString(e);break;case"image_url":if("image_url"in e)return this._imageUrlContentToString(e);break;default:throw new Error('Cannot coerce "'.concat(e.type,'" message part into a string.'))}throw new Error("Invalid content type: ".concat(e.type))}_baseMessageContentToString(e){return e.reduce(((e,t)=>e+this._messageContentComplexToString(t)),"")}}var Ta=n(7665);class Ca extends Jr{static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","structured"]})}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){return new this(Ta.z.object(Object.fromEntries(Object.entries(e).map((e=>{let[t,n]=e;return[t,Ta.z.string().describe(n)]})))))}getFormatInstructions(){return'You must format your output as a JSON value that adheres to a given "JSON Schema" instance.\n\n"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.\n\nFor example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}}}\nwould match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.\nThus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.\n\nYour output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!\n\nHere is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:\n```json\n'.concat(JSON.stringify((0,Zr.Ik)(this.schema)),"\n```\n")}async parse(e){try{const t=(e.includes("```")?e.trim().split(/```(?:json)?/)[1]:e.trim()).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,((e,t)=>{const n=t.replace(/\n/g,"\\n");return'"'.concat(n,'"')})).replace(/\n/g,"");return await this.schema.parseAsync(JSON.parse(t))}catch(t){throw new Yr('Failed to parse. Text: "'.concat(e,'". Error: ').concat(t),e)}}}var Aa=n(6922),Ia=n(9523);class Na extends Ea{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"JsonOutputParser"}_diff(e,t){if(t)return e?(0,Aa.UD)(e,t):[{op:"replace",path:"",value:t}]}async parsePartialResult(e){return(0,Ia.D)(e[0].text)}async parse(e){return(0,Ia.D)(e,JSON.parse)}getFormatInstructions(){return""}}function ja(e,t){if(void 0===e.function)return;let n;if(null!==t&&void 0!==t&&t.partial)try{var r;n=(0,Ia.d)(null!==(r=e.function.arguments)&&void 0!==r?r:"{}")}catch(i){return}else try{n=JSON.parse(e.function.arguments)}catch(i){throw new Yr(['Function "'.concat(e.function.name,'" arguments:'),"",e.function.arguments,"","are not valid JSON.","Error: ".concat(i.message)].join("\n"))}const a={name:e.function.name,args:n};return null!==t&&void 0!==t&&t.returnId&&(a.id=e.id),a}function Ra(e){if(void 0===e.id)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:e.id,type:"function",function:{name:e.name,arguments:JSON.stringify(e.args)}}}function Ma(e,t){var n,r;return{name:null===(n=e.function)||void 0===n?void 0:n.name,args:null===(r=e.function)||void 0===r?void 0:r.arguments,id:e.id,error:t}}class La extends Kr{static lc_name(){return"JsonOutputToolsParser"}constructor(e){var t;super(e),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.returnId=null!==(t=null===e||void 0===e?void 0:e.returnId)&&void 0!==t?t:this.returnId}async parseResult(e){const t=e[0].message.additional_kwargs.tool_calls;if(!t)throw new Error("No tools_call in message ".concat(JSON.stringify(e)));const n=JSON.parse(JSON.stringify(t)),r=[];for(const a of n){const e=ja(a,{partial:!0});if(void 0!==e){const t={type:e.name,args:e.args,id:e.id};Object.defineProperty(t,"name",{get(){return this.type}}),Object.defineProperty(t,"arguments",{get(){return this.args}}),r.push(t)}}return r}}class za extends Kr{static lc_name(){return"JsonOutputKeyToolsParser"}constructor(e){var t;super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"initialParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=null!==(t=e.returnSingle)&&void 0!==t?t:this.returnSingle,this.initialParser=new La(e),this.zodSchema=e.zodSchema}async _validateResult(e){if(void 0===this.zodSchema)return e;const t=await this.zodSchema.safeParseAsync(e);if(t.success)return t.data;throw new Yr('Failed to parse. Text: "'.concat(JSON.stringify(e,null,2),'". Error: ').concat(JSON.stringify(t.error.errors)),JSON.stringify(e,null,2))}async parseResult(e){const t=(await this.initialParser.parseResult(e)).filter((e=>e.type===this.keyName));let n=t;if(this.returnId||(n=t.map((e=>e.args))),this.returnSingle)return this._validateResult(n[0]);const r=await Promise.all(n.map((e=>this._validateResult(e))));return r}}function Da(e){const{azureOpenAIApiDeploymentName:t,azureOpenAIApiInstanceName:n,azureOpenAIApiKey:r,azureOpenAIBasePath:a,baseURL:i}=e;if(r&&a&&t)return"".concat(a,"/").concat(t);if(r){if(!n)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!t)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return"https://".concat(n,".openai.azure.com/openai/deployments/").concat(t)}return i}function Fa(e){let t;return e.constructor.name===Gn.name?(t=new Error(e.message),t.name="TimeoutError"):e.constructor.name===Qn.name?(t=new Error(e.message),t.name="AbortError"):t=e,t}function Ua(e,t){const n=[];for(const[i,o]of Object.entries(null!==(r=e.properties)&&void 0!==r?r:{})){var r,a;o.description&&t<2&&n.push("// ".concat(o.description)),null!==(a=e.required)&&void 0!==a&&a.includes(i)?n.push("".concat(i,": ").concat(Ba(o,t),",")):n.push("".concat(i,"?: ").concat(Ba(o,t),","))}return n.map((e=>" ".repeat(t)+e)).join("\n")}function Ba(e,t){if(void 0!==(n=e).anyOf&&Array.isArray(n.anyOf))return e.anyOf.map((e=>Ba(e,t))).join(" | ");var n;switch(e.type){case"string":return e.enum?e.enum.map((e=>'"'.concat(e,'"'))).join(" | "):"string";case"number":case"integer":return e.enum?e.enum.map((e=>"".concat(e))).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",Ua(e,t+2),"}"].join("\n");case"array":return e.items?"".concat(Ba(e.items,t),"[]"):"any[]";default:return""}}function Za(e){const t=e._getType();switch(t){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":if(!sr.cM.isInstance(e))throw new Error("Invalid generic chat message");return function(e){return"system"!==e.role&&"assistant"!==e.role&&"user"!==e.role&&"function"!==e.role&&"tool"!==e.role&&console.warn("Unknown message role: ".concat(e.role)),e.role}(e);default:throw new Error("Unknown message type: ".concat(t))}}function Va(e){var t;const n=e.tool_calls;if("assistant"===e.role){const t=[],a=[];for(const e of null!==n&&void 0!==n?n:[])try{t.push(ja(e,{returnId:!0}))}catch(r){a.push(Ma(e,r.message))}return new sr.Od({content:e.content||"",tool_calls:t,invalid_tool_calls:a,additional_kwargs:{function_call:e.function_call,tool_calls:n}})}return new sr.cM(e.content||"",null!==(t=e.role)&&void 0!==t?t:"unknown")}function Ha(e,t){var n,r;const a=null!==(n=e.role)&&void 0!==n?n:t,i=null!==(r=e.content)&&void 0!==r?r:"";let o;if(o=e.function_call?{function_call:e.function_call}:e.tool_calls?{tool_calls:e.tool_calls}:{},"user"===a)return new sr.a7({content:i});if("assistant"===a){const t=[];if(Array.isArray(e.tool_calls))for(const n of e.tool_calls){var s,l;t.push({name:null===(s=n.function)||void 0===s?void 0:s.name,args:null===(l=n.function)||void 0===l?void 0:l.arguments,id:n.id,index:n.index})}return new sr.H({content:i,tool_call_chunks:t,additional_kwargs:o})}return"system"===a?new sr.uU({content:i}):"function"===a?new sr.FK({content:i,additional_kwargs:o,name:e.name}):"tool"===a?new sr.dr({content:i,additional_kwargs:o,tool_call_id:e.tool_call_id}):new sr.XU({content:i,role:a})}function Wa(e){return e.map((e=>{var t;const n={role:Za(e),content:e.content};return null!=e.name&&(n.name=e.name),null!=e.additional_kwargs.function_call&&(n.function_call=e.additional_kwargs.function_call),(0,sr.KX)(e)&&null!==(t=e.tool_calls)&&void 0!==t&&t.length?n.tool_calls=e.tool_calls.map(Ra):(null!=e.additional_kwargs.tool_calls&&(n.tool_calls=e.additional_kwargs.tool_calls),null!=e.tool_call_id&&(n.tool_call_id=e.tool_call_id)),n}))}class qa extends Br{static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",apiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",apiKey:"openai_api_key",azureOpenAIApiVersion:"azure_openai_api_version",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIApiInstanceName:"azure_openai_api_instance_name",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(e,t){var n,r,a,i,o,s,l,c,u,d,h,f,p,m,v,g,y,b,w,_,k,x,S,O,E,P,T;if(super(null!==e&&void 0!==e?e:{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topLogprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=null!==(n=null!==(r=null===e||void 0===e?void 0:e.apiKey)&&void 0!==r?r:null===e||void 0===e?void 0:e.openAIApiKey)&&void 0!==n?n:(0,dr.Az)("OPENAI_API_KEY"),this.apiKey=this.openAIApiKey,this.azureOpenAIApiKey=null!==(a=null===e||void 0===e?void 0:e.azureOpenAIApiKey)&&void 0!==a?a:(0,dr.Az)("AZURE_OPENAI_API_KEY"),!this.azureOpenAIApiKey&&!this.apiKey)throw new Error("OpenAI or Azure OpenAI API key not found");if(this.azureOpenAIApiInstanceName=null!==(i=null===e||void 0===e?void 0:e.azureOpenAIApiInstanceName)&&void 0!==i?i:(0,dr.Az)("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=null!==(o=null===e||void 0===e?void 0:e.azureOpenAIApiDeploymentName)&&void 0!==o?o:(0,dr.Az)("AZURE_OPENAI_API_DEPLOYMENT_NAME"),this.azureOpenAIApiVersion=null!==(s=null===e||void 0===e?void 0:e.azureOpenAIApiVersion)&&void 0!==s?s:(0,dr.Az)("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=null!==(l=null===e||void 0===e?void 0:e.azureOpenAIBasePath)&&void 0!==l?l:(0,dr.Az)("AZURE_OPENAI_BASE_PATH"),this.organization=null!==(c=null===e||void 0===e||null===(u=e.configuration)||void 0===u?void 0:u.organization)&&void 0!==c?c:(0,dr.Az)("OPENAI_ORGANIZATION"),this.modelName=null!==(d=null!==(h=null===e||void 0===e?void 0:e.model)&&void 0!==h?h:null===e||void 0===e?void 0:e.modelName)&&void 0!==d?d:this.model,this.model=this.modelName,this.modelKwargs=null!==(f=null===e||void 0===e?void 0:e.modelKwargs)&&void 0!==f?f:{},this.timeout=null===e||void 0===e?void 0:e.timeout,this.temperature=null!==(p=null===e||void 0===e?void 0:e.temperature)&&void 0!==p?p:this.temperature,this.topP=null!==(m=null===e||void 0===e?void 0:e.topP)&&void 0!==m?m:this.topP,this.frequencyPenalty=null!==(v=null===e||void 0===e?void 0:e.frequencyPenalty)&&void 0!==v?v:this.frequencyPenalty,this.presencePenalty=null!==(g=null===e||void 0===e?void 0:e.presencePenalty)&&void 0!==g?g:this.presencePenalty,this.maxTokens=null===e||void 0===e?void 0:e.maxTokens,this.logprobs=null===e||void 0===e?void 0:e.logprobs,this.topLogprobs=null===e||void 0===e?void 0:e.topLogprobs,this.n=null!==(y=null===e||void 0===e?void 0:e.n)&&void 0!==y?y:this.n,this.logitBias=null===e||void 0===e?void 0:e.logitBias,this.stop=null!==(b=null===e||void 0===e?void 0:e.stopSequences)&&void 0!==b?b:null===e||void 0===e?void 0:e.stop,this.stopSequences=null===this||void 0===this?void 0:this.stop,this.user=null===e||void 0===e?void 0:e.user,this.streaming=null!==(w=null===e||void 0===e?void 0:e.streaming)&&void 0!==w&&w,this.azureOpenAIApiKey){var C;if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found");this.apiKey=null!==(C=this.apiKey)&&void 0!==C?C:""}this.clientConfig={apiKey:this.apiKey,organization:this.organization,baseURL:null!==(_=null===t||void 0===t?void 0:t.basePath)&&void 0!==_?_:null===e||void 0===e||null===(k=e.configuration)||void 0===k?void 0:k.basePath,dangerouslyAllowBrowser:!0,defaultHeaders:null!==(x=null===t||void 0===t||null===(S=t.baseOptions)||void 0===S?void 0:S.headers)&&void 0!==x?x:null===e||void 0===e||null===(O=e.configuration)||void 0===O||null===(O=O.baseOptions)||void 0===O?void 0:O.headers,defaultQuery:null!==(E=null===t||void 0===t||null===(P=t.baseOptions)||void 0===P?void 0:P.params)&&void 0!==E?E:null===e||void 0===e||null===(T=e.configuration)||void 0===T||null===(T=T.baseOptions)||void 0===T?void 0:T.params,...t,...null===e||void 0===e?void 0:e.configuration}}bindTools(e,t){return this.bind({tools:e.map(Hr),...t})}invocationParams(e){var t;var n;return{model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,max_tokens:-1===this.maxTokens?void 0:this.maxTokens,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:null!==(t=null===e||void 0===e?void 0:e.stop)&&void 0!==t?t:this.stopSequences,user:this.user,stream:this.streaming,functions:null===e||void 0===e?void 0:e.functions,function_call:null===e||void 0===e?void 0:e.function_call,tools:(n=null===e||void 0===e?void 0:e.tools,void 0!==n&&n.every((e=>Array.isArray(e.lc_namespace)))?null===e||void 0===e?void 0:e.tools.map(Hr):null===e||void 0===e?void 0:e.tools),tool_choice:null===e||void 0===e?void 0:e.tool_choice,response_format:null===e||void 0===e?void 0:e.response_format,seed:null===e||void 0===e?void 0:e.seed,...this.modelKwargs}}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}async*_streamResponseChunks(e,t,n){var r;const a=Wa(e),i={...this.invocationParams(t),messages:a,stream:!0};let o;const s=await this.completionWithRetry(i,t);for await(const h of s){var l,c,u,d;const e=null===h||void 0===h?void 0:h.choices[0];if(!e)continue;const{delta:r}=e;if(!r)continue;const a=Ha(r,o);o=null!==(l=r.role)&&void 0!==l?l:o;const i={prompt:null!==(c=t.promptIndex)&&void 0!==c?c:0,completion:null!==(u=e.index)&&void 0!==u?u:0};if("string"!==typeof a.content){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}const s={...i};void 0!==e.finish_reason&&(s.finish_reason=e.finish_reason),this.logprobs&&(s.logprobs=e.logprobs);const f=new ur({message:a,text:a.content,generationInfo:s});yield f,null===n||void 0===n||n.handleLLMNewToken(null!==(d=f.text)&&void 0!==d?d:"",i,void 0,void 0,void 0,{chunk:f})}if(null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new Error("AbortError")}identifyingParams(){return this._identifyingParams()}async _generate(e,t,n){const r={},a=this.invocationParams(t),i=Wa(e);if(a.stream){const a=this._streamResponseChunks(e,t,n),i={};for await(const e of a){var o,s;e.message.response_metadata={...e.generationInfo,...e.message.response_metadata};const t=null!==(o=null===(s=e.generationInfo)||void 0===s?void 0:s.completion)&&void 0!==o?o:0;void 0===i[t]?i[t]=e:i[t]=i[t].concat(e)}const l=Object.entries(i).sort(((e,t)=>{let[n]=e,[r]=t;return parseInt(n,10)-parseInt(r,10)})).map((e=>{let[t,n]=e;return n})),{functions:c,function_call:u}=this.invocationParams(t),d=await this.getEstimatedTokenCountFromPrompt(e,c,u),h=await this.getNumTokensFromGenerations(l);return r.promptTokens=d,r.completionTokens=h,r.totalTokens=d+h,{generations:l,llmOutput:{estimatedTokenUsage:r}}}{var l;const e=await this.completionWithRetry({...a,stream:!1,messages:i},{signal:null===t||void 0===t?void 0:t.signal,...null===t||void 0===t?void 0:t.options}),{completion_tokens:n,prompt_tokens:o,total_tokens:s}=null!==(l=null===e||void 0===e?void 0:e.usage)&&void 0!==l?l:{};var c,u,d;if(n)r.completionTokens=(null!==(c=r.completionTokens)&&void 0!==c?c:0)+n;if(o)r.promptTokens=(null!==(u=r.promptTokens)&&void 0!==u?u:0)+o;if(s)r.totalTokens=(null!==(d=r.totalTokens)&&void 0!==d?d:0)+s;const v=[];for(const t of null!==(h=null===e||void 0===e?void 0:e.choices)&&void 0!==h?h:[]){var h,f,p,m;const e={text:null!==(f=null===(p=t.message)||void 0===p?void 0:p.content)&&void 0!==f?f:"",message:Va(null!==(m=t.message)&&void 0!==m?m:{role:"assistant"})};e.generationInfo={...t.finish_reason?{finish_reason:t.finish_reason}:{},...t.logprobs?{logprobs:t.logprobs}:{}},v.push(e)}return{generations:v,llmOutput:{tokenUsage:r}}}}async getEstimatedTokenCountFromPrompt(e,t,n){let r=(await this.getNumTokensFromMessages(e)).totalCount;if(t&&"auto"!==n){const e=function(e){const t=["namespace functions {",""];for(const r of e){var n;r.description&&t.push("// ".concat(r.description)),Object.keys(null!==(n=r.parameters.properties)&&void 0!==n?n:{}).length>0?(t.push("type ".concat(r.name," = (_: {")),t.push(Ua(r.parameters,0)),t.push("}) => any;")):t.push("type ".concat(r.name," = () => any;")),t.push("")}return t.push("} // namespace functions"),t.join("\n")}(t);r+=await this.getNumTokens(e),r+=9}return t&&e.find((e=>"system"===e._getType()))&&(r-=4),"none"===n?r+=1:"object"===typeof n&&(r+=await this.getNumTokens(n.name)+4),r}async getNumTokensFromGenerations(e){return(await Promise.all(e.map((async e=>{var t;return null!==(t=e.message.additional_kwargs)&&void 0!==t&&t.function_call?(await this.getNumTokensFromMessages([e.message])).countPerMessage[0]:await this.getNumTokens(e.message.content)})))).reduce(((e,t)=>e+t),0)}async getNumTokensFromMessages(e){let t=0,n=0,r=0;"gpt-3.5-turbo-0301"===this.model?(n=4,r=-1):(n=3,r=1);const a=await Promise.all(e.map((async e=>{var a,i,o;const s=await this.getNumTokens(e.content),l=await this.getNumTokens(Za(e)),c=void 0!==e.name?r+await this.getNumTokens(e.name):0;let u=s+n+l+c;const d=e;var h;("function"===d._getType()&&(u-=2),null!==(a=d.additional_kwargs)&&void 0!==a&&a.function_call&&(u+=3),null!==d&&void 0!==d&&null!==(i=d.additional_kwargs.function_call)&&void 0!==i&&i.name)&&(u+=await this.getNumTokens(null===(h=d.additional_kwargs.function_call)||void 0===h?void 0:h.name));if(null!==(o=d.additional_kwargs.function_call)&&void 0!==o&&o.arguments)try{var f;u+=await this.getNumTokens(JSON.stringify(JSON.parse(null===(f=d.additional_kwargs.function_call)||void 0===f?void 0:f.arguments)))}catch(m){var p;console.error("Error parsing function arguments",m,JSON.stringify(d.additional_kwargs.function_call)),u+=await this.getNumTokens(null===(p=d.additional_kwargs.function_call)||void 0===p?void 0:p.arguments)}return t+=u,u})));return t+=3,{totalCount:t,countPerMessage:a}}async completionWithRetry(e,t){const n=this._getClientOptions(t);return this.caller.call((async()=>{try{return await this.client.chat.completions.create(e,n)}catch(t){throw Fa(t)}}))}_getClientOptions(e){if(!this.client){const e=Da({azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,baseURL:this.clientConfig.baseURL}),t={...this.clientConfig,baseURL:e,timeout:this.timeout,maxRetries:0};t.baseURL||delete t.baseURL,this.client=new $n(t)}const t={...this.clientConfig,...e};return this.azureOpenAIApiKey&&(t.headers={"api-key":this.azureOpenAIApiKey,...t.headers},t.query={"api-version":this.azureOpenAIApiVersion,...t.query}),t}_llmType(){return"openai"}_combineLLMOutput(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>{var n,r,a;t&&t.tokenUsage&&(e.tokenUsage.completionTokens+=null!==(n=t.tokenUsage.completionTokens)&&void 0!==n?n:0,e.tokenUsage.promptTokens+=null!==(r=t.tokenUsage.promptTokens)&&void 0!==r?r:0,e.tokenUsage.totalTokens+=null!==(a=t.tokenUsage.totalTokens)&&void 0!==a?a:0);return e}),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}withStructuredOutput(e,t){let n,r,a,i;var o;let s,l;if(void 0!==(o=e)&&"object"===typeof o.schema?(n=e.schema,r=e.name,a=e.method,i=e.includeRaw):(n=e,r=null===t||void 0===t?void 0:t.name,a=null===t||void 0===t?void 0:t.method,i=null===t||void 0===t?void 0:t.includeRaw),"jsonMode"===a)s=this.bind({response_format:{type:"json_object"}}),l=$a(n)?Ca.fromZodSchema(n):new Na;else{var c;let e=null!==(c=r)&&void 0!==c?c:"extract";if($a(n)){const t=(0,Zr.Ik)(n);s=this.bind({tools:[{type:"function",function:{name:e,description:t.description,parameters:t}}],tool_choice:{type:"function",function:{name:e}}}),l=new za({returnSingle:!0,keyName:e,zodSchema:n})}else{let t;var u,d;if("string"===typeof n.name&&"object"===typeof n.parameters&&null!=n.parameters)t=n,e=n.name;else e=null!==(u=n.title)&&void 0!==u?u:e,t={name:e,description:null!==(d=n.description)&&void 0!==d?d:"",parameters:n};s=this.bind({tools:[{type:"function",function:t}],tool_choice:{type:"function",function:{name:e}}}),l=new za({returnSingle:!0,keyName:e})}}if(!i)return s.pipe(l);const h=$r.assign({parsed:(e,t)=>l.invoke(e.raw,t)}),f=$r.assign({parsed:()=>null}),p=h.withFallbacks({fallbacks:[f]});return Lr.zZ.from([{raw:s},p])}}function $a(e){return"function"===typeof(null===e||void 0===e?void 0:e.parse)}class Ka extends Error{constructor(e,t){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=t}}class Ja extends Dr{get lc_namespace(){return["langchain","tools"]}constructor(e){super(null!==e&&void 0!==e?e:{}),Object.defineProperty(this,"returnDirect",{enumerable:!0,configurable:!0,writable:!0,value:!1})}async invoke(e,t){return this.call(e,(0,Wr.ZI)(t))}async call(e,t,n){let r;try{r=await this.schema.parseAsync(e)}catch(l){throw new Ka("Received tool input did not match expected schema",JSON.stringify(e))}const a=(0,Ur.H_)(t),i=await Ur.Td.configure(a.callbacks,this.callbacks,a.tags||n,this.tags,a.metadata,this.metadata,{verbose:this.verbose}),o=await(null===i||void 0===i?void 0:i.handleToolStart(this.toJSON(),"string"===typeof r?r:JSON.stringify(r),a.runId,void 0,void 0,void 0,a.runName));let s;delete a.runId;try{s=await this._call(r,o,a)}catch(l){throw await(null===o||void 0===o?void 0:o.handleToolError(l)),l}return await(null===o||void 0===o?void 0:o.handleToolEnd(s)),s}}class Ya extends Ja{constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:Ta.z.object({input:Ta.z.string().optional()}).transform((e=>e.input))})}call(e,t){return super.call("string"!==typeof e&&e?e:{input:e},t)}}function Ga(e){return new qa({apiKey:"your LLM key",model:e})}Object.defineProperty(class extends Ya{static lc_name(){return"DallEAPIWrapper"}constructor(e){var t,n,r,a,i,o,s,l,c,u;super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"dalle_api_wrapper"}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:"A wrapper around OpenAI DALL-E API. Useful for when you need to generate images from a text description. Input should be an image description."}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"dall-e-3"}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:"vivid"}),Object.defineProperty(this,"quality",{enumerable:!0,configurable:!0,writable:!0,value:"standard"}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:"1024x1024"}),Object.defineProperty(this,"responseFormat",{enumerable:!0,configurable:!0,writable:!0,value:"url"}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const d={apiKey:null!==(t=null!==(n=null===e||void 0===e?void 0:e.apiKey)&&void 0!==n?n:null===e||void 0===e?void 0:e.openAIApiKey)&&void 0!==t?t:(0,dr.Az)("OPENAI_API_KEY"),organization:null!==(r=null===e||void 0===e?void 0:e.organization)&&void 0!==r?r:(0,dr.Az)("OPENAI_ORGANIZATION"),dangerouslyAllowBrowser:!0};this.client=new $n(d),this.model=null!==(a=null!==(i=null===e||void 0===e?void 0:e.model)&&void 0!==i?i:null===e||void 0===e?void 0:e.modelName)&&void 0!==a?a:this.model,this.style=null!==(o=null===e||void 0===e?void 0:e.style)&&void 0!==o?o:this.style,this.quality=null!==(s=null===e||void 0===e?void 0:e.quality)&&void 0!==s?s:this.quality,this.n=null!==(l=null===e||void 0===e?void 0:e.n)&&void 0!==l?l:this.n,this.size=null!==(c=null===e||void 0===e?void 0:e.size)&&void 0!==c?c:this.size,this.responseFormat=null!==(u=null===e||void 0===e?void 0:e.responseFormat)&&void 0!==u?u:this.responseFormat,this.user=null===e||void 0===e?void 0:e.user}async _call(e){const t=await this.client.images.generate({model:this.model,prompt:e,n:this.n,size:this.size,response_format:this.responseFormat,style:this.style,quality:this.quality,user:this.user});let n="";return"url"===this.responseFormat?[n]=t.data.map((e=>e.url)).filter((e=>"undefined"!==e)):[n]=t.data.map((e=>e.b64_json)).filter((e=>"undefined"!==e)),n}},"toolName",{enumerable:!0,configurable:!0,writable:!0,value:"dalle_api_wrapper"});var Qa=n(4778),Xa=n(7717);n(3492);Qa.m;n(6933),n(454),n(3849),n(3330);Xa.RZ;const ei=Xa.RZ.fromMessages([["system","you are data generate expert, you can generate data base on given data type"],["user","create {fileType} format data base on field name,field type, field range,should add data header.Below are data fields and type. data lines is {lines}. \n dataTypes: \n{dataTypes} \nOnly generate test data, do not generate any explanation"]]),ti=Xa.RZ.fromMessages([["system","you are data generate expert, you can generate data base on given data type"],["user","create {fileType} format data base on field name,field type, field range. Do not add data header.Below are data fields and type. data lines is {lines}. \n dataTypes: \n{dataTypes} \nOnly generate test data, do not generate any explanation, do not generate data header"]]);const ni=()=>{const[e,n]=(0,t.useState)({lines:10,format:"CSV",lineEnding:"Unix(LF)",hasHeader:!1,model:"gpt-3.5-turbo"}),[r,i]=(0,t.useState)([{name:"",type:"",blank:0}]);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"title-container",children:[(0,a.jsx)("label",{children:"Name"}),(0,a.jsx)("label",{children:"Type"}),(0,a.jsx)("label",{children:"Options"})]}),r.map(((e,t)=>(0,a.jsx)(c,{data:e,onRemove:()=>(e=>{const t=r.filter(((t,n)=>n!==e));i(t)})(t),onUpdate:e=>((e,t)=>{const n=[...r];n[e]={...n[e],...t},i(n)})(t,e)},t))),(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("button",{className:"big-button",onClick:()=>{i([...r,{name:"",type:"",blank:0}])},children:"AddFiled"}),(0,a.jsxs)("button",{className:"big-button",id:"genData",onClick:async()=>{await ri(e,r)},children:["GenData",(0,a.jsx)("div",{id:"spinner",className:"spinner",hidden:!0})]}),(0,a.jsx)("button",{className:"big-button",onClick:()=>{i([])},children:"RemoveAll"})]}),(0,a.jsx)(u,{data:e,onUpdate:e=>{n(e)}})]})},ri=async(e,t)=>{const n=document.querySelector("#spinner"),r=document.querySelector("#genData");let a;try{n.hidden=!1,r.disable=!0,a=await async function(e,t,n,r,a){const i=new Pa;let o;return console.log("----model is ----"+t),console.log("----dataType is---"+JSON.stringify(a)),a.forEach((e=>{console.log(e)})),console.log("----dataTypes is---"+a),o=e?ei.pipe(Ga(t)).pipe(i):ti.pipe(Ga(t)).pipe(i),await o.invoke({fileType:n,lines:r,dataTypes:JSON.stringify(a)})}(e.hasHeader,e.model,e.format,e.lines,t)}catch(c){console.error(c)}finally{n.hidden=!0,r.disable=!1}const i=function(e){const t=e.split("\n"),n=[];t.forEach((e=>{const t=e.split(",").map((e=>"".concat(e))).join(",");n.push(t)}));const r=n.join("\n");return r}(a),o=new Blob([i],{type:"text/csv"}),s=URL.createObjectURL(o),l=document.createElement("a");l.href=s,l.setAttribute("download","generated_data.csv"),document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(s)};function ai(){return(0,a.jsx)("div",{className:"menu2-ui",children:"Menu2 UI content"})}const ii=function(){const[e,n]=(0,t.useState)("menu1");return(0,a.jsxs)("div",{className:"app",children:[(0,a.jsxs)("div",{className:"sidebar",children:[(0,a.jsx)("label",{children:"TestData"}),(0,a.jsx)("button",{onClick:()=>n("menu1"),children:"Gen Fake Data"}),(0,a.jsx)("button",{onClick:()=>n("menu2"),children:"Gen SQL"})]}),(0,a.jsx)("div",{className:"main-content",children:"menu1"===e?(0,a.jsx)(ni,{}):(0,a.jsx)(ai,{})})]})},oi=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then((t=>{let{getCLS:n,getFID:r,getFCP:a,getLCP:i,getTTFB:o}=t;n(e),r(e),a(e),i(e),o(e)}))};r.createRoot(document.getElementById("root")).render((0,a.jsx)(t.StrictMode,{children:(0,a.jsx)(ii,{})})),oi()})()})();
//# sourceMappingURL=main.b64a58a3.js.map